2008-01-23  Mathias Hasselmann  <mathias@openismus.com>

	Fully expand tool items, when style != GTK_TOOLBAR_ICONS.

	* libegg/toolpalette/eggtoolitemgroup.c: See above.

2008-01-23  Mathias Hasselmann  <mathias@openismus.com>

	Implement functions for reordering and finding items.

	* libegg/toolpalette/eggtoolitemgroup.c:
	Implement egg_tool_item_group_set_item_position()
	and egg_tool_item_group_get_drop_item().
	* libegg/toolpalette/eggtoolpalette.c:
	Implement egg_tool_palette_get_drop_item()
	and egg_tool_palette_get_drop_group().
	* libegg/toolpalette/eggtoolpalette.h:
	Add egg_tool_palette_get_drop_group().
	* libegg/toolpalette/testtoolpalette.c:
	Allow reordering of tool items by drag-and-drop.

2008-01-23  Mathias Hasselmann  <mathias@openismus.com>

	Avoid flickering when scrolling.

	* libegg/toolpalette/eggtoolpalette.c: Do not chain-up expose-event
	handler since chaining up causes flicker.
	* libegg/toolpalette/TODO: Updated.

2008-01-23  Mathias Hasselmann  <mathias@openismus.com>

	Expand tool items when not in icon-only mode,
	or when the item requests this.

	* libegg/toolpalette/eggtoolitemgroup.c: Expand tool items.
	* libegg/toolpalette/testtoolpalette.c: Set label instead of tooltip.
	* libegg/toolpalette/TODO: Adding TODO list.

2008-01-23  Mathias Hasselmann  <mathias@openismus.com>

	Consider item visibility during size-allocation.

	* libegg/toolpalette/eggtoolitemgroup.c: Add and consider
	return value of egg_tool_item_group_is_item_visible().
	* libegg/toolpalette/testtoolpalette.c: Add a tool item
	group with some special cases.

2008-01-22  Mathias Hasselmann  <mathias@openismus.com>

	Fix some scrolling issues in EggToolPalette.

	* libegg/toolpalette/eggtoolpalette.c: Properly calculate and
	clamp vertical adjustment in egg_tool_palette_size_allocate().

2008-01-21  Mathias Hasselmann  <mathias@openismus.com>

	Provide hover effect for tool items even in DnD mode.

	* libegg/toolpalette/eggtoolpalette.c: Work arround bug 510377.

2008-01-15  Mathias Hasselmann  <mathias@openismus.com>

	Also demonstrate interactive drag-and-drop.

	* libegg/toolpalette/testtoolpalette.c: Replace text-view by primitive
	canvas widgets to also demonstrate interactive drag-and-drop.

2008-01-15  Mathias Hasselmann  <mathias@openismus.com>

	Mask GTK+ 2.15 features in EggToolPalette to support currently
	GTK+ stable release. Without GTK+ 2.15 appearance of the tool
	palette cannot be changed dynamically.

	* libegg/toolpalette/eggtoolitemgroup.c: Don't call
	gtk_tool_item_toolbar_reconfigured without GTK+ 2.15.
	* libegg/toolpalette/eggtoolpalette.c: Don't implemented
	GtkToolShellIface without GTK+ 2.15.

2008-01-14  Mathias Hasselmann  <mathias@openismus.com>

	* libegg/toolpalette/eggtoolitemgroup.c: Implement GtkToolShellIface.
	Consider item size in size-request. Allow ellipses for table headers.
	* libegg/toolpalette/eggtoolpalette.c: Emit "toolbar-reconfigured"
	signal when the palette's appearance has changed.
	* libegg/toolpalette/testtoolpalette.c: Apply
	GtkToolButton::icon-spacing style property.

2008-01-14  Mathias Hasselmann  <mathias@openismus.com>

	Request GTK+ 2.15 for EggToolPalette.

	* configure.in: Add HAVE_GTK215 conditional.
	* libegg/Makefile.am: Check HAVE_GTK215 conditional
	and set gtk215_SUBDIRS variable accordingly.

2008-01-14  Mathias Hasselmann  <mathias@openismus.com>

	Support filtering of EggEnumAction entries.

	* libegg/toolpalette/eggenumaction.c,
	libegg/toolpalette/eggenumaction.h: Add egg_enum_action_set_filter.
	* libegg/toolpalette/testtoolpalette.c: Filter GTK_ICON_SIZE_INVALID.

2008-01-12  Mathias Hasselmann  <mathias@openismus.com>

	Provide combo boxes for toggling palette properties in test program.

	* libegg/toolpalette/eggenumaction.h: Declare EggEnumAction.
	* libegg/toolpalette/eggenumaction.c: Implement EggEnumAction.
	* libegg/toolpalette/eggtoolitemgroup.c: I18N cleanup.
	* libegg/toolpalette/eggtoolpalette.c: Install object properties.
	* libegg/toolpalette/Makefile.am: Add eggenumaction.c.
	* libegg/toolpalette/testtoolpalette.c: Add new actions.

2008-01-11  Mathias Hasselmann  <mathias@openismus.com>

	* libegg/toolpalette/eggtoolitemgroup.h:
	Change signature of egg_tool_item_group_get_nth_item.
	* libegg/toolpalette/eggtoolitemgroup.c:
	Implement egg_tool_item_group_remove.
	* libegg/toolpalette/eggtoolpalette.c:
	Implement egg_tool_palette_remove.

2008-01-11  Mathias Hasselmann  <mathias@openismus.com>

	Rename self variables to group for consistency.

	* libegg/toolpalette/eggtoolitemgroup.c: Rename self variables.

2008-01-11  Mathias Hasselmann  <mathias@openismus.com>

	Use less animation steps for expand/collapse animation.

	* libegg/toolpalette/eggtoolitemgroup.c: Decrease ANIMATION_DURATION.

2008-01-11  Mathias Hasselmann  <mathias@openismus.com>

	Implement composited expand/collapse animation.

	* libegg/toolpalette/eggtoolitemgroup.h: Indent fixes.
	* libegg/toolpalette/eggtoolitemgroup.c: Implement animation.
	* libegg/toolpalette/eggtoolpalette.c: Draw composited
	EggToolItemGroup. Delegate item group size calculation
	to _egg_tool_item_group_get_height_for_width().
	* libegg/toolpalette/eggtoolpaletteprivate.h:
	Add _egg_tool_item_group_get_height_for_width() and
	_egg_tool_item_group_paint().

2008-01-10  Mathias Hasselmann  <mathias@openismus.com>

	Refactor EggToolPaletteCategory into EggToolItemGroup widget.

	* libegg/toolpalette/eggtoolitemgroup.c,
	libegg/toolpalette/eggtoolitemgroup.h:
	Create EggToolItemGroup from EggToolPaletteCategory structure.
	* libegg/toolpalette/eggtoolpalette.c,
	libegg/toolpalette/eggtoolpalette.h:
	Remove EggToolPaletteCategory and use EggToolItemGroup instead.
	* libegg/toolpalette/eggtoolpaletteprivate.h:
	Collect internal EggToolPalette and EggToolItemGroup functions.
	* libegg/toolpalette/Makefile.am: Add eggtoolitemgroup.c.
	* libegg/toolpalette/testtoolpalette.c:
	Adopt EggToolItemGroup changes.

2008-01-10  Mathias Hasselmann  <mathias@openismus.com>

	Reduce number of referenced widgets in EggToolPaletteCategory.

	* libegg/toolpalette/eggtoolpalette.c: Rename header_button field
	of EggToolPaletteCategory to header, and remove header_label field.

2008-01-09  Mathias Hasselmann  <mathias@openismus.com>

	Provide initial implementation of EggToolPalette.

	* configure.in: Add libegg/toolpalette/Makefile.
	* libegg/Makefile.am: Add toolpalette folder.
	* libegg/toolpalette/eggtoolpalette.c,
	libegg/toolpalette/eggtoolpalette.h: Initial EggToolPalette code.
	* libegg/toolpalette/testtoolpalette.c: Demonstate EggToolPalette.
	* libegg/toolpalette/Makefile.am:
	Build libeggtoolpalette.la and testtoolpalette.

2007-11-03  Felix Riemann  <friemann@svn.gnome.org>

	* libegg/toolbareditor/egg-toolbar-editor.c:
	(egg_toolbar_editor_disconnect_model),
	(egg_toolbar_editor_set_model), (egg_toolbar_editor_class_init),
	(egg_toolbar_editor_finalize):
	* libegg/toolbareditor/egg-toolbar-editor.h:
	Make it possible to change an EggToolbarEditor's model during runtime.
	Should also fix some possibly leaking signal handlers. Fixes #493149.

2007-10-27  Mathias Hasselmann  <mathias@openismus.com>

	* configure.in, doc/libegg.types, doc/Makefile.am, 
	libegg/Makefile.am: Excluding deprecated code that 
	doesn't build anymore.

2007-10-27  Mathias Hasselmann  <mathias.hasselmann@gmx.de>

	* libegg/fileformatchooser/eggfileformatchooser.c:
	Wording changed to "File format not recognized"
	as suggested by Murray Cumming.

2007-10-07  Felix Riemann  <friemann@svn.gnome.org>

	* libegg/toolbareditor/eggmarshalers.list:
	Remove unneeded marshallers from list. Fixes bug #484060.

2007-08-16  Carlos Garcia Campos  <carlosgc@gnome.org>

	* libegg/toolbareditor/egg-toolbar-editor.c: (set_drag_cursor):
	* libegg/toolbareditor/egg-editable-toolbar.c:
	(configure_item_cursor), (new_pixbuf_from_widget):

	Fix multihead problems in toolbar editor.
	
2007-08-15  Mathias Hasselmann  <mathias.hasselmann@gmx.de>

	* libegg/util/egg-macros.h: Make the EGG_DEFINE_* macros thread safe
	as suggested by Tim Janik #449565.

2007-08-01  Mathias Hasselmann  <mathias.hasselmann@gmx.de>

	* libegg/util/egg-macros.h: Introduce
	EGG_IS_POSITIVE_RESPONSE and EGG_IS_NEGATIVE_RESPONSE.
	* libegg/fileformatchooser/eggfileformatchooser.c:
	Intercept the "response" signal of GtkFileChooserDialog to
	automatically append a file extension before closing the dialog.
	* libegg/fileformatchooser/testfileformatchooser.c:
	Check proper behaviour of egg_file_format_chooser_append_extension
	when the filename passed already has an acceptable extension.

2007-07-31  Mathias Hasselmann  <mathias.hasselmann@gmx.de>

	* libegg/fileformatchooser/eggfileformatchooser.c:
	Duh, disconnect "notify::filter" signal on unrealize.

2007-07-31  Mathias Hasselmann  <mathias.hasselmann@gmx.de>

	* libegg/fileformatchooser/eggfileformatchooser.c:
	Synchronize file filter and file format selection.

2007-07-31  Mathias Hasselmann  <mathias.hasselmann@gmx.de>

	* libegg/fileformatchooser/eggfileformatchooser.c:
	Provide a mnemonic for the file format chooser.

2007-07-31  Mathias Hasselmann  <mathias.hasselmann@gmx.de>

	* libegg/fileformatchooser/eggfileformatchooser.c,
	libegg/fileformatchooser/Makefile.am: Built file filters from file
	format list, when attaching the widget to some file chooser.
	* libegg/fileformatchooser/tests/*: Some empty files for testing
	file format based file filtering.
	* libegg/util/egg-macros.h: Implement EGG_DEFINE_BOXED_TYPE,
	EGG_DEFINE_BOXED_TYPE_WITH_CODE, EGG_DEFINE_BOXED_TYPE_EXTENDED
	and EGG_DEFINE_QUARK.

2007-07-31  Mathias Hasselmann  <mathias.hasselmann@gmx.de>

	* configure.in, libegg/Makefile.am,
	libegg/fileformatchooser/*: Adding the file format chooser
	widget to libegg for easy consumtion until it gets merged.

2007-07-29  Carlos Garcia Campos  <carlosgc@gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(egg_editable_toolbar_dispose):

	Fix memory leak.
	
2007-07-02  Felix Riemann  <friemann@svn.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(egg_editable_toolbar_dispose), (egg_editable_toolbar_class_init):
	* libegg/toolbareditor/egg-toolbar-editor.c:
	(egg_toolbar_editor_class_init), (egg_toolbar_editor_finalize):
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_class_init), (egg_toolbars_model_finalize):
	* libegg/toolbareditor/eggtreemultidnd.c:
	(egg_tree_multi_drag_source_get_type):
	Use G_DEFINE_TYPE macros instead of defining types by hand.
	Fixes bug #452923.

2007-06-25  Felix Riemann  <friemann@svn.gnome.org>

	* libegg/toolbareditor/egg-toolbar-editor.c:
	(event_box_realize_cb):
	Make named drag-icons toolbar-sized like the others.
	Part of bug #450590.

2007-06-24  Felix Riemann  <friemann@svn.gnome.org>

	* libegg/toolbareditor/egg-toolbar-editor.c:
	(editor_create_item_from_name):
	More cleanups to my last patch.
	Fixes bug #450590 (Felix Riemann, Jaap Haitsma);

2007-06-24  Felix Riemann  <friemann@svn.gnome.org>

	* libegg/toolbareditor/egg-toolbar-editor.c:
	(editor_create_item_from_name):
	Add a workaround to take into account that Gtk{Radio,Toggle}Actions
	only set either the stock-id or the icon-name property depending on
	the image type. This makes it possible to display the icon of such
	actions in the toolbar editor. (bug #450590)

2007-05-08  Felix Riemann  <friemann@svn.gnome.org>

	* libegg/toolbareditor/egg-toolbar-editor.c:
	(event_box_realize_cb), (editor_create_item_from_name):
	Support named icons in the toolbareditor and attach them to the mouse
	pointer while dragging them to the toolbar. (bug #436684)

2007-05-02  Dan Winship  <danw@novell.com>

	* configure.in: remove EGG_LAUNCHER_LIBS/CFLAGS. Add a check for
	the very very new gdk_x11_display_broadcast_startup_message

2007-04-21  Ross Burton  <ross@burtonini.com>

	* libegg/pixbufthumbnail/egg-pixbuf-thumbnail.c:
	Fix some memory leaks.

2007-02-10  Dan Winship  <danw@novell.com>

	* configure.in: add EGG_LAUNCHER_LIBS/CFLAGS, for EggLauncher in
	libegg/smclient

Mon Jan 29 16:06:55 2007  SÃ¸ren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/eggsequence.c: Add API documentation
	* libegg/sequence/eggsequence.h: Various cleanups.

2007-01-14  Soren Sandmann  <sandmann@daimi.au.dk>

	* libegg/sequence/eggsequence.c (egg_sequence_insert_sorted_iter): 
	Insert the new node into a temporary sequence, so that things like
	is_end() will work correctly when the user compare function calls
	them on the new node.
	
2007-01-13  Dan Winship  <danw@novell.com>

	* libegg/smclient: add EggSMClient, a proposed replacement for
	GnomeClient.

2006-07-30  Vincent Untz  <vuntz@gnome.org>

	* libegg/sidebar/eggsidebar.c: don't keep the group in memory, but
	only the last button
	(egg_sidebar_append): updated for this
	(egg_sidebar_remove): ditto
	Fix bug #90483
	* libegg/sidebar/eggsidebarbutton.c: (egg_sidebar_button_class_init):
	don't mark the static property as construct only
	(egg_sidebar_button_popup_delete_cb): remove the button from the
	sidebar here. Don't know why it wasn't done before :-)

2006-07-28  Vincent Untz  <vuntz@gnome.org>

	* libegg/tray/README:
	* libegg/tray/THIS_IS_DEPRECATED_USE_GTK_STATUS_ICON: add notes about
	deprecation of the tray code in libegg

2006-07-28  Vincent Untz  <vuntz@gnome.org>

	* libegg/tray/eggstatusicon.c: (egg_status_icon_init): ref the tray
	icon.
	Patch from Christian Persch <chpe@gnome.org>
	Fix bug #166143?

2006-07-28  Vincent Untz  <vuntz@gnome.org>

	Transparent icons. Yay.
	Patch by Dan Winship <danw@novell.com>
	Fix bug #150726.

	* libegg/tray/eggtrayicon.c: (egg_tray_icon_class_init): overload the
	add method
	(transparent_expose_event): new
	(make_transparent_again): new
	(make_transparent): new, do some magic
	(egg_tray_icon_realize): make the icon transparent
	(egg_tray_icon_add): when adding a widget to the tray, connect to the
	realize signal to make it transparent

2006-07-28  Vincent Untz  <vuntz@gnome.org>

	* libegg/tray/eggtrayicon.c: (egg_tray_icon_send_message): make
	sending of messages work
	Patch by Matthias Clasen <mclasen@redhat.com>
	Fix bug #314292

2006-07-28  Vincent Untz  <vuntz@gnome.org>

	* libegg/tray/eggstatusicon.c: use gobject instance private data
	(egg_status_icon_init): updated
	Patch from Christian Persch <chpe@gnome.org>
	Fix bug #150370

2006-06-22  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/Makefile.am: Fix compilation to make
	muntyan happy.

2006-05-25  Nickolay V. Shmyrev  <nshmyrev@yandex.ru>

	* libegg/toolbareditor/Makefile.am:
	* libegg/toolbareditor/egg-editable-toolbar.c: (get_dock_position),
	(get_toolbar_position), (get_toolbar_nth), (find_action),
	(drag_data_delete_cb), (drag_begin_cb), (drag_end_cb),
	(drag_data_get_cb), (move_item_cb), (remove_item_cb),
	(remove_toolbar_cb), (popup_context_deactivate),
	(popup_context_menu_cb), (button_press_event_cb),
	(configure_item_sensitivity), (configure_item_cursor),
	(configure_item_tooltip), (connect_widget_signals),
	(action_sensitive_cb), (create_item_from_action),
	(create_item_from_position), (toolbar_drag_data_received_cb),
	(toolbar_drag_drop_cb), (toolbar_drag_motion_cb),
	(toolbar_drag_leave_cb), (configure_drag_dest),
	(toggled_visibility_cb), (toolbar_visibility_refresh),
	(create_dock), (toolbar_changed_cb), (unparent_fixed),
	(update_fixed), (toolbar_added_cb), (toolbar_removed_cb),
	(item_added_cb), (item_removed_cb), (egg_editable_toolbar_build),
	(egg_editable_toolbar_set_model), (egg_editable_toolbar_init),
	(egg_editable_toolbar_dispose),
	(egg_editable_toolbar_set_ui_manager),
	(egg_editable_toolbar_get_selected),
	(egg_editable_toolbar_set_selected), (set_edit_mode),
	(egg_editable_toolbar_set_property),
	(egg_editable_toolbar_get_property),
	(egg_editable_toolbar_class_init), (egg_editable_toolbar_new),
	(egg_editable_toolbar_new_with_model),
	(egg_editable_toolbar_get_edit_mode),
	(egg_editable_toolbar_set_edit_mode),
	(egg_editable_toolbar_add_visibility), (egg_editable_toolbar_show),
	(egg_editable_toolbar_hide), (egg_editable_toolbar_set_fixed):
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbar-editor.c: (compare_items),
	(item_added_or_removed_cb), (toolbar_removed_cb),
	(egg_toolbar_editor_set_model), (egg_toolbar_editor_class_init),
	(egg_toolbar_editor_finalize), (drag_begin_cb), (drag_end_cb),
	(drag_data_get_cb), (set_drag_cursor), (editor_create_item),
	(editor_create_item_from_name), (append_table),
	(update_editor_sheet), (egg_toolbar_editor_init):
	* libegg/toolbareditor/egg-toolbar-editor.h:
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_to_xml), (egg_toolbars_model_save_toolbars),
	(is_unique), (toolbar_node_new), (item_node_new), (item_node_free),
	(toolbar_node_free), (egg_toolbars_model_get_flags),
	(egg_toolbars_model_set_flags), (egg_toolbars_model_get_data),
	(egg_toolbars_model_get_name), (impl_add_item),
	(egg_toolbars_model_add_item), (egg_toolbars_model_add_toolbar),
	(parse_data_list), (parse_item_list), (parse_toolbars),
	(egg_toolbars_model_load_toolbars), (parse_available_list),
	(parse_names), (egg_toolbars_model_load_names),
	(egg_toolbars_model_class_init), (egg_toolbars_model_init),
	(egg_toolbars_model_finalize), (egg_toolbars_model_remove_toolbar),
	(egg_toolbars_model_remove_item), (egg_toolbars_model_move_item),
	(egg_toolbars_model_delete_item), (egg_toolbars_model_n_items),
	(egg_toolbars_model_item_nth), (egg_toolbars_model_n_toolbars),
	(egg_toolbars_model_toolbar_nth), (egg_toolbars_model_get_types),
	(egg_toolbars_model_set_types), (fill_avail_array),
	(egg_toolbars_model_get_name_avail),
	(egg_toolbars_model_get_name_flags),
	(egg_toolbars_model_set_name_flags):
	* libegg/toolbareditor/egg-toolbars-model.h:
	* libegg/toolbareditor/eggmarshalers.list:
	* libegg/toolbareditor/eggtreemultidnd.c:
	(egg_tree_multi_drag_source_get_type),
	(egg_tree_multi_drag_source_row_draggable),
	(egg_tree_multi_drag_source_drag_data_delete),
	(egg_tree_multi_drag_source_drag_data_get), (stop_drag_check),
	(egg_tree_multi_drag_button_release_event), (selection_foreach),
	(path_list_free), (set_context_data), (get_context_data),
	(get_info), (egg_tree_multi_drag_drag_data_get),
	(egg_tree_multi_drag_motion_event),
	(egg_tree_multi_drag_button_press_event),
	(egg_tree_multi_drag_add_drag_support):
	* libegg/toolbareditor/eggtreemultidnd.h:
	* libegg/toolbareditor/test-toolbar-editor.c: (edit), (main):
	
	Sync with epiphany.

2006-05-07  Emmanuele Bassi  <ebassi@gmail.com>

	Finally deprecate EggRecent.  So long, and thanks for all the bugs.

	* libegg/recent-files/THIS_IS_DEPRECATED_USE_GTK_RECENT_CHOOSER:
	* libegg/recent-files/egg-recent-model.h: Deprecate the EggRecent
	code, now that GTK 2.9.0 is out; if you want to compile it, you
	must define EGG_ENABLE_RECENT_FILES before including
	egg-recent-model.h.

	* libegg/recentchooser/README: Add a notice about the RecentChooser
	code being included into GTK 2.9.0.

2006-05-04  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/bookmarkfile/README: Add a notice about the BookmarkFile
	code being included into GLib 2.11; the code in libegg stays for
	testing/profiling, as the profiling stuff has been removed for
	size constraints.

2006-03-22  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/bookmarkfile/eggbookmarkfile.c: Remove the Egg prefix from the
	private data structures and related function names in order to ease
	the merging. Remove the unused "dirty" flag. Remove a bunch of
	redundant checks.
	(egg_bookmark_file_load_from_file): Do not leak the file contents.
	(error_cb): Conditionally compile the function, so that it's easier
	to remove when merging.
	(egg_bookmark_file_init), (egg_bookmark_file_clear): Use g_new/g_free
	instead of g_slice_new/g_slice_free.

2006-03-22  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/recentchooser/eggrecentchooserdefault.c:
	(load_recent_items): exit from the idle function if no items are
	returned by the recent manager.
	(egg_recent_chooser_default_get_items): move up the request to the
	recent manager for the items, in order to return faster if no
	items are found.

2006-03-21  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/recentchooser/eggrecentmanager.c:
	(egg_recent_manager_add_full): fix a stupid typo that I did not commit
	last time.

2006-03-12  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/recentchooser/eggrecentmanager.c:
	(egg_recent_manager_add_full): fix a misuse of g_strv_length (thanks
	to Paolo Borelli for the fix).

	* libegg/recentchooser/test-recent-menu.c:
	(on_drag_data_received): ditto

2006-03-10  Emmanuele Bassi  <ebassi@gmail.com>

	Final change to the semantics of egg_bookmark_file_set_app_info():
	the function might fail only if you are trying to remove an application
	by forcing its registrarions count to zero - otherwise, it will act
	like the other setters, and silently create a new bookmark.

	* libegg/bookmarkfile/eggbookarkfile.c:
	(egg_bookmark_file_set_app_info): update the function's semantics.

2006-03-09  Emmanuele Bassi  <ebassi@gmail.com>

	Support root-level "title" and "desc" elements, as per XBEL 1.0
	specification; now, each bookmark file can have its own global title
	and description.

	* libegg/bookmarkfile/eggbookmarkfile.c:
	(egg_bookmark_file_init), (egg_bookmark_file_clear): add global title
	and description members to the EggBookmarkFile object
	(start_element_raw_cb), (end_element_raw_cb), (text_raw_cb): add
	support for global title and desc elements when parsing
	(egg_bookmark_file_dump): dump global title and desc elements
	(egg_bookmark_file_set_title), (egg_bookmark_file_get_title),
	(egg_bookmark_file_set_description),
	(egg_bookmark_file_get_description): if the passed URI is NULL, set/get
	the global title and description.

	* libegg/bookmarkfile/test-one.xbel:
	* libegg/bookmarkfile/test-file.xbel: add global title and description
	to the test files.

	* libegg/bookmarkfile/testbookmarkfile.c (main): print the global title
	and description, if found.

2006-03-09  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/recentchooser/eggrecentmanager.c:
	(egg_recent_manager_add_full): use g_strv_length() in order to iterate
	on the group names strings vector.

2006-03-09  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/bookmarkfile/eggbookmarkfile.c:
	(egg_bookmark_app_info_new): init the count to 0
	(egg_bookmark_metadata_new), (egg_bookmark_file_init): fix hash tables
	constructors with explicit NULL destructor functions
	(egg_bookmark_file_add_group): bail out on empty group name
	(egg_bookmark_file_add_application): add the item before setting
	the application meta-data, as egg_bookmark_file_set_app_info semantics
	have been changed
	(egg_bookmark_file_remove_application): wrap
	egg_bookmark_file_set_app_info now that it can remove items
	(egg_bookmark_file_set_app_info): change the function's semantics: now
	it works only on existing bookmarks, and can also remove applications
	by setting the registrations count to 0.

	* libegg/bookmarkfile/eggbookmarkfile.h: update the signature of
	egg_bookmark_file_set_app_info().

2006-03-08  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/recentchooser/eggrecentmanager.c
	(egg_recent_manager_add_full): use the new BookmarkFile API to
	merge group names and to register the application of a new
	recently used document.

	* libegg/recentchooser/.cvsignore: add missing test-recent-widget.

2006-03-08  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/bookmarkfile/eggbookmarkfile.h:
	* libegg/bookmarkfile/eggbookmarkfile.c
	(egg_bookmark_file_set_app_info): do not use an unsigned int if
	we can expect a negative value as an argument.

2006-03-08  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/bookmarkfile/bookmark-spec.dtd: add a simple DTD for
	the desktop bookmark specification.

2006-03-08  Emmanuele Bassi  <ebassi@gmail.com>

	* libegg/bookmarkfile/eggbookmarkfile.c:
	* libegg/bookmarkfile/eggbookmarkfile.h: add commodity functions for
	adding, removing and querying groups and applications.

	* libegg/bookmarkfile/eggbookmarkfile.h: remove error codes for
	LOCK and UNLOCK, since we don't use file locking anymore.

	* libegg/bookmarkfile/eggbookmarkfile.c: clean up code; add "Since"
	notices; update documentation and error messages.

Sat Mar  4 17:33:21 2006  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/testsequence.c (main): Implement tests for
	GET_POSITION/ITER_MOVE/ITER_GET_SEQUENCE/ITER_COMPARE/RANGE_GET_MIDPOINT

	* libegg/sequence/eggsequence.c: Remove unused struct
	EggSequenceTree,

	* libegg/sequence/eggsequence.c (egg_sequence_range_get_midpoint):
	Implement using positions instead of splaytree invariants.

2006-03-01  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchoosermenu.c
	(egg_recent_chooser_menu_map): reverse the list since we are walking it
	backwards.

2006-02-22  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooserdefault.c
	(append_uri_to_urilist), (recent_view_drag_data_get_cb): use the
	gtk_selection_data_set_uris() function instead of building our own
	uri list string.

	* libegg/recentchooser/test-recent-menu.c: add a drop target for
	testing drag and drop from the EggRecentChooserDialog.

2006-02-22  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentmanager.c: some code style clean ups;
	removed mention of the egg_recent_manager_get_uris() function from
	the API documentation.

2006-02-19  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	Re-sync with my development trunk.

	* configure.in: add check for the timegm() function.

	* libegg/bookmarkfile/eggbookmarkfile.c (mktime_utc): use the
	glibc function timegm() if present at compile time; update the
	documentation of the timestamp related functions and allow
	passing (time_t) -1 meaning "use current time"; remove the file locking
	functions and use g_file_set_contents() and g_file_get_contents():
	it'll be up to the caller to try and avoid concurrent accesses.

	* libegg/eggrecentchooser.h:
	* libegg/eggrecentchooser.c: remove the "show-numbers" property and
	its accessors.

	* libegg/eggrecentchooserutils.h:
	* libegg/eggrecentchooserutils.c: remove the "show-numbers" property.

	* libegg/recentchooser/eggrecentchooserdefault.c (reload_recent_items):
	do not reload the items if there's already a load operation in
	progress; enable tooltips and support the show-tips property; remove
	the support for the show-numbers property; use the document's own
	icon as the drag and drop icon; change the state of the context menu
	items according to the state of the recent documents list; select the
	item under the cursor before showing the context menu.

	* libegg/recentchooser/eggrecentchoosermenu.h:
	* libegg/recentchooser/eggrecentchoosermenu.c: add the menu-only
	show-numbers property and its accessors

	* libegg/recentchooser/eggrecentmanager.c: various fixes and clean ups:
	do not poll the storage file if another read or write is in progress,
	but wait for the next poll; use g_slice_new() to allocate the temporary
	EggRecentData in egg_recent_manager_add_item(); use g_strjoin() to
	create the default command line "prgname %u"; freeze notification of
	properties when updating the list.

	* libegg/recentchooser/eggrecentmanager.h: fix EggRecentData members
	and their documentation; pass a const EggRecentData to
	egg_recent_manager_add_full().

2006-02-18  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooser.c
	(egg_recent_chooser_class_init),
	(_egg_recent_chooser_selection_changed),
	(_egg_recent_chooser_item_activated): add private signal emitters.

	* libegg/recentchooser/eggrecentchooserdefault.c
	(selection_changed_cb), (row_activated_cb):
	* libegg/recentchooser/eggrecentchoosermenu.c (item_activate_cb):
	* libegg/recentchooser/eggrecentchooserutils.c
	(delegate_selection_changed), (delegate_item_activated): use the signal
	emitter functions instead of directly calling g_signal_emit().

	* libegg/recentchooser/populate-recent.c (show_usage), (main): add
	--help command line switch.

2006-01-31  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* libegg/print-operation/Makefile.am:
	* libegg/print-operation/eggpagesetup.[ch]: 
	* libegg/print-operation/eggpapersize.[ch]: 
	* libegg/print-operation/eggprint-win32.[ch]:
	* libegg/print-operation/eggprint.h:
	* libegg/print-operation/eggprintcontext-private.h:
	* libegg/print-operation/eggprintcontext.[ch]:
	* libegg/print-operation/eggprintenums.h:
	* libegg/print-operation/eggprintersettings.[ch]: 
	* libegg/print-operation/eggprintmarshal.list:
	* libegg/print-operation/eggprintoperation-private.h:
	* libegg/print-operation/eggprintoperation-win32.c:
	* libegg/print-operation/eggprintoperation.[ch]:
	* libegg/print-operation/paper_names.c:
	* libegg/print-operation/testprint.c:
	* libegg/print-operation/testprintfileoperation.c:
	* libegg/print-operation/testprintfileoperation.h:
	Import first version of EggPrintOperation

2006-01-24  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentmanager.c (egg_recent_info_free): do
	not leak the RecentInfo structure.

2006-01-24  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooserdefault.h
	* libegg/recentchooser/eggrecentchooserdefault.c: code fixes; use
	G_DEFINE_TYPE_WITH_CODE; avoid the eventual leakage of the items list,
	in case ::finalize is called before the list is fully loaded.

2006-01-23  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooser.c
	(egg_recent_chooser_get_uris):
	* libegg/recentchooser/eggrecentmanager.c
	(egg_recent_manager_add_full), (recent_app_info_new),
	(egg_recent_info_get_applications), (egg_recent_info_get_groups): remove
	the unnecessary cast after g_new0.

2006-01-23  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/eggbookmarkfile.c (egg_bookmark_file_get_uris),
	(egg_bookmark_file_get_groups), (egg_bookmark_file_get_applications):
	remove the unnecessary cast after g_new0.

2006-01-21  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/eggsequence.c (egg_sequence_set): Handle
	setting of the same pointer.

	* libegg/sequence/testsequence.c (main): Implement tests for
	SEARCH_ITER/SEARCH/GET/SET/ITER_IS_BEGIN/ITER_IS_END/ITER_NEXT/ITER_PREV

2006-01-21  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-gtk.c
	(egg_recent_view_gtk_add_menu): check whether we've got a menu item
	or not, before actually using it.

2006-01-20  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/README: update outline and FAQ.
	
	* libegg/recentchooser/TODO: update.

2006-01-20  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooserdialog.h:
	* libegg/recentchooser/eggrecentchooserdialog.c: update documentation.

	* libegg/recentchooser/eggrecentchooserwidget.h:
	* libegg/recentchooser/eggrecentchooserwidget.c: ditto.

2006-01-20  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooser.h:
	* libegg/recentchooser/eggrecentchooser.c
	(egg_recent_chooser_set_sort_func),
	(egg_recent_chooser_set_sort_type): move the custom sorting function
	here from RecentManager; now, all the operations concerning the
	visualization of the recently used resources list are domain of the
	RecentChooser interface.

	* libegg/recentchooser/eggrecentchooserutils.c
	(delegate_set_sort_func),
	(egg_recent_chooser_delegate_iface_init): add a delegate proxy for the
	egg_recent_chooser_set_sort_func method.

	* libegg/recentchooser/eggrecentchooserdefault.h:
	* libegg/recentchooser/eggrecentchooserdefault.c: implement the
	custom sorting from RecentChooser interface; code clean ups; mark
	the user visible strings as translatable; add support for the new
	group filter.

	* libegg/recentchooser/eggrecentchoosermenu.c: ditto.

2006-01-20  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentfilter.h:
	* libegg/recentchooser/eggrecentfilter.c (egg_recent_filter_get_type),
	(egg_recent_filter_class_init), (egg_recent_filter_finalize),
	(egg_recent_filter_init), (egg_recent_filter_add_group),
	(egg_recent_filter_filter): update documentation; use G_DEFINE_TYPE
	macro and clean up the code; add a filter for the group names.

2006-01-20  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	D libegg/recentchooser/test-manager.c
	D libegg/recentchooser/test-viewer.c

	* libegg/recentchooser/test-manager.c:
	* libegg/recentchooser/test-viewer.c: remove obsolete tests.

	* libegg/recentchooser/populate-recent.c:
	* libegg/recentchooser/test-recent-menuc.:
	* libegg/recentchooser/test-recent-widget.c: update tests.

	* libegg/recentchooser/Makefile.am (noinst_PROGRAMS): remove
	test-manager.c and test-viewer.c.

2006-01-20  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentmanager.h:
	* libegg/recentchooser/eggrecentmanager.c: code cleanups; documentation
	fixes; mark strings as translatable; remove the filtering and sorting
	stuff from the RecentManager object.  The RecentManager should only
	manage the list, and sorting/filtering affects the visualization
	of the list; since it returns a GList, you can implement sorting
	and/or filtering using the GList API with the same effects.

2006-01-19  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/eggbookmarkfile.h: remove the
	EGG_BOOKMARK_FILE_INVALID_MIME and EGG_BOOKMARK_FILE_INVALID_LAUNCHER
	error codes.

	* libegg/bookmarkfile/eggbookmarkfile.c: use the new g_slice slab
	allocator; do some code clean-ups; review documentation for consistency
	and correctness.

	* libegg/bookmarkfile/testbookmarkfile.c: update the message printed
	in case of parse error.

2005-12-31  Vincent Untz  <vuntz@gnome.org>

	Make code more solid and fix icons not visible. Code was updated from
	the xfce fork of this code.
	Fix bug #108864 and probably some other bugs...

	* libegg/tray/eggtraymanager.c: use gi18n.h
	(egg_tray_manager_init): init more variables
	(egg_tray_manager_finalize): free more stuff
	(egg_tray_manager_handle_dock_request): don't handle notifications we
	already got, do a size request for the socket so that it has the
	correct size
	(egg_tray_manager_check_running_xscreen): fix test

2005-12-31  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-uimanager.c: remove spurious
	gtk-doc markers (closes bug #307960).

2005-12-22  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-model.c (egg_recent_model_lock_file),
	(egg_recent_model_unlock_file): check against HAVE_LOCKF for using
	lockf() (closes bug #324710).

	* libegg/recent-files/egg-recent-model.c: fix compilation for Darwin,
	where lockf() isn't exported (closes bug #124238, was never applied).

2005-12-21  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/eggbookmarkfile.c (timestamp_from_iso8601): fix
	another bug in the iso8601 date conversion for the YYYYMMDD format.

2005-12-21  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/eggbookmarkfile.c (timestamp_from_iso8601): fix a
	bug in the iso8601 date conversion for the YYYYMMDD format.

	* libegg/bookmarkfile/eggbookmarkfile.c (timestamp_to_iso8601): use the
	YYYY-MM-DD format for storing iso8601 dates; date stamps in the older
	format will automagically be converted.

2005-12-18  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentmanager.c
	(egg_recent_manager_add_item), (egg_recent_manager_add_full),
	(build_recent_info), (egg_recent_info_new), (egg_recent_info_free),
	(egg_recent_info_get_groups), (egg_recent_info_has_group): add support
	for groups into the RecentInfo object.

	* libegg/recentchooser/eggrecentmanager.h: add
	egg_recent_manager_get_groups() and egg_recent_manager_has_group();
	mark the string elements of the RecentData structure constant.

2005-12-18  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* README: add the bookmark:icon element to the elements list.

	* libegg/bookmarkfile/eggbookmarkfile.c: add support for the icon
	element; as the spec, the icon enables user-defined icons for
	bookmarks.

	* libegg/bookmarkfile/eggbookmarkfile.h: add
	egg_bookmark_file_set_icon() and egg_bookmark_file_get_icon(); fix
	signature for egg_bookmark_file_set_groups().

2005-12-18  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/bookmark-spec.xml: added the desktop bookmark
	specification draft (release 0.8.2).

Wed Dec 14 01:33:27 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/testsequence.c (main): Implement test for MOVE_RANGE

Sun Dec 11 03:00:19 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/eggsequence.c (node_free): splay node to make
	sure we free all of the sequence.

	* libegg/sequence/eggsequence.c (egg_sequence_move_range): Only
	check access if @dest != NULL.

	* libegg/sequence/testsequence.c: Implement test for remove_range.

Sat Dec 10 20:55:59 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/testsequence.c (main): More tests

	* libegg/sequence/eggsequence.c: Formatting fixes

Sat Dec 10 17:48:53 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/testsequence.c (main): Implement MOVE case

	* libegg/sequence/eggsequence.c (egg_sequence_move): Handle the
	case where the iters are the same.

Sat Dec 10 03:25:05 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/eggsequence.c: Various formatting fixes

	* libegg/sequence/eggsequence.c (node_find_closest): Simplify
	logic a little

	* libegg/sequence/testsequence.c: Add more checks.

	* libegg/sequence/eggsequence.c (iter_compare): Call compare
	function with the data, not the iters

Sat Dec 10 00:38:14 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/testsequence.c (get_random_range): Make sure the
	values passed to g_random_int_range() are different.

	* libegg/sequence/eggsequence.c (node_free): Pass in a sequence
	instead of a destroy notify

	* libegg/sequence/eggsequence.c (egg_sequence_new): Store the
	sequnce in end_node->data rather than end_node->right.

	* libegg/sequence/eggsequence.c (is_end): New function that
	compares the iter to seq->end_node

	* libegg/sequence/eggsequence.c (struct _EggSequenceNode):
	Delete is_end field

Tue Dec  6 02:26:24 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/Makefile.am (noinst_PROGRAMS): Remove
	accidentally added testsequence-random.c program.

Tue Dec  6 02:24:45 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/testsequence.c: Add beginning of a test program
	for the sequence.

	* libegg/sequence/eggsequence.[ch]: various fixes. Implement
	egg_sequence_foreach_range()

Tue Dec  6 00:49:52 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/eggsequence.c: Fix various stylistic
	issues. Check that the application doesn't access the sequence out
	of sort functions.

Fri Dec  2 01:42:15 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/eggsequence.c: Implement _iter() versions of
	various methods.

2005-12-03  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooser.c,
	libegg/recentchooser/eggrecentchoosermenu.c: fix various leaks

	* libegg/recentchooser/eggrecentchooserdialog.c: really, *really* fix
	the double-free bug.

	* libegg/recentchooser/eggrecentmanager.c
	(egg_recent_manager_get_items): do not hold an unnecessary
	reference on the RecentInfo items before returning them.

	* libegg/recentchooser/test-recent-menu.c: unref the RecentInfo object.

2005-12-03  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/eggbookmarkfile.c (egg_bookmark_item_dump): do
	not leak the timestamp strings.

2005-12-03  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	Plug memory leaks.

	* libegg/recentchooser/eggrecentmanager.c (build_recent_info): do not
	leak the app_exec string, now that egg_bookmark_file_get_app_info()
	returns an allocated copy.

	* libegg/recentchooser/eggrecentmanager.c
	(egg_recent_manager_get_items): do not leak the uris vector.

	* libegg/recentchooser/eggrecentmanager.c
	(egg_recent_info_get_uri_display): do not leak the filename.

2005-12-02  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-model.c (egg_recent_model_filter):
	remove g_list_first(), a left-over from the leakage test.

2005-12-02  Emmanuele Bassi  <ebassi@cvs.gnome.org>
	
	* libegg/recent-files/egg-recent-model.c (parse_info_init),
	(parse_info_new), (end_element_handler): make ParseInfo a dynamically
	allocated struct instead of passing pointers around.

	* libegg/recent-files/egg-recent-model.c (egg_recent_model_filter):
	plug the leakage of the unfiltered item list, and clean up the code a
	bit (fixes bug #323002, based on a patch by Paolo Borelli).

2005-11-30  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/README: remove mention of libxml2.

	* libegg/eggrecentchooserdialog.c
	  libegg/eggrecentchoosermenu.c
	  libegg/eggrecentchooserwidget.c: use G_DEFINE_TYPE_WITH_CODE.
	
	* libegg/recentchooser/test-recent-menu.c (on_item_activated): show
	more application's info when activating the item.

2005-11-30  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/eggbookmarkfile.c: brown paper bag fixes

2005-11-30  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	Fixes after the API review.

	* libegg/bookmarkfile/eggbookmarkfile.c (egg_bookmark_file_fd_lock),
	(egg_bookmark_file_fd_unlock): use this functions only on UNIX-like
	operating systems.

	* libegg/bookmarkfile/eggbookmarkfile.c (timestamp_from_iso8601):
	replace my old code with the more effective code from libsoup (thanks
	to James Henstridge).

	* libegg/bookmarkfile/eggbookmarkfile.c (expand_exec_line),
	(egg_bookmark_file_get_app_info): expand the command line using the
	%f and %u escape characters defined by the specification.

	* libegg/bookmarkfile/eggbookmarkfile.c: expand API documentation and
	close the remaining FIXMEs.

2005-11-30  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggdesktopbookmarks.[ch]: remove the old,
	libxml-based parser object; the new parser object lives in
	libegg/bookmarkfile.

2005-11-30  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	Another round of fixes after API review.

	* libegg/eggrecentchooser.h, libegg/eggrecentchooserprivate.h: export
	the EggRecentChooserIface struct, since we need the signals
	declaration.

	* libegg/eggrecentmanager.c (egg_recent_manager_real_changed),
	(egg_recent_info_get_private_hint): remove (boolean == TRUE) code.

	* libegg/eggrecentchooserdialog.c
	(egg_recent_chooser_item_activated_cb): fix dumb double-free.

	* libegg/eggrecentchoosermenu.c (egg_recent_chooser_menu_get_property),
	(egg_recent_chooser_menu_set_show_tips):
	remove (boolean == TRUE) code.

2005-11-28  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-model.c (egg_recent_model_read),
	(end_element_handler): fix a couple of leaks, and make the parser spew
	out more informations in case of parser error; also, make the code a
	little bit more robust - this should hopefully fix the case of
	badly-formed XML inside .recently-used making the panel crash (see
	bug #172587).

	* libegg/recent-files/gtk-view-test.c (tooltips_cb): avoid leaking the
	tooltip text.

2005-11-27  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-gtk.c
	(egg_recent_view_gtk_clear): plug the leakage of the GList containing
	the children of the menu (fixes bug #322588).

2005-11-19  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	Another round of code clean up.

	* libegg/bookmarkfile/eggbookmarkfile.c: remove the inner copy
	functions, since they weren't used; enabled i18n; reverse walk the
	lists of groups and applications in egg_bookmark_file_get_uris() and
	egg_bookmark_file_get_applications(), as we build them with
	g_list_prepend() for better timings; enhance consistency checks; add an
	important caveat to the map_namespace_to_name() function; mark some
	more code path as unlikely; rewrite the egg_bookmark_file_move_item()
	function: now it flows better.

	* libegg/bookmarkfile/testbookmarkfile.c: remove the hard-coded test
	source file, and use the first argument as source file instead.

	* libegg/bookmarkfile/test-one.xbel: single bookmark file, useful for
	testing with sysprof.

	* libegg/bookmarkfile/Makefile.am: add test-one.xbel and move out the
	CFLAGS sections.

2005-10-27  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooserdefault.c,
	libegg/recentchooser/eggrecentchoosermenu.c,
	libegg/recentchooser/eggrecentmanager.c: remove some g_return_* macros,
	and check the internal consistency using g_assert(); also, remove some
	unlikely branches.

2005-10-27  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/eggbookmarkfile.c:
	(do_profile_start), (do_profile_end), (do_profile_vprintf): change the
	profiling code to be a little bit cleaner
	* libegg/bookmarkfile/eggbookmarkfile.c: mark some checks as
	unlikely to happen in order to let GCC optimize them out; remove some
	g_return_* calls from static functions; add some assertions to check
	for internal consistency.

2005-10-27  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/eggbookmarkfile.c: use g_list_prepend() instead
	of _append(), since we don't care about the order of the list, and the
	profiling runs show a slight (~5%) benefit from the switch.

2005-10-27  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchoosermenu.c: "brown paper bag" fix
	for the filtering logic.

2005-10-27  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentchooser.c,
	libegg/recentchooser/eggrecentchooser.h,
	libegg/recentchooser/eggrecentchooserutils.c,
	libegg/recentchooser/eggrecentchooserutils.h: add the "local-only"
	property to the RecentChooser GInterface; this property is similar to
	the "local-only" property of the GtkFileChooser GInterface, and should
	be used in implementations which can guarantee just the local
	resources (using the file:// URI schema).
	* libegg/recentchooser/eggrecentchooserdefault.c,
	libegg/recentchooser/eggrecentchoosermenu.c: implement the "local-only"
	property.
	* libegg/recentchooser/eggrecentchooserdefault.c: change the minimum
	widget height to 9 rows, and calculate the right height, this time.
	* libegg/recentchooser/eggrecentchoosermenu.c:
	(get_icon_theme_for_widget), (egg_recent_chooser_menu_map): code
	cleanups.
	* libegg/recentchooser/test-recent-widget.c: review the layout, and
	show that we are indeed using the same instance of the recent manager
	object.

2005-10-25  Emmanuele Bassi  <ebassi@cvs.gnome.org>
	
	* libegg/recentchooser/xdgmime: added xdgmime library, in order
	to use the shared MIME info database and simplify the API of the
	RecentManager.
	* libegg/recentchooser/Makefile.am: update build
	* libegg/recentchooser/libegg/eggrecentchooserutils.c,
	libegg/recentchooser/libegg/eggrecentchooserutils.h,
	libegg/recentchooser/eggrecentchooser.c,
	libegg/recentchooser/eggrecentchooser.h:
	(egg_recent_chooser_class_init), (egg_recent_chooser_get_show_private),
	(egg_recent_chooser_set_show_not_found),
	(egg_recent_chooser_get_show_not_found),
	(egg_recent_chooser_set_show_icons),
	(egg_recent_chooser_get_show_icons): add "show-icons" as a property,
	and document some more functions.
	* libegg/recentchooser/eggrecentchooserdefault.c:
	(egg_recent_chooser_default_set_property),
	(egg_recent_chooser_default_get_property): add support for the
	"show-icons" property.
	* libegg/recentchooser/eggrecentchoosermenu.c:
	(egg_recent_chooser_menu_set_property),
	(egg_recent_chooser_menu_get_property),
	(egg_recent_chooser_menu_create_item), (get_icon_theme_for_widget),
	(get_icon_size_for_widget): add support for the "show-icons" property,
	and enhance code for icon sizing.
	* libegg/recentchooser/eggrecentfilter.c: use the newly added xdgmime
	code for retrieving the correct MIME type for a comparison, and leave
	the dumb comparison for non-UNIX architectures.
	* libegg/recentchooser/eggrecentmanager.h,
	libegg/recentchooser/eggrecentmanager.c:
	(build_recent_items_list): don't leak the GError
	(egg_recent_manager_add_item): add a simplier API for adding an item,
	by retrieving most of the meta-data by ourselves; this is *not* a magic
	bullet, but should save time/code for the common case.
	* libegg/recentchooser/populate-recent.c: use the newly added API for
	adding an item.

2005-10-22  Bastien Nocera  <hadess@hadess.net>

	* autogen.sh: replace with gnome-autogen.sh, to allow building with
	recent versions of the autotools
	* libegg/recent-files/egg-recent-util.c:
	(egg_recent_util_get_icon): put gnome-icon functions between ifdef's
	like in the other sources

2005-10-01  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentmanager.h: remove the
	egg_recent_manager_changed() signal emitter.

2005-10-01  Emmanuele Bassi  <ebassi@cvs.gnome.org>
	
	Changes after API review.
	
	* libegg/recentchooser/TODO: update

	* libegg/recentchooser/eggrecentmanager.c: code clean-ups; add a "size"
	property (read-only) containing the size of the recently used resources
	list; correctely chain up the GObject::finalize method; use g_stat() in
	place of stat() where possible; review list clamping code; sync with
	the BookmarkFile API change.

	* libegg/recentchooser/eggrecentchooser.h,
	libegg/recentchooser/eggrecentchooser.c,
	libegg/recentchooser/eggrecentchooserdefault.c,
	libegg/recentchooser/eggrecentchoosermenu.h,
	libegg/recentchooser/eggrecentchoosermenu.c,
	libegg/recentchooser/eggrecentchooserutils.h,
	libegg/recentchooser/eggrecentchooserutils.c: move the "show-numbers"
	and "show-tips" properties from RecentChooserMenu to the RecentChooser
	interface.

	* libegg/recentchooser/eggrecentchooserdefault.c: code clean-ups;
	create a "Clear List" item inside the popup menu; review the list
	clamping code; remove the drag and drop destination code: applications
	will have to add their own code.

	* libegg/recentchooser/eggrecentchoosermenu.c: code clean-ups; review
	the list clamping code.

	* libegg/recentchooser/test-recent-menu.c,
	libegg/recentchooser/test-recent-widget.c: update tests.

	* libegg/bookmarkfile/eggbookmarkfile.h,
	libegg/bookmarkfile/eggbookmarrkfile.c: rename
	egg_bookmark_file_get_count() to egg_bookmarkfile_get_size().

	* libegg/bookmarkfile/eggbookmarkfile.c:
	(do_profile_start), (do_profile_end), (do_profile_printf),
	(parse_mime_type_element), (map_namespace_to_name), (is_element_full),
	(start_element_raw_cb), (end_element_raw_cb),
	(egg_bookmark_file_load_from_data): code clean-ups.

2005-09-17  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* ChangeLog: fix date typo

	* libegg/recentchooser/eggrecentchooserdefault.c:
	(set_recent_manager): hold a reference on the manager, if it's passed
	to us.

	* libegg/recentchooser/eggrecentchoosermenu.c:
	(set_recent_manager): ditto.

	* libegg/recentchooser/test-recent-widget.c: create two instances of
	the RecentChooserWidget bound to the same RecentManager object.

2005-09-16  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/Makefile.am: remove profiling flag

	* libegg/bookmarkfile/eggbookmarkfile.c:
	(do_profile_start), (do_profile_end), (parse_bookmark_element),
	(parse_application_element), (parse_mime_type_element): profile code
	updates.

	* libegg/bookmarkfile/eggbookmarkfile.c:
	(map_namespace_to_name), (is_element_full): fixes checks and add
	comments.

	* libegg/recentchooser/Makefile.am: remove EGG_XML_* vars: we don't
	depend on libxml anymore.

2005-09-16  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/Makefile.am,
	libegg/recentchooser/eggrecentmanager.c: Use EggBookmarkFile instead of
	EggDesktopBookmark for reading/writing recent resources.

	* libegg/recentchooser/eggrecentchooserdefault.c:
	(sort_recent_items_mru), (sort_recent_items_lru),
	(egg_recent_chooser_default_get_items), (copy_activated_cb),
	(recent_view_menu_build): remove RecentManager sorting and limits from
	RecentChooserDefault; items sort and limit is done directely into the
	RecentChooser implementations in order to have multiple views from a
	single RecentManager.

	* libegg/recentchooser/eggrecentchoosermenu.c: remove RecentManager
	sorting and limits from RecentChooserMenu as well.

	* libegg/recentchooser/test-recent-menu.c: make the menu default to 4
	items.

2005-09-15  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/bookmarkfile/Makefile.am,
	libegg/bookmarkfile/eggbookmarkfile.h,
	libegg/bookmarkfile/eggbookmarkfile.c,
	libegg/bookmarkfile/testbookmarkfile.c,
	libegg/bookmarkfile/test-file.xbel,
	libegg/bookmarkfile/README: EggBookmarkFile, GMarkup parser for
	desktop bookmark files stored using XBEL.

	* configure.in, libegg/Makefile.am: build glue for EggBookmarkFile

2005-08-31  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	apply patch from Moritz Barsnick <moritz@barsnick.net> 
	to fix grammar errors.

	* libegg/desktopentries/THIS_IS_DEPRECATE_USE_G_KEY_FILE:
	new file to make it clear that this landed in glib (2.6)
	and shouldn't really be used anymore.

2005-08-22  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_init), (egg_recent_model_poll_timeout),
	(egg_recent_model_finalize), (egg_recent_model_monitor): If FAM
	support is unavailable, manually poll the .recently-used file (patch
	by Dinoop Thomas, fixes bug #140153).

	* libegg/recent-files/egg-recent-model.c: fixes compilation on Darwin
	where lockf() isn't exported (patch by Jerry Talkington, fixes
	bug #124238).

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_clear): if FAM is not available, force update of the
	list when removing an item (patch by Mark McLoughlin, fixes
	bug #308779).

	* libegg/recent-files/egg-recent.h: added header guards; this is a
	convenience header, so you should not use it anyway (fixes
	bug #108101).

2005-08-21  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-uimanager.c:
	(egg_recent_view_uimanager_set_list): use
	egg_recent_item_get_short_name() to get the file's basename (fixes
	bug #312475).

2005-08-21  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list),
	(egg_recent_view_bonobo_set_empty_list), (model_changed_cb),
	(egg_recent_view_bonobo_finalize), (theme_changed_cb),
	(egg_recent_view_bonobo_init): if the list is empty, show a dummy menu
	item; also, remove every trace of GnomeIconTheme and use GtkIconTheme
	instead.

	* libegg/recent-files/egg-recent-view-uimanager.c:
	(egg_recent_view_uimanager_set_list),
	(egg_recent_view_uimanager_set_empty_list), (model_changed_cb): if the
	list is empty, show a dummy menu item; mark strings as translatable;
	add a default tooltip if none was provided by the tooltip_func.

2005-08-21  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_create_tooltip),
	(egg_recent_view_gtk_set_empty_list): mark strings as translatable, and
	import i18n macros only when compiling outside libegg.

2005-08-18  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_separator),
	(egg_recent_view_gtk_set_empty_list),
	(egg_recent_view_gtk_new_menu_item): "brown paper bag" fixes.

2005-08-18  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_set_item_tag),
	(egg_recent_view_gtk_set_empty_list), (model_changed_cb): if the menu
	is not embedded, add a dummy item to show it (based on patch from
	jorn@openedhand.com (Jorn Baayen), fixes bug #129195).

2005-08-18  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggdesktopbookmarks.c:
	(egg_desktop_bookmark_load_from_file): enable locking also when reading
	the file, and truncate the file to avoid garbage when removing an item.
	I should really use g_file_get_contents()/g_file_set_contents() from
	GLib 2.8.0 instead on relying on file locking.

	* libegg/recentchooser/eggrecentchooserdefault.c:
	(error_message_with_parent), (get_toplevel), (error_message): added the
	error message dialog (taken from GtkFileChooserDefault).

	* libegg/recentchooser/eggrecentchooserdefault.c:
	(remove_selected_from_list): enable the removal of a single item from
	the context menu.

2005-08-18  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	Some major changes in the RecentChooser code.

	* libegg/recentchooser/eggrecentchooserdefault.[ch],
	libegg/recentchooser/eggrecentchooserdialog.[ch],
	libegg/recentchooser/eggrecentchooserutils.[ch],
	libegg/recentchooser/eggrecentchooserwidget.[ch],
	libegg/recentchooser/test-recent-widget.c,
	libegg/recentchooser/Makefile.am: implement
	EggRecentChooserWidget and a dialog holding it; also, changed some of
	the EggRecentChooser API and structure, in order to make the new
	widgets useful.

	* libegg/recentchooser/README, libegg/recentchooser/TODO: update with
	latest changes.

	* libegg/recentchooser/eggdesktopbookmars.[ch]:
	(egg_desktop_bookmark_get_count), (egg_desktop_bookmark_move_item): add
	API for getting the number of items that the EggDesktopBookmark object
	is holding, and for changing the URI of an item.

	* libegg/recentchooser/eggrecentmanager.[ch]: implement the purge
	function; change the enum name for the sorting type and add API for
	changing an item's URI.  Also, add API for getting the short name of a
	URI (used also if not display_name was found).

	* libegg/recentchooser/test-recent-menu.c: use the newly added
	EggRecentChooserDialog to show the whole document history.

	* libegg/recentchooser/eggrecentfilter.[ch]: add a custom function for
	filtering a RecentInfo object.

2005-08-16  Mark McLoughlin  <mark@skynet.ie>

	Fix recent file list not being updated when using inotify.
	Patch from John McCutchan <ttb@tentacle.dhs.org> in
	bug #313520


	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_monitor_cb): handle CREATED events the
	same way as we handled CHANGED events.

2005-08-03  Paolo Maggi  <paolo@gnome.org>

	* libegg/recent-files/egg-recent-item.c
	(get_uri_shortname_for_display): new function 
	(egg_recent_item_get_short_name): uses the same code used by 
	nautilus and gedit for displaying short names and works better than 
	the old one for non-utf8 file names. At the same time it increases 
	consistency among gnome apps.

	* libegg/recent-files/egg-recent-view-bonobo.c: removed old unused code
	(str_end_truncate): new function
	(egg_recent_view_bonobo_set_list): ellipsize the label of the menu items
	using the new str_end_truncate function
	(egg_recent_view_bonobo_set_property): added new "label_width" property
	(egg_recent_view_bonobo_get_property): ditto
	(egg_recent_view_bonobo_class_init): ditto 
	(egg_recent_view_bonobo_init): ditto
	(egg_recent_view_bonobo_set_label_width): ditto
	(egg_recent_view_bonobo_get_label_width): ditto

	* libegg/recent-files/egg-recent-view-bonobo.h: added accessors for the
	bew "label_width" property

2005-07-25  Emmanuele Bassi <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggrecentfilter.h,
	libegg/recentchooser/eggrecentfilter.c,
	libegg/recentchooser/eggrecentchoosermenu.c,
	libegg/recentchooser/test-recent-menu.c:
	
	Enable filter on application name.

	* libegg/recentchooser/eggrecentchoosermenu.c:
	(egg_recent_chooser_menu_map):

	Skip non existing items when building the menu.

2005-07-22  Emmanuele Bassi <ebassi@cvs.gnome.org>

	* libegg/recentchooser/eggdesktopbookmarks.c:
	(egg_bookmark_item_new), (get_datetime_attribute),
	(egg_desktop_bookmark_parse_item), (egg_desktop_bookmark_add_item):

	Don't mask the "modified" timestamp when adding a parsed item, and
	clean up the code while we're at it.

	* libegg/recentchooser/eggdesktopbookmarks.c:
	(egg_desktop_bookmark_get_added), (egg_desktop_bookmark_get_modified),
	(egg_desktop_bookmark_get_visited):

	Return an invalid timestamp on error.

	* libegg/recentchooser/eggrecentchoosermenu.c:
	(egg_recent_chooser_menu_add_filter),
	(egg_recent_chooser_menu_remove_filter),
	(egg_recent_chooser_menu_list_filters):

	Disable these functions: a menu does not support multiple filters.

	* libegg/recentchooser/eggrecentchoosermenu.c:
	(get_is_recent_filtered):

	Enable default filtering on the item's URI and MIME type, and implement
	filtering on the application's name and the item's age.

	* libegg/recentchooser/eggrecentchoosermenu.c:
	(egg_recent_chooser_menu_map):

	Build the placeholder menu item when no items were found, or all
	items were filtered.

	* libegg/recentchooser/eggrecentchoosermenu.c:
	(egg_recent_chooser_menu_new):

	Don't cast g_object_new() returned gpointer into a GtkWidget.

	* libegg/recentchooser/eggrecentmanager.c:
	(egg_recent_manager_poll_timeout), (build_recent_items_list):

	Create the storage file only when needed for writing.

	* libegg/recentchooser/eggrecentmanager.c:

	Document the RecentManager and RecentInfo missing functions.
	

2005-07-20  Emmanuele Bassi <ebassi@cvs.gnome.org>

	* libegg/recentchooser/Makefile.am,
	  libegg/recentchooser/.cvsignore,
	  libegg/recentchooser/eggdesktopbookmarks.[c,h],
	  libegg/recentchooser/eggrecentchooser.[c,h],
	  libegg/recentchooser/eggrecentchoosermenu.[c,h],
	  libegg/recentchooser/eggrecentchooserprivate.h,
	  libegg/recentchooser/eggrecentfilter.[c,h],
	  libegg/recentchooser/eggrecent.h,
	  libegg/recentchooser/eggrecentmanager.[c,h],
	  libegg/recentchooser/populate-recent.c,
	  libegg/recentchooser/test-manager.c,
	  libegg/recentchooser/test-viewer.c,
	  libegg/recentchooser/test-recent-menu.c,
	  libegg/recentchooser/test-recent-menu.glade,
	  libegg/recentchooser/TODO,
	  libegg/recentchooser/README,
	  libegg/recentchooser/recently-used.xbel: Replacement for the recently
	used resources list management and visualization.  It's not entirely
	finished (lacks list purging, and the menu has some rough edges), but
	it's getting there.

	* configure.in, libegg/libegg/Makefile.am: Integrate the RecentChooser
	code into the build.

2005-07-20  Emmanuele Bassi <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_open_file), (egg_recent_model_add_full),
	(egg_recent_model_delete), (egg_recent_model_get_list),
	(egg_recent_model_clear), (egg_recent_model_remove_expired):

	If the .recently-used file is missing, create it only when accessing it
	for writing (Closes bug #310721).

2005-07-11  Emmanuele Bassi <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_create_tooltip), (egg_recent_view_gtk_add_item):

	Create a tooltip if no tooltip_func has been supplied (Closes
	bug #111988).

2005-07-07  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(new_pixbuf_from_widget), (new_separator_pixbuf):

	Don't leak windows.

2005-07-05  Emmanuele Bassi <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(text_handler):

	Don't assume that the text payload is always nul-terminated (Closes bug
	#162122).

2005-07-02  Emmanuele Bassi <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(valid_element), (start_element_handler), (end_element_handler):

	Don't assume that we are always going to parse valid GMarkup (Closes
	bug #165231).

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_finalize), (egg_recent_view_gtk_clear):

	Dispose the menu children earlier in the finalize call.

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_add_to_menu):

	Call the tooltip_func only on menu children bound to a RecentItem,
	since it does not make sense to have it called on separator items.

2005-06-21  Emmanuele Bassi <ebassi@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_finalize), (egg_recent_view_gtk_class_init):

	Chain up parent class' finalize method (Closes bug #155220).

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_finalize), (egg_recent_model_class_init):

	Chain up parent class' finalize method (Closes bug #155221).

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_clear_mime_filter),
	(egg_recent_model_clear_group_filter),
	(egg_recent_model_clear_scheme_filter),
	(egg_recent_model_set_property),
	(egg_recent_model_set_filter_mime_types),
	(egg_recent_model_set_filter_groups),
	(egg_recent_model_set_filter_uri_schemes):

	Plug a leak when setting the filter properties of the model (Closes bug
	#165506).

	* libegg/recent-files/egg-recent-view-uimanager.c:
	(connect_proxy_cb), (egg_recent_view_uimanager_setlist),
	(egg_recent_view_uimanager_set_property),
	(egg_recent_view_uimanager_get_property),
	(egg_recent_view_uimanager_class_init),
	(egg_recent_view_uimanager_init),
	(egg_recent_view_uimanager_set_label_width),
	(egg_recent_view_uimanager_get_label_width):
	* libegg/recent-files/egg-recent-view-uimanager.h:

	Add a property for label width (ellipsize when it's bigger
	than that).  Closes bug #307796.

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_finalize):

	Plug a leak when finalizing the menu widget (closes bug #308291).

	* libegg/recent-files/egg-recent-util.c:
	(egg_recent_util_get_icon):
	* libegg/recent-files/egg-recent-util.h:
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_finalize), (show_menus_changed_cb),
	(theme_changed_cb), (egg_recent_view_gtk_init):

	Make egg_recent_util_get_icon use a GtkIconTheme instead of the
	deprecated GnomeIconTheme (closes bug #159609).

2005-06-18  Marco Pesenti Gritti <mpg@redhat.com>
	    Emmanuele Bassi <emmanuele@emmanuelebassi.net>

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_menu_item),
	(egg_recent_view_gtk_set_property),
	(egg_recent_view_gtk_get_property),
	(egg_recent_view_gtk_class_init), (egg_recent_view_gtk_init),
	(egg_recent_view_gtk_set_tooltip_func),
	(egg_recent_view_gtk_set_label_width),
	(egg_recent_view_gtk_get_label_width):
	* libegg/recent-files/egg-recent-view-gtk.h:

	Add a property for label width (ellipsize when it's bigger
	than that).

2005-06-15  Tor Lillqvist  <tml@novell.com>

	Make libegg build on Win32. Not really much tested or anything.

	* configure.in: Check for Win32. Check GTK+ target. Define
	autoconf substitution NO_UNDEFINED and automake conditional
	HAVE_GTK_TARGET_X11.

	* libegg/Makefile.am: Build background-monitor only for X11.

	* libegg/datetime/egg-datetime.c (gmtime_r, localtime_r)
	* libegg/thumbnailpreview/eggthumbnailpreview.c (gmtime_r)
	Implement for Win32, where gmtime() and localtime() are
	thread-safe.

	* libegg/dock/Makefile.am: Use NO_UNDEFINED.

	* libegg/dock/egg-dock.c
	* libegg/treeviewutils/egg-cell-renderer-text.c
	* libegg/treeviewutils/eggcellrendererpopup.c: Remove unnecessary
	inclusion of gdkx.h.

	* libegg/dock/*
	* libegg/tray/*
	* libegg/treeviewutils/eggaccelerators.c: Bypass X11 code unless
	building for X11. No corresponding Win32 code yet, I'm, only
	making this compile for now. Win32 code needs to be added if and
	when needed by some application.

	* libegg/pixbufthumbnail/egg-pixbuf-thumbnail.c: Use g_mkdir() and
	g_stat(), too.

	* libegg/recent-files/egg-recent-model.c (egg_recent_model_write_raw):
	Bypass fsync() on Win32.
	(egg_recent_model_lock_file, egg_recent_model_unlock_file): Bypass
	for now if we don't have lockf().

	* libegg/recent-files/egg-recent-util.c
	(egg_recent_util_get_unique_id): Use GetComputerName() on
	Win32. (Yes, there is a gethostname() on Windows, but it's in the
	WinSock API, and it seems silly to drag in WinSock just to get the
	machine's name.)

	* libegg/treeviewutils/eggcellrendererkeys.c (is_modifier):
	Implement for Win32.

2005-06-05  Kjartan Maraas  <kmaraas@gnome.org>

	* libegg/tray/eggtrayicon.c: (egg_tray_icon_manager_filter),
	(egg_tray_icon_update_manager_window),
	(egg_tray_icon_manager_window_destroyed), (egg_tray_icon_realize):
	Patch from Fedora, by Daniel Veillard to fix 1 pixel eggtrayicon
	Closes bug #172479. Thanks to Robert McQueen for extracting the
	patch from the Fedora version of eggtrayicon.c

2005-06-01  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c: (drag_data_get_cb),
	(drag_data_received_cb):
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbar-editor.c: (drag_data_get_cb),
	(parse_item_list), (egg_toolbar_editor_load_actions):
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_get_type), (egg_toolbars_model_to_xml),
	(egg_toolbars_model_save), (parse_item_list), (parse_toolbars):
	* libegg/toolbareditor/egg-toolbars-model.h:

	Fix more signed/unsigned problems with gcc 4.0. Patch by Martin
	Kretzschmar, bug #306169.

2005-05-22  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(egg_editable_toolbar_get_type), (create_dock), (set_fixed_style),
	(toolbar_changed_cb), (update_fixed), (toolbar_removed_cb),
	(egg_editable_toolbar_construct), (egg_editable_toolbar_set_fixed),
	(new_pixbuf_from_widget):
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbar-editor.c:
	(egg_toolbar_editor_get_type), (editor_create_item),
	(update_editor_sheet), (setup_editor):
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_get_type), (parse_toolbars):
	* libegg/toolbareditor/egg-toolbars-model.h:

	Sync'd from Epiphany.

2005-05-22  Marco Pesenti Gritti <mpg@redhat.com>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(new_pixbuf_from_widget):

	Fix a crash with the composite extension

2005-05-18  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* libegg/sequence/Makefile.am: Fix building in the sequence directory
	by adding a Makefile.am
	* libegg/treeviewutils/eggcellrendererkeys.c:
	(egg_cell_renderer_keys_class_init): fix build by using a glib
	provided marshaler

2005-05-17  Bastien Nocera  <hadess@hadess.net>

	* libegg/recent-files/egg-recent-item.c:
	(egg_recent_item_get_short_name): Fix a segfault with invalid
	URIs in the recently used files (Closes: #304574)

2005-05-13  James M. Cape  <jcape@ignore-your.tv>

	* libegg/iconchooser/eggiconchooserbutton.c: (dialog_delete_event_cb):
	Emit the "delete-event" signal on the dialog, not the button.
	* libegg/iconchooser/eggiconchooser.c: (egg_icon_chooser_default_init):
	Add back the "show icon from" label, remove the unnecessary box, and
	actually sort the category combo.

2005-05-12  James M. Cape  <jcape@ignore-your.tv>

	* configure.in:
	* libegg/Makefile.am: Test for GTK+ 2.7, only build iconchooser if
	found.
	* libegg/iconchooser/eggiconchooser.c:
	(egg_icon_chooser_default_init):
	(egg_icon_chooser_default_set_property):
	(context_combo_changed):
	(reload_icon_view): Set text/pixbuf columns only at init/property-set
	time -- no longer need to work around old IconView bugs.
	(context_combo_changed): Emit "default_size_changed" after switching
	notebook page (only switch if necessary).
	(egg_icon_chooser_default_init): Set the iconview row/column spacing to
	12px, move progress bar to animation box, delete "Loading" label.
	(egg_icon_chooser_get_default_size): Change some sizing calculations.
	(reload_icon_view: Set the item width to the icon size + 4 when
	reloading.

2005-05-11  James M. Cape  <jcape@ignore-your.tv>

	* libegg/md5/eggmd5.c: (egg_md5_digest_to_str), (get_md5): Fix pointer-
	signedness warnings.

	* libegg/iconchooser/eggiconchooser.h:
	* libegg/iconchooser/eggiconchooserdefault.c: (*): s/CUSTOM/FILE/,
	s/APPS/APPLICATIONS/, s/DEVICES/LOCATIONS/, s/OTHER/UNCATEGORIZED/.
	* libegg/iconchooser/eggiconchooser.c: Indent fixes.
	(egg_icon_chooser_class_init): Document properties and signals.
	* libegg/iconchooser/eggiconchooserbutton.[c,h]: (*): Subclass GtkVBox
	instead of GtkToggleButton, use a GtkButton child to be consistent
	with existing GTK+ choosers.
	* libegg/iconchooser/eggiconchooserdefault.c:
	(context_combo_changed), (context_combo_row_is_separator),
	(context_combo_sort_func): Renamed functions to clarify use of combo.
	(egg_icon_chooser_default_set_property),
	(egg_icon_chooser_default_get_property),
	(context_combo_changed), (load_icons): Add "show-icon-name" property.
	* libegg/iconchooser/eggiconchooser.[c,h]:
	(egg_icon_chooser_class_init), (egg_icon_chooser_get_show_icon_name),
	(egg_icon_chooser_set_show_icon_name):
	* libegg/iconchooser/eggiconchooserutils.[c,h]:
	(_egg_icon_chooser_install_properties),
	(_egg_icon_chooser_set_delegate): Add "show-icon-name" property.
	(delegate_notify), (_egg_icon_chooser_get_delegate_quark): Do property
	notification handling the GtkFileChooser way.
	* libegg/iconchooser/eggiconchooserdefault.c:
	* libegg/iconchooser/eggiconchooserdialog.c:
	(egg_icon_chooser_dialog_set_property),
	(egg_icon_chooser_dialog_get_property):
	* libegg/iconchooser/eggiconchooserbutton.c:
	(egg_icon_chooser_button_set_property),
	(egg_icon_chooser_button_get_property):
	* libegg/iconchooser/eggiconchooserwidget.c:
	(egg_icon_chooser_widget_set_property),
	(egg_icon_chooser_widget_get_property): Add "show-icon-name" property.
	* libegg/iconchooser/prop-editor.c: (properties_from_type),
	(create_prop_editor): Fix more signedness warnings.
	* libegg/iconchooser/testiconchooser.c:
	(prop_editor_delete_event_cb), (properties_button_clicked_cb): Don't
	destroy window on "delete-event".
	(main): Put properties button in an alignment.

2005-05-04  Mark McLoughlin  <mark@skynet.ie>

	Fix crasher with recent items menu - bug #170660

	* egg-recent-model.c:
	(egg_recent_model_changed_timeout): set timeout id
	to zero.
	(egg_recent_model_finalize): remove the timeout if
	it is still around.

2005-05-02  Mark McLoughlin  <mark@skynet.ie>
	
	* egg-recent-view-gtk.c: Don't take a ref on the GtkMenu since
	there's no point in us keeping a destroyed menu alive.
	Also, don't barf if we don't have a menu.

Sun Apr 24 00:27:02 2005  Soeren Sandmann  <sandmann@redhat.com>

	* libegg/sequence/eggsequence.[ch]: Make EggSequenceIter a typedef
	to EggSequenceNode instead of to EggSequenceNode *.

2005-04-16  Murray Cumming <murrayc@murrayc.com>

	* libegg/column-chooser/eggcolumnchooserdialog.c:
	(egg_column_chooser_dialog_get_type),
	(egg_column_chooser_dialog_class_init),
	(egg_column_chooser_dialog_init), (egg_column_chooser_dialog_new):
	* libegg/column-chooser/eggcolumnmodel.c:
	(egg_column_model_finalize), (egg_column_model_class_init),
	(egg_column_model_get_type), (egg_column_model_new),
	(egg_column_model_set_column_visible),
	(egg_column_model_get_column_visible),
	(egg_column_model_move_down_column),
	(egg_column_model_move_up_column):
	Added casts needed by gcc 4.0, at least when compiling as C++.

2005-03-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-uimanager.c (egg_recent_view_uimanager_clear): 

	Call gtk_ui_manager_ensure_update after removing the action group.

2005-03-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libegg/recent-files/egg-recent-view-uimanager.c: Applied patch by
         David A Knight, see bug #141667.

2005-03-30  Paolo Borelli  <pborelli@katamail.com>

	* libegg/recent-files/egg-recent-view-uimanager.c
	* libegg/recent-files/egg-recent-view-uimanager.h
	* libegg/recent-files/uimanager-view-test.c

	Add the GtkUIManagerView by Paolo Bacchilega and a quick test app.

2005-03-25  Christian Neumair  <chris@gnome-de.org>

	* libegg/iconchooser/eggiconchooserdefault.c:
	(file_chooser_update_preview): Adapt to pixbufthumbnail API changes.

2005-02-03  Mark McLoughlin  <mark@skynet.ie>

	Fix problem where we tried to detect the MIME type of
	recent items before EggRecentModel could set it
	explicitly. Was causing very slow startup for some
	apps. See bug #160531

	* libegg/recent-files/egg-recent-item.[ch]:
	(egg_recent_item_set_uri),
	(egg_recent_item_set_mime_type): don't call update_mime_type()
	here.
	(egg_recent_item_get_mime_type): call it here instead.

2005-01-26  Vincent Untz  <vincent@vuntz.net>

	* libegg/treeviewutils/eggaccelerators.c:
	(egg_accelerator_parse_virtual): allow keycode parameter to be NULL
	Fix bug #165224

2005-01-25  Kjartan Maraas  <kmaraas@gnome.org>

	* libegg/dock/egg-dock.c: (egg_dock_get_property): Don't use
	deprecated glib api.
	* libegg/recent-files/egg-recent-item.c: (make_valid_utf8):
	Fix possible crasher. Patch from Sergey S. Stasyuk. Closes
	bug #158299. Maybe this should be synced into users in other
	modules.
	* libegg/treeviewutils/eggcellrendererkeys.c:
	(egg_cell_renderer_keys_start_editing): Fix a sparse warning.

2005-01-05  Ross Burton  <ross@burtonini.com>

	* libegg/recent-files/egg-recent-item.[ch]:
	* libegg/recent-files/egg-recent-model.[ch]:
	Revert my item count patch as it breaks applications which didn't
	update EggRecent.

2004-12-08  James M. Cape  <jcape@ignore-your.tv>

	* libegg/pixbufthumbnail/*: Bunch of API renames, internal rewrite,
	make it actually save metadata too.
	* libegg/thumbnailpreview/eggthumbnailpreview.c:
	* doc/libegg-docs.xml:
	* doc/libegg-sections.txt: Update for API changes

2004-12-06  Marco Pesenti Gritti  <marco@gnome.org>

	* libegg/tray/eggstatusicon.c: (egg_status_icon_init),
	(egg_status_icon_button_press):

	Activate only on double click per HIG

2004-11-30  Bastien Nocera  <hadess@hadess.net>

	* libegg/treeviewutils/eggaccelerators.c: (is_keycode),
	* libegg/treeviewutils/eggaccelerators.h:
	* libegg/treeviewutils/eggcellrendererkeys.c:
	* libegg/treeviewutils/eggcellrendererkeys.h: update from
	the gnome-control-center (was never updated after the keycode changes)

2004-11-17  Sven Herzberg  <herzi@gnome-de.org>

	* libegg/recent-files/egg-recent-item.c:
	* libegg/recent-files/egg-recent-model.c:
	* libegg/recent-files/egg-recent-view-bonobo.c:
	* libegg/recent-files/egg-recent-view-gtk.c:
	* libegg/recent-files/egg-recent-view.c: cleaned up the comments to
	make gtk-doc silent in projects that use EggRecent (like criawips does)

2004-11-10  Mark McLoughlin  <mark@skynet.ie>

	Fix for bug #154765.

	* libegg/recent-files/egg-recent-item.[ch]:
	(egg_recent_item_set_mime_type): if an app sets an empty
	MIME type in ~/.recently-used, use gnome-vfs to detect
	the MIME type.

2004-11-01  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/* remove, now in GTK+

2004-11-01  Ross Burton  <ross@burtonini.com>

	* libegg/recent-files/egg-recent-item.[ch]:
	Add a count member and accessor methods.

	* libegg/recent-files/egg-recent-model.[ch]:
	Load/save the count member and increment it when updating existing
	entries.

Sun Oct 31 15:38:47 2004  SÃ¸ren Sandmann  <sandmann@redhat.com>

	Add EggSequence data structure
	
	* libegg/sequence/eggsequence.[ch], testsequence.c: New files.
	
	* libegg/Makefile.am: Add sequence subdir

2004-10-18  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c
	(egg_desktop_entries_parse_entry):
	Error out if trying to add key-value pair to comment 
	group  (Patch from Miloslav Trmac <mitr@redhat.com>)

2004-09-28  Paolo Borelli  <pborelli@katamail.com>

	* libegg/recent-files/egg-recent-model.c: fix file descriptor
	leak. Patch from Crispin Flowerday, bug #151767.

2004-09-28  James M. Cape  <jcape@ignore-your.tv>

	* libegg/iconchooser/eggiconchooserbutton.c,
	* libegg/iconchooser/Makefile.am: Add button widget.
	* libegg/iconchooser/TODO: Update.
	* libegg/iconchooser/testiconchooser.c: Use button widget.
	* libegg/iconchooser/*.[c,h]: Remove "icon-theme" property.

2004-09-27  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c 
	(egg_desktop_entries_get_locale_encoding):
	Swap if and else clauses to prevent misallocating 
	gigabytes of memory (Spotted by Nicholas Miell, 
	bug #153759).

2004-09-27  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c 
	(egg_desktop_entries_get_locale_country):
	Swap if and else clauses to prevent misallocating 
	gigabytes of memory (Spotted by Nicholas Miell, 
	bug #153759).

2004-09-27  James Henstridge  <james@jamesh.id.au>

	* libegg/recent-files/egg-recent-util.c (load_icon_file): use
	gdk_pixbuf_new_from_file_at_size() to load the image so that
	backends such as SVG can make use of the size hint.  Simplify the
	scaling code for the case where the icon is not at the desired
	size.  Fixes bug #153621.

2004-09-25  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/*: remove the right click behavior
	on ssp's request. The constructor now takes icon and label.

2004-09-25  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/eggdropdowntoolbutton.c: turn the
	menu into a property. Allow to set a NULL menu.

2004-09-22  James M. Cape  <jcape@ignore-your.tv>

	* libegg/iconchooser/eggiconchooserdialog.[c,h]: New widget.
	* libegg/iconchooser/eggiconchooserbutton.h: Header for another new
	widget (not yet written).
	* libegg/iconchooser/eggiconchooserdefault.c:
	(egg_icon_chooser_default_get_type,
	 egg_icon_chooser_default_constructor,
	 egg_icon_chooser_default_get_resizable_hints,
	 egg_icon_chooser_default_initial_focus,
	 egg_icon_chooser_default_should_respond,
	 egg_icon_chooser_default_get_default_size,
	 egg_icon_chooser_default_screen_changed,
	 egg_icon_chooser_default_style_set): Implement
	GtkFileChooserEmbedIface.
	(egg_icon_chooser_default_set_property,
	 egg_icon_chooser_default_get_property): Fix icon theme/size changing.
	* libegg/iconchooser/eggiconchooserwidget.c:
	(egg_icon_chooser_widget_set_property,
	 egg_icon_chooser_widget_get_property): Fix EggIconChooser properties.
	* libegg/iconchooser/gtkfilechooserembed.[c,h]:
	(_gtk_file_chooser_embed_get_type): Move hack to get GtkFileChooserEmbed
	GType here, add G_GNUC_CONST.
	* libegg/iconchooser/prop-editor.[c,h]: Copied from GTK+.
	* libegg/iconchooser/testiconchooser.c: Use PropertyEditor and
	EggIconChooserDialog.
	* libegg/iconchooser/Makefile.am, libegg/iconchooser/TODO: Updated.

2004-09-19  James M. Cape  <jcape@ignore-your.tv>

	* libegg/iconchooser/eggiconchooserdefault.c:
	(_egg_icon_chooser_default_get_type): implement manually.
	(egg_icon_chooser_default_init, combo_row_is_separator): fix separator
	stuff.
	(get_name_for_context): new function to get a translated display name
	given an EggIconContext.
	(render_context_name): use get_name_for_context().
	(egg_icon_chooser_default_init, combo_sort_func): add a function
	to sort w/in the groups.
	(egg_icon_chooser_default_class_init,
	egg_icon_chooser_default_constructor): create the FileChooserWidget
	here so it respects the "file-system-backend" property.
	(load_icons, cleanup_after_load, animate_spinner, cleanup_after_anim):
	protect idle-related functions with GDK_THREADS_ENTER/LEAVE.
	(egg_icon_chooser_default_screen_changed): monitor screen changes.
	* libegg/iconchooser/Makefile.am,
	  libegg/iconchooser/eggiconchooserwidget.c: implement basic widget.
	* libegg/iconchooser/TODO: update.

2004-09-16  Mark McLoughlin  <mark@skynet.ie>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_monitor): don't pass a local
	path as a URI - otherwise we crash when people
	use $HOME=/ and we pass "//.recently-used" to
	gnome-vfs. Bug 152832

2004-09-16  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/eggdropdowntoolbutton.c:
	reconstruct widget contents on tooobar_reconfigure, this
	way in vertical toolbars we have a right arrow and the
	the arrow_button is packed below the button itself.
	Also remove screen clamping from the menu positioning func, as
	per Owen's suggestion.

2004-09-16  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/eggdropdowntoolbutton.c: fix
	position of popup menu for vertical toolbars.

2004-09-15  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/eggdropdowntoolbutton.c: select
	the first menu item when the arrow button is activated with
	the keyboard.

2004-09-15  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/eggdropdowntoolbutton.c: the arrow
	button should remain depressed when activated with keyboard.

2004-09-15  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/eggdropdowntoolbutton.c: docs.

2004-09-12  Marco Pesenti Gritti  <marco@gnome.org>

	* libegg/toolbareditor/test-toolbar-editor.c:

	Make it build again.

Sat Sep 11 15:26:36 2004  SÃ¸ren Sandmann  <sandmann@redhat.com>

	* libegg/iconchooser/eggiconchooserdefault.c
	(_egg_icon_chooser_default_init): Comment out call to
	non-existing function to make it build.

Sat Sep 11 15:19:48 2004  SÃ¸ren Sandmann  <sandmann@redhat.com>

	* libegg/Makefile.am (SUBDIRS): s/dropdownmenu/dropdowntoolbutton/

2004-09-08  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/dropdowntoolbutton/eggdropdowntoolbutton.c:
	(menu_position_func), (egg_dropdown_tool_button_set_menu):
	* libegg/tray/eggstatusicon.c: (egg_status_icon_class_init),
	(egg_status_icon_init), (egg_status_icon_finalize),
	(egg_status_icon_update_image), (egg_status_icon_set_from_file):

	Fix menu positioning and refcounting.

2004-09-07  Paolo Borelli  <pborelli@katamail.com>

	* libegg/dropdowntoolbutton/eggdropdowntoolbutton.c: add 
	api to set the arrow button tooltip.
	* libegg/dropdowntoolbutton/test.c: use the above.

2004-09-07  Paolo Borelli  <pborelli@katamail.com>

	* libegg/Makefile.am: add dropdown toolitem subdir
	* libegg/dropdowntoolbutton/test.c: add a simple test app.
	* libegg/dropdowntoolbutton/*: fix copiright, fix menu
	placement.

2004-09-04  Philip Langdale  <philipl@mail.utexas.edu>

	* libegg/dock/egg-dock-master.c:
	(egg_dock_master_drag_end):

	Honour the NEVER_FLOAT behaviour restriction.
	I might be mistaken but I think none of the behaviour
	restrictions are honoured. Supporting the other ones
	would follow the same pattern as this change.

2004-09-03  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_new_from_file),
	(egg_desktop_entries_new_from_data_dirs):

	Don't try to free NULL entries.

2004-09-02  Ray Strode  <rstrode@redhat.com>

	Cleanup and leak fixes by Christophe Fergeau.

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_free): fix leak
	(egg_desktop_entries_parse_comment): use
	g_strndup instead of g_new/strncpy().
	(egg_desktop_entry_free),
	(egg_desktop_entries_remove_group_node): fix leak.
	
2004-09-01  Paolo Borelli  <pborelli@katamail.com>

	* configure.in:
	* libegg/dropdowntoolbutton/*: add a dropdown tool button
	widget.

2004-08-18  Anders Carlsson  <andersca@gnome.org>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_parse_entry), (key_get_locale),
	(egg_desktop_entries_get_locale_string):
	Fix bug where locale strings would not be read correctly.

2004-08-17  Mark McLoughlin  <mark@skynet.ie>

	Fix for bug #150218 - panel crashing when you've
	got URI's like "x-nautilus-desktop:///home" in
	your ~/.recently-used.

	* libegg/recent-files/egg-recent-item.c:
	(egg_recent_item_get_short_name): remove assertion.
	
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_separator): split out the
	separator creation from new_menu_item().
	(egg_recent_view_gtk_new_menu_item): don't add a
	menu item if we can't obtain a short name.
	(egg_recent_view_gtk_add_to_menu): upd.

2004-08-15  Christian Neumair  <chris@gnome-de.org>

	* libegg/recent-files/egg-recent-item.c:
	(egg_recent_item_get_short_name):
	Unref GnomeVFSURI instead of g_free'ing it.

2004-08-11  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_new),
	(egg_desktop_entries_new_from_fd),
	(egg_desktop_entries_new_from_file),
	(egg_desktop_entries_new_from_data):  
	Change parameter lists.

	(egg_desktop_entries_set_*): add setters

2004-08-11  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/toolbareditor/Makefile.am:
	* libegg/toolbareditor/egg-editable-toolbar.c: (find_action),
	(drag_data_get_cb), (set_item_drag_source),
	(create_item_from_action), (create_item), (drag_data_received_cb),
	(toolbar_drag_motion_cb), (egg_editable_toolbar_construct),
	(egg_editable_toolbar_disconnect_model),
	(egg_editable_toolbar_deconstruct),
	(egg_editable_toolbar_set_model),
	(egg_editable_toolbar_set_ui_manager),
	(egg_editable_toolbar_set_property),
	(egg_editable_toolbar_get_property),
	(egg_editable_toolbar_class_init), (egg_editable_toolbar_init),
	(egg_editable_toolbar_finalize), (egg_editable_toolbar_new),
	(egg_editable_toolbar_new_with_model),
	(egg_editable_toolbar_set_edit_mode),
	(egg_editable_toolbar_set_fixed), (new_pixbuf_from_widget),
	(new_separator_pixbuf),
	(_egg_editable_toolbar_new_separator_image),
	(egg_editable_toolbar_get_model):
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbar-editor.c: (compare_actions),
	(find_action), (egg_toolbar_editor_set_ui_manager),
	(egg_toolbar_editor_set_property),
	(egg_toolbar_editor_get_property), (egg_toolbar_editor_class_init),
	(egg_toolbar_editor_finalize), (egg_toolbar_editor_new),
	(egg_toolbar_editor_init), (model_has_action):
	* libegg/toolbareditor/egg-toolbar-editor.h:
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_get_type), (egg_toolbars_model_to_xml),
	(toolbars_toolbar_new), (toolbars_item_new), (free_toolbar_node),
	(free_item_node), (egg_toolbars_model_get_flags),
	(egg_toolbars_model_set_flags), (egg_toolbars_model_add_separator),
	(impl_add_item), (parse_item_list),
	(egg_toolbars_model_add_toolbar), (parse_toolbars),
	(egg_toolbars_model_load), (impl_get_item_id),
	(impl_get_item_data), (_egg_accumulator_STRING),
	(egg_toolbars_model_class_init), (egg_toolbars_model_init),
	(free_toolbar), (egg_toolbars_model_finalize),
	(egg_toolbars_model_remove_toolbar),
	(egg_toolbars_model_remove_item), (egg_toolbars_model_move_item),
	(egg_toolbars_model_item_nth), (egg_toolbars_model_get_item_id),
	(egg_toolbars_model_get_item_data),
	(egg_toolbars_model_get_item_type):
	* libegg/toolbareditor/egg-toolbars-model.h:
	* libegg/toolbareditor/test-toolbar-editor.c: (activate_action),
	(edit), (main):
	* libegg/util/eggmarshalers.list:

	Resync editable toolbar code with Epiphany.

2004-08-06  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_open_file):

	Restore the umask to the original value after we create the
	~/.recently-used file.  Big thanks to Joe Marcus Clarke
	<marcus@freebsd.org> for the patch.  Fixes 149468.

2004-08-03  Kjartan Maraas  <kmaraas@gnome.org>

	* libegg/recent-files/egg-recent-item.c:
	(egg_recent_item_get_short_name): Don't leak the uri.

2004-07-27  Federico Mena Quintero  <federico@ximian.com>

	Fixes #148620:

	* libegg/recent-files/egg-recent-item.c
	(egg_recent_item_get_short_name): New public function; computes a
	valid UTF-8 string to display in a menu or list for the item's name.
	(make_valid_utf8): New helper function.

	* libegg/recent-files/egg-recent-item.h: Add prototype for
	egg_recent_item_get_short_name().

	* libegg/recent-files/egg-recent-view-gtk.c
	(egg_recent_view_gtk_new_menu_item): Use
	egg_recent_item_get_short_name().

2004-07-22  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	Change spacing a bit.

2004-07-22  Ray Strode  <rstrode@redhat.com>

	Rework the code to start to match some of the changes
	described in comment #3 of bug 139974).  Note these
	changes are untested, so they are broken.

	* libegg/desktopentries/eggdesktopentries.[ch]:
	(egg_desktop_entries_add_entry),
	(egg_desktop_entries_add_group),
	(egg_desktop_parse_data),
	(egg_desktop_flush_parse_buffer):
	Make some functions internal.  Rename add_entry to
	add_key.
	(egg_find_file_in_data_dirs):
	Make the function modify the input to facilitate
	repeated calls to iterate over the list.
	(egg_find_file_in_data_dir): remove this function.
	(egg_desktop_entries_new_from_fd): new internal 
	helper function.
	(egg_desktop_entries_new_from_data), 
	(egg_desktop_entries_new_from_data_dirs): new 
	convenience constructors.
	fix transposed ( and * (also, bug 148182).

	* libegg/desktopentries/eggdirfuncs.c:
	(egg_get_data_dirs),
	(egg_get_configuration_dirs):
	new convenience functions that does the
	really common operation of the 
	concatenatation of get_user_dir with
	get_secondary_dirs.

Sat Jul 31 23:38:29 2004  Soeren Sandmann  <sandmann@daimi.au.dk>

	* Make it mostly compile

2004-07-25  James M. Cape  <jcape@ignore-your.tv>

	* libegg/iconchooser/gtkfilechooserembed.[c,h],
	* libegg/iconchooser/eggiconchooserdefault.c,
	* libegg/iconchooser/Makefile.am: Pseudo-delegate GtkFileChooserEmbed
	from the internal file-chooser widget (doesn't actually do the proxying
	right now, as GtkFileChooserWidget doesn't implement the
	GtkFileChooserEmbed interface).

2004-07-25  James M. Cape  <jcape@ignore-your.tv>

	* libegg/iconchooser/eggiconchooserdefault.c:
	(_egg_icon_chooser_default_init), (load_icons),
	(cleanup_after_load), (animate_spinner),
	(cleanup_after_load) (start_load): Rework theloading, use
	"gnome-spinner" icon for spinner animation.
	(_egg_icon_chooser_default_class_init),
	(reload_icon_view), (install_settings_notify),
	(egg_icon_chooser_style_set): Second pass at handling theme/icon
	size changes.

	* libegg/iconchooser/eggiconchooser.c:
	* libegg/iconchooser/eggiconchooser.h:
	(egg_icon_chooser_class_init), (egg_icon_chooser_get_icon_theme),
	(egg_icon_chooser_set_icon_theme), (egg_icon_chooser_get_icon_size),
	(egg_icon_chooser_set_icon_size),
	* libegg/iconchooser/eggiconchooserdefault.c:
	(egg_icon_chooser_default_set_property),
	(egg_icon_chooser_default_get_property): Change "icon-theme"
	property to a string, add "icon-size" property.

	* libegg/iconchooser/TODO: Added TODO list.

2004-07-22  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_get_locale_string_list):
	fix transposed ( and * (also, bug 148182).

2004-07-22  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_locale_is_interesting),
	(egg_desktop_entries_parse_entry): 
	use g_ascii_isspace instead of isspace (bug 148182).

2004-07-20  James M. Cape  <jcape@ignore-your.tv>

	* libegg/iconchooser/eggiconchooserdefault.c:
	(_egg_icon_chooser_default_init):
	(icons_model_unsorted): Properly unsort the icons model before
	reloading the theme's icons, fixes incomplete emblems loading.

2004-07-19  James M. Cape  <jcape@ignore-your.tv>

	* libegg/iconchooser/Makefile.am: corrected G_LOG_DOMAIN.
	* libegg/iconchooser/eggiconchooserdefault.c: First pass on theme
	  changes and the "icon-theme" property.

2004-07-19  James M. Cape  <jcape@ignore-your.tv>

	* libegg/background-monitor/egg-background-monitor.c: Fix compilation.

	* libegg/md5/Makefile.am, libegg/md5/.cvsignore,
	  libegg/md5/testeggmd5.c, libegg/md5/eggmd5.[c,h],
	  libegg/md5/README: Implementation of MD5 hash algo for GLib
	  (mostly copied from libgnomeui).

	* libegg/pixbufthumbnail/Makefile.am,
	  libegg/pixbufthumbnail/egg-pixbuf-thumbnail.[c,h],
	  libegg/pixbufthumbnail/testeggpixbufthumbnail.c,
	  libegg/pixbufthumbnail/README: Implementation of fdo thumbnailing
	  standard for GdkPixbuf.

	* libegg/thumbnailpreview/Makefile.am,
	  libegg/thumbnailpreview/.cvsignore,
	  libegg/thumbnailpreview/eggthumbnailpreview.[c,h],
	  libegg/thumbnailpreview/README: Convenience widget for GTK+ to
	  display a thumbnail pixbuf w/ some customizable metadata.

	* libegg/iconchooser/Makefile.am,
	  libegg/iconchooser/.cvsignore,
	  libegg/iconchooser/eggiconchooser.[c,h],
	  libegg/iconchooser/eggiconchooserutils.[c,h],
	  libegg/iconchooser/eggiconchooserdefault.[c,h],
	  libegg/iconchooser/eggiconchooserwidget.h,
	  libegg/iconchooser/gtkfilechooserprivate.[c,h],
	  libegg/iconchooser/gtkfilechooserutils.[c,h],
	  libegg/iconchooser/testiconchooser.c: Icon-picker framework
	  (currently unfinished, but getting there).

	* configure.in, libegg/libegg/Makefile.am: Integrate these
	conditionally into the build if GTK+ >= 2.5.0.

2004-07-19  Paolo Maggi  <paolo.maggi@polito.it>

	Fixes bug #135452: "Failed to lock" -> recent files disappear

	* recent-files/egg-recent-model.c (egg_recent_model_lock_file):
	Attempt to lock the file 5 times, waiting a random interval (< 1 second)
	in between attempts.
	(egg_recent_model_unlock_file): cosmetic changes

	Approved by James Willcox

2004-07-18  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_find_file_in_data_dirs): 
	Don't assume desktop files will be in
	applications.

2004-07-18  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_find_file_in_data_dirs): 
	New function to consolidate functionality in
	egg_desktop_entries_find_file_in_user_data_dir
	and egg_desktop_entries_find_file_in_secondary_data_dirs.
	Adds support for subdir-name.desktop formed file ids.

2004-07-18  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_find_file_in_secondary_dir): 
	Assign error to the local error object instead of
	passed error object

2004-07-18  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.[ch]:
	(egg_desktop_entries_has_key): new convenience
	function

	* libegg/desktopentries/eggdirfuncs.[ch]:
	(egg_file_full_test):
	(egg_find_file_in_configuration_dir): remove cruft

2004-07-16  Ray Strode  <rstrode@redhat.com>

	Support user-defined start groups instead of
	just "Desktop Entry" and "KDE Desktop Entry".

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_new): 
	(egg_desktop_entries_new_from_file): Add new
	parameter to constructors for legal start groups.
	(egg_desktop_entries_group_is_legal_start_group):
	New function that iterates over start groups looking for
	a match.
	(egg_desktop_entries_parse_group): check for legal
	start groups.
	(egg_desktop_entries_get_start_group): return start group
	of desktop file (was previously get_default_group)
	
	* libegg/desktopentries/testentries.c:
	update to use new api	

2004-07-10  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c:
	(egg_desktop_entries_new_from_file): fix 
	error handling code to handle the case where file
	isn't found.

2004-07-09  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.[ch]:
	(egg_desktop_entries_get_default_group): new 
	function for identifying the main group in a
	desktop file.
	
2004-07-09  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c: Support
	legacy "KDE Desktop Entry" group name
	
2004-07-06  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c: Allow empty
	entry values.

2004-07-05  Mark McLoughlin  <mark@skynet.ie>

	* libegg/screen-exec/*: remove. All this stuff is in
	libgnomeui and gdk now. See libegg/screen-exec/README
	for details.

Mon Jul  5 02:35:56 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/*/README: Mention when modules have been merged.

Mon Jul  5 01:52:10 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/regex/pcre/*: Files from PCRE 4.5, adapted for use
	inside GLib.

	* libegg/regex/eggregex.h: 
	* libegg/regex/eggregex.c: GLib-style Unicode regular 
	expression API.

	* libegg/regex/testregex.c: A simple test application.
	
	* libegg/Makefile.am (SUBDIRS): Add regex.

2004-07-04  Anders Carlsson  <andersca@gnome.org>

	* configure.in:
	* libegg/iconlist/eggiconlist.c: (egg_icon_list_expose),
	(scroll_timeout), (egg_icon_list_motion),
	(egg_icon_list_button_press), (egg_icon_list_update_rubberband),
	(egg_icon_list_start_rubberbanding),
	(egg_icon_list_stop_rubberbanding),
	(egg_icon_list_unselect_all_internal),
	(egg_icon_list_real_select_all),
	(egg_icon_list_adjustment_changed), (egg_icon_list_item_free),
	(egg_icon_list_select_item), (verify_items),
	(egg_icon_list_row_changed), (egg_icon_list_row_inserted),
	(egg_icon_list_row_deleted), (egg_icon_list_rows_reordered),
	(egg_icon_list_select_all_between),
	(egg_icon_list_move_cursor_up_down),
	(egg_icon_list_move_cursor_page_up_down),
	(egg_icon_list_move_cursor_left_right),
	(egg_icon_list_move_cursor_start_end), (egg_icon_list_set_model),
	(egg_icon_list_get_selected_items), (egg_icon_list_select_all),
	(egg_icon_list_unselect_all):
	* libegg/iconlist/eggiconlist.h:
	* libegg/iconlist/testiconlist.c: (foreach_selected_remove):
	Fix the "selection_changed" signal to not get emitted twice in some cases.
	Also fix a bunch of issues reported by Jonathan.
	
2004-07-03  Anders Carlsson  <andersca@gnome.org>

	* libegg/iconlist/eggiconlist.c: (egg_icon_list_add_move_binding),
	(egg_icon_list_real_move_cursor), (egg_icon_list_new),
	(egg_icon_list_new_with_model), (egg_icon_list_get_path_at_pos),
	(egg_icon_list_selected_foreach),
	(egg_icon_list_set_selection_mode),
	(egg_icon_list_get_selection_mode), (egg_icon_list_set_model),
	(egg_icon_list_get_model), (egg_icon_list_set_text_column),
	(egg_icon_list_get_text_column), (egg_icon_list_set_markup_column),
	(egg_icon_list_get_markup_column),
	(egg_icon_list_set_pixbuf_column),
	(egg_icon_list_get_pixbuf_column), (egg_icon_list_select_path),
	(egg_icon_list_unselect_path), (egg_icon_list_select_all),
	(egg_icon_list_unselect_all), (egg_icon_list_path_is_selected),
	(egg_icon_list_item_activated):
	* libegg/iconlist/eggiconlist.h:
	* libegg/iconlist/testiconlist.c: (foreach_selected_remove_func),
	(foreach_selected_remove), (selection_changed), (main):
	Document functions and fix a few bugs.
	
2004-07-02  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c: 
	(egg_desktop_entries_get_keys),
	(egg_desktop_entries_get_value): Don't dereference NULL
	pointers.

2004-07-02  Anders Carlsson  <andersca@gnome.org>

	* libegg/iconlist/eggiconlist.c: (egg_icon_list_class_init),
	(egg_icon_list_init), (egg_icon_list_set_property),
	(egg_icon_list_get_property), (egg_icon_list_calculate_item_size),
	(egg_icon_list_paint_item), (egg_icon_list_update_item_text),
	(egg_icon_list_get_text_column), (egg_icon_list_set_markup_column),
	(egg_icon_list_get_markup_column),
	(egg_icon_list_set_pixbuf_column),
	(egg_icon_list_get_pixbuf_column):
	* libegg/iconlist/eggiconlist.h:
	* libegg/iconlist/testiconlist.c: (fill_model), (create_model):
	Add markup column support.
	
2004-07-02  Anders Carlsson  <andersca@gnome.org>

	* libegg/iconlist/eggiconlist.c: (egg_icon_list_class_init),
	(egg_icon_list_init), (egg_icon_list_destroy),
	(egg_icon_list_finalize), (egg_icon_list_set_property),
	(egg_icon_list_get_property), (egg_icon_list_button_press),
	(egg_icon_list_select_first_matching_item),
	(egg_icon_list_maybe_begin_dragging_items),
	(egg_icon_list_real_toggle_cursor_item),
	(egg_icon_list_calculate_item_size),
	(egg_icon_list_invalidate_sizes), (egg_icon_list_paint_item),
	(egg_icon_list_item_new), (egg_icon_list_item_unref),
	(egg_icon_list_get_item_text), (egg_icon_list_get_item_icon),
	(egg_icon_list_get_item_at_pos), (egg_icon_list_get_path_at_pos),
	(egg_icon_list_selected_foreach), (egg_icon_list_select_path),
	(egg_icon_list_unselect_path), (egg_icon_list_path_is_selected),
	(egg_icon_list_item_activated), (egg_icon_list_get_items),
	(egg_icon_list_row_changed), (egg_icon_list_row_inserted),
	(egg_icon_list_row_deleted), (egg_icon_list_rows_reordered),
	(egg_icon_list_build_items), (egg_icon_list_set_model),
	(egg_icon_list_get_model), (egg_icon_list_set_text_column),
	(egg_icon_list_set_pixbuf_column):
	* libegg/iconlist/eggiconlist.h:
	* libegg/iconlist/testiconlist.c: (fill_model), (create_model),
	(foreach_selected_print), (item_removed), (remove_selected),
	(item_cb), (do_popup_menu), (main):
	* libegg/util/eggmarshalers.list:
	Update icon list to use the tree model instead.
	
2004-06-29  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c
	(egg_find_file_in_data_dir): Don't use same GError variable twice. 

Sat Jun 26 21:05:15 2004  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/iconlist/eggiconlist.c (egg_icon_list_adjustment_changed): 
	Make sure the rubberband is updated when scrolling.

2004-06-21  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c: 
	Minor code cleanups.

Mon Jun 21 00:06:44 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/iconlist/eggiconlist.c (egg_icon_list_item_get_icon_list): 
	Remove this unused function.  (Patch by Jody Goldberg)

Mon Jun 21 00:05:56 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/iconlist/eggiconlist.c (egg_icon_list_queue_draw_item): 
	Avoid warnings if items are selected before the icon list is
	realized.  (Patch by Jody Goldberg)

Mon Jun 21 00:05:16 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/iconlist/eggiconlist.c (egg_icon_list_button_press): 
	Fix a small problem in mode GTK_SELECTION_NONE.

Sun Jun 20 23:39:51 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/iconlist/eggiconlist.c: Let ctrl key combinations
	move the focus without influencing the selection.

2004-06-21  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c: 
	Rename EGG_DESKTOP_ENTRIES_KEEP_TRANSLATIONS
	and EGG_DESKTOP_ENTRIES_KEEP_COMMENTS to 
	EGG_DESKTOP_ENTRIES_DISCARD_TRANSLATIONS and
	EGG_DESKTOP_ENTRIES_DISCARD_COMMENTS.
	(egg_desktop_find_file_in_data_dir): Move into
	eggdesktopentries.c and make it return an open
	file descriptor instead of a filename.
	(egg_desktop_entries_new_from_file): Use read
	syscall instead of g_file_get_contents.

Fri Jun 18 01:15:33 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/iconlist/eggiconlist.c: Implement keynav.

Tue Jun 15 19:59:33 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/iconlist/prop-editor.[hc]: The property editor,
	copied from testgtk.

Tue Jun 15 19:57:44 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/iconlist/testiconlist.c (main): Show off some more
	features of the icon list: rtl layout, sorting, context menus.
	Also add a property editor.

Tue Jun 15 20:01:49 2004  Matthias Clasen  <maclas@gmx.de>

	* libegg/iconlist/eggiconlist.c (egg_icon_list_layout_single_row): 
	Support rtl layout.

2004-06-14  Ray Strode  <rstrode@redhat.com>

	* libegg/desktopentries/eggdesktopentries.c: 
	(EggDesktopEntriesGroup) Use GHashTable instead of
	GData for lookup map.  
	(egg_desktop_entries_new_from_file): Check
	find_file_in_data_dir in a loop instead of assuming
	that the file will still be around after the 
	function returns.

2004-06-01  Adam Hooper  <adamh@densi.com>
	* libegg/toolbareditor/egg-toolbar-editor.c: Use
	g_list_insert_sorted() instead of g_list_append() + g_list_sort()

2004-05-31  Anders Carlsson  <andersca@gnome.org>

	* libegg/iconlist/eggiconlist.c (egg_icon_list_motion): 
	Implement rubberband scrolling (needs to be done for the
	horizontal scrollbar too)

2004-05-27  Ray Strode  <halfline@hawaii.rr.com>

	* libegg/eggdesktopentries: Initial import of 
	eggdesktopentries

2004-05-22  Crispin Flowerday  <gnome@flowerday.cx>

	* libegg/toolbareditor/egg-toolbar-editor.c
	(event_box_realize_cb), (editor_create_item): Set the drag icon on
	realize, otherwise the current icon theme isn't used, and it falls
	back to the default theme.

2004-05-15  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/toolbareditor/egg-toolbar-editor.c:
	(egg_toolbar_editor_finalize):

	Fix a mem leak (backported from epiphany).

2004-05-05  Murray Cumming  <murrayc@murrayc.com>

	* libegg/column-chooser/eggcolumnchooserdialog.h: Use G_BEGIN_DECLS and
	G_END_DECLS so it can be used with C++.

2004-04-16  Marco Pesenti Gritti  <marco@gnome.org>

	* libegg/toolbareditor/Makefile.am:
	* libegg/toolbareditor/egg-editable-toolbar.c:
	(get_toolbar_position), (get_dock_nth), (get_toolbar_nth),
	(find_action), (drag_data_delete_cb), (drag_begin_cb),
	(drag_end_cb), (drag_data_get_cb), (set_drag_cursor),
	(unset_drag_cursor), (set_item_drag_source),
	(create_item_from_action), (create_item), (data_is_separator),
	(drag_data_received_cb), (popup_toolbar_context_menu_cb),
	(free_dragged_item), (toolbar_drag_drop_cb),
	(toolbar_drag_motion_cb), (toolbar_drag_leave_cb), (create_dock),
	(set_fixed_style), (unset_fixed_style), (toolbar_changed_cb),
	(unparent_fixed), (update_fixed), (toolbar_added_cb),
	(toolbar_removed_cb), (item_added_cb), (item_removed_cb),
	(toolbars_clean), (egg_editable_toolbar_construct),
	(egg_editable_toolbar_set_model), (egg_editable_toolbar_set_merge),
	(egg_editable_toolbar_class_init), (egg_editable_toolbar_init),
	(egg_editable_toolbar_finalize), (egg_editable_toolbar_new),
	(egg_editable_toolbar_get_edit_mode),
	(egg_editable_toolbar_set_edit_mode), (egg_editable_toolbar_show),
	(egg_editable_toolbar_hide), (egg_editable_toolbar_set_fixed),
	(egg_editable_toolbar_set_drag_dest),
	(_egg_editable_toolbar_new_separator_image):
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbar-editor.c: (compare_func),
	(sort_list), (find_action), (egg_toolbar_editor_set_merge),
	(toolbar_removed_cb), (egg_toolbar_editor_set_model),
	(egg_toolbar_editor_class_init), (egg_toolbar_editor_finalize),
	(egg_toolbar_editor_new), (drag_begin_cb), (drag_end_cb),
	(editor_drag_data_received_cb), (editor_drag_data_delete_cb),
	(drag_data_get_cb), (set_drag_cursor), (event_box_realize_cb),
	(editor_create_item), (update_editor_sheet), (setup_editor),
	(egg_toolbar_editor_init), (egg_toolbar_editor_add_action),
	(model_has_action), (update_actions_list),
	(egg_toolbar_editor_load_actions):
	* libegg/toolbareditor/egg-toolbar-editor.h:
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_to_xml), (egg_toolbars_model_save),
	(egg_toolbars_model_add_separator), (impl_add_item),
	(egg_toolbars_model_add_toolbar), (parse_toolbars),
	(egg_toolbars_model_load), (egg_toolbars_model_class_init),
	(egg_toolbars_model_init), (egg_toolbars_model_finalize),
	(egg_toolbars_model_new), (egg_toolbars_model_remove_toolbar),
	(egg_toolbars_model_remove_item):
	* libegg/toolbareditor/egg-toolbars-model.h:
	* libegg/toolbareditor/hand-open.png:
	* libegg/toolbareditor/test-toolbar-editor.c: (activate_action),
	(main):
	* libegg/toolbareditor/test-toolbar.xml:

	Resync with epiphany, we use gtk 2.4 now

2004-04-15  Bastien Nocera  <hadess@hadess.net>

	* libegg/recent-files/egg-recent-util.c: another unused function
	to comment when not using libgnomeui

2004-04-10  Bastien Nocera  <hadess@hadess.net>

	* libegg/recent-files/egg-recent-util.c: remove unused function
	when not using libgnomeui

2004-04-05  Murray Cumming  <murrayc@murrayc.com>

	* libegg/recent-files/egg-recent-item.c: Use private_data instead
	of private, so it can compile with a C++ compiler.
	* libegg/recent-files/egg-recent-view.h: Add G_BEGIN_DECLS and 
	G_END_DECLS so we can use it with C++.

2004-03-09  Bastien Nocera  <hadess@hadess.net>

	* libegg/recent-files/egg-recent-util.c:
	(egg_recent_util_get_icon): avoid warnings when the icon file
	isn't found

2004-01-31  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_lock_file):

	Fix a locking bug, patch from
	Gustavo GirÃ¡ldez <gustavo.giraldez@gmx.net>

2004-01-30  Kaushal Kumar  <kaushal.kumar@wipro.com>

	* libegg/sidebar/Makefile.am: 
	* libegg/toolbar/Makefile.am:
	Fix compilation error due to GTK_DISABLE_DEPRECATED.
	Fixes bugzilla #132830.

2004-01-22  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_lock_file):

	Make the file locking suck a little less for nfs home directories.
	Patch from Dan Williams <dcbw@redhat.com>.

2004-01-22  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/Makefile.am:
	* libegg/recent-files/bonobo-view-test.c:
	(hello_on_menu_file_open), (open_recent_cb),
	(hello_create_main_window):
	* libegg/recent-files/egg-recent-item.c: (egg_recent_item_new),
	(egg_recent_item_free), (egg_recent_item_get_groups),
	(egg_recent_item_in_group), (egg_recent_item_add_group),
	(egg_recent_item_remove_group), (egg_recent_item_set_private),
	(egg_recent_item_get_private):
	* libegg/recent-files/egg-recent-item.h:
	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_string_match), (egg_recent_model_add_new_groups),
	(egg_recent_model_update_item), (parse_info_init),
	(start_element_handler), (end_element_handler), (text_handler),
	(egg_recent_model_group_match), (egg_recent_model_filter),
	(egg_recent_model_monitor_list), (egg_recent_model_read),
	(egg_recent_model_write), (egg_recent_model_finalize),
	(egg_recent_model_set_property), (egg_recent_model_get_property),
	(egg_recent_model_class_init), (egg_recent_model_init),
	(egg_recent_model_new), (egg_recent_model_add),
	(egg_recent_model_set_filter_mime_types),
	(egg_recent_model_set_filter_groups),
	(egg_recent_model_set_filter_uri_schemes):
	* libegg/recent-files/egg-recent-model.h:
	* libegg/recent-files/egg-recent-util.c:
	(egg_recent_util_escape_underlines):
	* libegg/recent-files/egg-recent-view.c:
	* libegg/recent-files/egg-recent-view.h:
	* libegg/recent-files/gtk-view-test.c: (main):
	* libegg/recent-files/populate-recent.c: (main):

	Revert all the stuff done in november.

2003-08-08  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/treeviewutils/eggtreemodelfilter.c
	(egg_tree_model_filter_row_inserted): fix mem leaks.

Tue Nov 18 20:54:16 2003  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelfilter.c
	(egg_tree_model_filter_row_deleted): don't try to fetch the child back,
	since we do know that it is already gone (#126493, Marco Pesenti
	Gritti).

Mon Nov 17 18:42:34 2003  Kristian Rietveld  <kris@gtk.org>

	Fixes from David Knight, #124313.

	* libegg/treeviewutils/eggtreemodelunion.c (get_path_from_hash): strdup
	the key before adding it to the hash,
	(path_to_string_without_first): allocate an array of gchars, not
	of gchar*s.

2003-11-06  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/Makefile.am:
	* libegg/recent-files/bonobo-view-test.c:
	(hello_on_menu_file_open), (open_recent_cb),
	(hello_create_main_window):
	* libegg/recent-files/egg-recent-item.c: (egg_recent_item_new),
	(egg_recent_item_free), (egg_recent_item_set_private),
	(egg_recent_item_get_private), (egg_recent_item_get_application),
	(egg_recent_item_set_application):
	* libegg/recent-files/egg-recent-item.h:
	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_update_item), (parse_info_init),
	(start_element_handler), (end_element_handler), (text_handler),
	(egg_recent_model_read), (egg_recent_model_write),
	(egg_recent_model_finalize), (egg_recent_model_set_property),
	(egg_recent_model_get_property), (egg_recent_model_class_init),
	(egg_recent_model_init), (egg_recent_model_new),
	(egg_recent_model_add), (egg_recent_model_filter):
	* libegg/recent-files/egg-recent-model.h:
	* libegg/recent-files/egg-recent-view.c:
	* libegg/recent-files/egg-recent-view.h:
	* libegg/recent-files/gtk-view-test.c: (main):
	* libegg/recent-files/populate-recent.c: (main):

	Remove metric assloads of code/API.  Eliminated groups and filters
	in the model.  Made egg-recent-model store the application.

2003-10-03  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/toolbareditor/egg-toolbars-model.c: (safe_save_xml),
	(egg_toolbars_model_load):

	Check for failed load of the toolbars model from the XML file,
	and fix the check for failed save of same to the XML file.

Mon Sep  8 21:39:20 2003  Kristian Rietveld  <kris@gtk.org>

	Fixes from David Hampton <hampton@employees.org> via gtk-devel-list.

	* libegg/treeviewutils/eggtreemodelfilter.c
	(egg_tree_model_filter_elt_get_path): fix the call to
	egg_tree_model_filter_add_root,
	(egg_tree_model_filter_row_changed): bail out if c_path is not
	above the virtual root, allow building levels on the second try
	to convert the child path to a filter path,
	(egg_tree_model_filter_convert_iter_to_child_iter): pass the
	virtual root when calling egg_tree_model_filter_elt_get_path.

2003-09-04  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-item.c: (egg_recent_item_ref),
	(egg_recent_item_unref):
	* libegg/recent-files/egg-recent-item.h:

	Fix some unholy pointer mangling.
	Big thanks to Laurent Vivier <Laurent.Vivier@bull.net> for spotting
	the problem and providing a patch.

2003-08-24  Anders Carlsson  <andersca@gnome.org>

	* libegg/iconlist/eggiconlist.c: (egg_icon_list_paint_item),
	(egg_icon_list_paint_rubberband):
	Use gdk_draw_pixbuf.
	
	(egg_icon_list_item_unref):
	Call destroy_notify on the list item. Reported by Edd Dumbill.
	
2003-08-18  Mark McLoughlin  <mark@skynet.ie>

	* configure.in:
	* libegg/Makefile.am:
	* libegg/expander/Makefile.am:
	* libegg/expander/eggexpander.c:
	* libegg/expander/eggexpander.h:
	* libegg/expander/test-expander.c: remove EggExpander.
	Its in gtk+ HEAD now.

2003-08-17  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/toolbareditor.egg-toolbars.model.c: (impl_add_item):

	Func is gboolean impl_add_item, so use g_return_val_if_fail instead
	of g_return_if_fail.
	Add missing include for unlink().

2003-08-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_to_xml), (impl_add_item),
	(egg_toolbars_model_class_init), (egg_toolbars_model_toolbar_nth),
	(egg_toolbars_model_add_item):
	* libegg/toolbareditor/egg-toolbars-model.h:

	Allow to override add_item

2003-08-05  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_to_xml):

	Fix mem leak

2003-07-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(drag_data_received_cb):
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbar-editor.c: (parse_item_list):
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_to_xml), (safe_save_xml),
	(egg_toolbars_model_save), (toolbars_item_new), (free_item_node),
	(egg_toolbars_model_add_separator), (egg_toolbars_model_add_item),
	(parse_item_list), (impl_get_item_id), (impl_get_item_name),
	(impl_get_item_type), (egg_toolbars_model_class_init),
	(egg_toolbars_model_item_nth), (egg_toolbars_model_toolbar_nth),
	(egg_toolbars_model_get_item_id),
	(egg_toolbars_model_get_item_name),
	(egg_toolbars_model_get_item_type):
	* libegg/toolbareditor/egg-toolbars-model.h:
	* libegg/toolbareditor/test-toolbar.xml:

	Better costum items api. Make saving low disk safe
	and allow to specify a version.

2003-07-24  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* libegg/iconlist/eggiconlist.c: (egg_icon_list_paint_item):
	Don't use deprecated gdk-pixbuf code.

2003-07-13  Christian Persch  <chpe@cvs.gnome.org>

	* libegg/treeviewutils/eggtreemultidnd.c:
	(egg_tree_multi_drag_button_press_event):

	Fix mem leak.

2003-07-03  Kjartan Maraas  <set EMAIL_ADDRESS environment variable>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_read_raw): Use g_string_new (NULL) not "".
	* libegg/treeviewutils/eggcellrendererkeys.c:
	(egg_cell_renderer_keys_set_accelerator): Fix a leak.

2003-07-03  Ross Burton  <ross@burtonini.com>

	* libegg/iconlist/eggiconlist.c:
	Draw the rubberband using theme colours instead of hard-coded
	colours. Uses the same style properties as Nautilus for extra
	goodness.

Sun Jun 29 20:26:14 2003  Soeren Sandmann  <sandmann@daimi.au.dk>
	Fourth and final round of fixes suggested by Owen
	
	* libegg/toolbar/eggtoolitem.c
	(egg_tool_item_set_proxy_menu_item): handle the case where the new
	menu item is the same as the old
	(egg_tool_item_real_set_tooltip): handle bin->child == NULL
	(egg_tool_item_create_menu_proxy): just return FALSE when there is
	nothing to do
	(egg_tool_item_size_request): check for VISIBLE, and don't read
	un-initialized memory

	* libegg/toolbar/eggtoolbutton.h: remove duplicated
	egg_set_icon_set
	
	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_set_stock_id): Make sure it works when the new
	string is a substring of the old.
	(egg_tool_button_set_label): Make sure it works when the new
	string is a substring of the old.
	(egg_tool_button_size_request): check for VISIBLE, and don't read
	un-initialized memory

	* libegg/toolbar/eggtoolbar.c
	(egg_toolbar_arrow_button_press): Make it the default handler
	instead of a connected handler
	(egg_toolbar_size_request): when showing arrow don't request space
	for pack end items, since they can be overflowed as well

	* libegg/toolbar/eggtoggletoolbutton.c (menu_item_activated): Add
	comments about how the button/menu item activation works

Sun Jun 29 15:41:57 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_focus): Add comments
	and fix bug where focusing in would only try the first mapped
	child.

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_focus_ends): use the
	right directions for gtk_widget_child_focus()

	* libegg/toolbar/eggtoggletoolbutton.c: remove finalizer

2003-06-29  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c: (create_item):
	
	Do not try to find action for separators

Sun Jun 29 00:03:35 2003  Soeren Sandmann  <sandmann@daimi.au.dk>
	Second round of fixes suggested by Owen
	
	* libegg/toolbar/*.h: add /* signal[s] */ comments as appropriate
	
	* libegg/toolbar/eggtoggletoolbutton.c (menu_item_activated): use
	gtk_check_menu_is_active();

	* libegg/toolbar/eggtoolbutton.c: formatting fixes

	* libegg/toolbar/eggtoolbar.c
	(find_drop_pos): use get_internal_padding
	(egg_toolbar_size_request): do
	(egg_toolbar_size_allocate): do
	(egg_toolbar_size_allocate): Iterate backwards instead of
	reversing the list.
	(get_internal_padding): new function

	* libegg/toolbar/eggtoolitem.c remove macros apio and apin
	(egg_tool_item_size_allocate):
	(egg_tool_item_size_allocate):
	(egg_tool_button_size_request):
	(egg_tool_button_size_allocate): be consistent about how we handle
	bin->child.
	(egg_toolbar_size_request): remove superfluous setting of long_req
	(egg_tool_item_size_allocate): remove unnecessary
	GTK_WIDGET_REALIZED()
	(egg_tool_item_init): initialize expand to FALSE for consistency
	with homogeneous

Sat Jun 28 19:36:22 2003  Soeren Sandmann  <sandmann@daimi.au.dk>
	First round of fixes suggested by Owen

	* libegg/toolbar/eggtoolitem.c
	(egg_tool_item_set_proxy_menu_item): ref/sink the menu item
	(egg_tool_item_create_menu_proxy): move ref/sink to
	egg_tool_item_set_proxy_menu_item()
	(egg_tool_item_real_set_tooltip): Use boolean_handled_accumulator
	(egg_tool_item_parent_set): new function that just emits the
	"reconfigured" signal.

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_set_label_widget): ref/sink the label widget
	(egg_tool_button_set_icon_widget): ref/sink the icon widget
	(egg_tool_button_create_menu_proxy): move ref/sink to
	egg_tool_item_set_proxy_menu_item
	(egg_tool_button_parent_set):remove this function.

	* libegg/toolbar/eggtoolbar.h: deprecate egg_toolbar_set_style(),
	egg_toolbar_set_icon_size() and egg_toolbar_unset_style()

	* libegg/toolbar/eggtoolbar.c 
	(egg_toolbar_append): remove
	(egg_toolbar_prepend): remove
	(toolbar_item_visible): Fix bug where separators were not shown in old API mode

	* libegg/toolbar/eggtoolbar.c
	(egg_toolbar_focus_ends): combine focus_home/focus_end into this
	function.

	* libegg/toolbar/eggtoggletoolbutton.c
	(egg_toggle_tool_button_create_menu_proxy): move ref/sink to
	egg_tool_item_set_proxy_menu_item
	
	* libegg/toolbar/eggradiotoolbutton.c 
	(egg_radio_tool_button_new_with_stock_from_widget): new function
	(egg_radio_tool_button_new_from_widget): new function

2003-06-28  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c: (create_item):

	Emit the action request signal before using the action

2003-06-28  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(set_item_drag_source):

	Fix error with gcc 2.95

2003-06-25  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(set_item_drag_source), (create_item),
	(egg_editable_toolbar_set_edit_mode):

	Set/unset item drag source on edit mode changes

Thu Jun 12 03:23:39 2003  James M. Cape  <jcape@ignore-your.tv>

	* libegg/tray/eggtrayicon.c: (egg_tray_icon_get_orientation_property):
	use union to avoid gcc -fstrict-aliasing warning.

Sun Jun  8 17:09:43 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_construct_contents): don't change images passed
	in by the user

Sun Jun  8 15:18:28 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/TODO: updates

	* libegg/toolbar/eggtoolbar.c: Replace the macro TOOL_ITEM_VISIBLE
	with a function. When in OLD_API mode, igore EggToolItems where
	the bin child is hidden. This makes it possible to add a widget to
	the toolbar, then call gtk_widget_hide() on it.

Sat Jun  7 17:12:11 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate): use
	gtk_widget_set_child_visible() instead of map()/unmap()

Sat Jun  7 15:55:19 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_move_focus): always
	gobble arrow key presses within the toolbar.

Sat Jun  7 15:34:20 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate): don't
	show arrow when priv->show_arrow is FALSE.
	
Sat Jun  7 15:12:44 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/TODO: updates

	* libegg/toolbar/eggtoolbar.c: Keyboard navigation fixes; add
	bindings for Ctrl TAB.

Sat Jun  7 12:35:33 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolitem.c: Reserve space for x/y thickness
	(don't put child over bevel)

	* libegg/toolbar/eggtoolbutton.c: Reserve space for
	x/y-thickness (put child over bevel).

Sat Jun  7 00:01:39 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_move_focus,
	egg_toolbar_focus_end, egg_toolbar_focus_home): don't try to focus
	overflow items.

Thu Jun  5 23:59:31 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_forall): make this
	function not depend on whether we are in new or old API mode

	* libegg/toolbar/eggtoolbar.h: add EggToolbarSpaceStyle

	* libegg/toolbar/eggtoolbar.c: add GTK_DISABLE_DEPRECATED

Thu Jun  5 21:47:12 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_prepend): give this
	function the right name. Add warnings when you use old API
	together with new API

	(egg_toolbar_forall): make this function depend on whether we are
	in old or new API mode

	(egg_toolbar_reconfigured): formatting fix

2003-06-05  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(toolbar_changed_cb), (egg_editable_toolbar_set_model):
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_set_flags), (egg_toolbars_model_class_init):
	* libegg/toolbareditor/egg-toolbars-model.h:

	Add a flag to force icons only toolbars.

Wed Jun  4 14:35:01 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c
	(egg_toolbar_internal_insert_element): gtk_widget_show() the icon
	widget. Applications depend on the toolbar showing the items for
	them.

Sun May 25 02:28:00 2003  Sebastian Rittau <srittau@jroger.in-berlin.de>

	* libegg/datetime/*: Added a proposal for a new date/time widget.
	See libegg/datetime/ChangeLog for any further changes.
	* configure.in: Added libegg/datetime/Makefile.
	* libegg/Makefile.am: Added libegg/datetime to SUBDIRS.

Sat May 24 15:49:42 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c
	(egg_toolbar_internal_insert_element): gtk_widget_show() the new
	item. We can't be sure the application calls show_all().

Sat May 24 02:42:37 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolitem.c
	(egg_tool_item_set_proxy_menu_item): Formatting fixes

	* libegg/toolbar/eggseparatortoolitem.c
	(egg_separator_tool_item_init): remove this. It was a noop.
	formatting fixes.

	* libegg/toolbar/eggtoggletoolbutton.c
	(egg_toggle_tool_button_new_from_stock): don't use_underline for
	stock_items. (It's done automatically)

	* libegg/toolbar/eggradiotoolbutton.c (egg_radio_tool_button_new_from_stock):
	ditto, Add g_return_if_fail()

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_get_n_items,
	egg_toolbar_get_nth_item): don't use EGG_TOOLBAR_GET_PRIVATE()
	before g_return_if_fail(). 
	(toolbar_add_child): remove this function.
	(egg_toolbar_remove_space): implement this function.
	Formatting fixes

	* libegg/toolbar/TODO: updates

Wed May 21 18:50:15 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c
	(egg_toolbar_internal_insert_element): gtk_widget_show() the
	label_widget so items will get text even when they are added in
	compatibility mode.

Tue May 20 12:52:31 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_create_menu_proxy): make sure connection to
	MenuItem::activate is removed when the tool item is destroyed

Tue May 20 12:28:53 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/TODO: update

	* libegg/toolbar/eggtoggletoolbutton.c
	(egg_toggle_tool_button_create_menu_proxy): make sure connection
	to MenuItem::activate is removed when the tool item is destroyed.

Tue May 20 00:49:57 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/egg{toggle,}toolbutton.c respect "use_underline"

Mon May 19 23:10:46 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbutton.[ch]
	(_egg_tool_button_get_label_text): get rid of this function.

	* libegg/toolbar/eggtoolbutton.c (egg_tool_button_create_menu_proxy): 
	make sure menu items get mnemonics
	
	* libegg/toolbar/eggtoggletoolbutton.c
	(egg_toggle_tool_button_create_menu_proxy): ditto

	* TODO: updates

Mon May 19 22:16:44 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_construct_contents): make button update proxy
	menu items when it changes.

	* libegg/toolbar/TODO: updates

Mon May 19 21:44:18 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolitem.c (egg_tool_item_finalize): add this
	function. Unref proxy menu item if it exists.

Sat May 10 00:42:32 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolitem.c, eggtoolbutton.c,
	eggtoggletoolbutton.c: use a #define for the menu id's

Fri May  9 18:37:58 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoggletoolbutton.c, eggtoolitem.c,
	eggtoolbutton.c: make menu_id's #defines.

Fri May  9 17:25:54 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolitem.[ch]: new set/get proxy_menu_item
	API.
	
	* libegg/toolbar/eggtoolbar.c: update for new menu item
	API. Don't destroy menu items when the menu is deactivated

	* libegg/toolbar/eggtoggletoolbutton.c: update to use new
	set/get_proxy_menu_item

	* libegg/toolbar/eggtoolbutton.c: ditto

	* libegg/toolbar/eggseparatortoolitem.c: get rid of
	create_menu_proxy(). It is already handled by
	EggToolItem::create_menu_proxy().

	* libegg/toolbar/TODO: updates

Thu May  8 00:48:56 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolitem.h: Make it compile again

Thu May  1 17:41:58 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_construct_contents): only show widgets that we
	just created.

2003-05-05  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(popup_toolbar_context_menu_cb), (toolbar_added_cb):
	* libegg/toolbareditor/egg-toolbar-editor.c:
	(egg_toolbar_editor_get_type), (egg_toolbar_editor_new),
	(setup_editor):
	* libegg/toolbareditor/egg-toolbar-editor.h:
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_add_toolbar), (parse_toolbars):
	* libegg/toolbareditor/egg-toolbars-model.h:
	* libegg/toolbareditor/test-toolbar-editor.c: (edit):

	Make toolbar editor a box. More flexible.

2003-05-04  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c: 

	Make sure items are sensitive when inserting them in the toolbar.

2003-04-30  David Bordoley  <bordoley@msu.edu>

	* libegg/toolbareditor/egg-editable-toolbar.c: (create_item),
	(fake_expose_widget), (new_pixbuf_from_widget), (new_separator_pixbuf),
	(update_separator_image), (style_set_cb), 
	(_egg_editable_toolbar_new_separator_image):
	* libegg/toolbareditor/egg-editable-toolbar.h:

	Generate an GtkImage for the separator icon, and use it for the
	drag icon.

	* libegg/toolbareditor/egg-toolbar-editor.c: (editor_create_item),
	(update_editor_sheet):

	Set an image for the separator in the editor window and for the 
	drag icon.

2003-04-29  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c: (create_toolbar),
	(egg_editable_toolbar_set_edit_mode):
	* libegg/toolbareditor/test-toolbar-editor.c: (editor_destroy_cb),
	(edit), (main):

	Make sure all items are sensitive when entering edit mode, restore
	states on exit.

Mon Apr 28 18:44:36 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_construct_contents): show label and icon widgets

Mon Apr 28 18:21:30 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* TODO: updates

	* libegg/toolbar/eggtoolbar.c
	(egg_toolbar_internal_insert_element): use new label_widget
	property instead of toolbutton->label.

	* libegg/toolbar/eggtoggletoolbutton.c
	(egg_toggle_tool_button_create_menu_proxy): use
	_egg_tool_button_get_label_text() instead of gtk_label_get_text().
	
	* libegg/toolbar/eggtoolbutton.c
	New label_widget property.

	Remove egg_tool_button_show_all() function

	Properties are now interpreted like this:

	      - icon_set and icon_widget are mutually exclusive.

	      - if the tool button has an icon_set or an icon_widget,
	        these will be used as icons. Otherwise, if the tool button
	        has a stock id, the corresponding stock icon will be
	        used. Otherwise, the tool button will not have an icon.

	      - if the tool button has a label widget then that widget
		will be used as label. Otherwise, if the tool button has
		a label text, that text will be used as label. Otherwise,
		if the toolbutton has a stock id, the corresponding text
		will be used as label. Otherwise, the toolbutton will
		have an empty label.

	      - the use_underline property means that underlines in the
		label property are "elided".
	
	(egg_tool_button_construct_contents): new function. Use this
	function in getters and setters and when the toolbutton is
	otherwise reconfigured.

	(_egg_tool_button_get_label_text): new function

Sun Apr 27 14:11:40 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/TODO: updates

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate): fix
	event window geometry

	* libegg/toolbar/eggtoolbutton.c: fix use_underline setter

2003-04-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(popup_toolbar_context_menu_cb), (create_item), (toolbar_added_cb),
	(item_removed_cb), (egg_editable_toolbar_construct),
	(egg_editable_toolbar_class_init):
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbar-editor.c:
	(editor_drag_data_received_cb), (egg_toolbar_editor_init),
	(egg_toolbar_editor_add_action), (egg_toolbar_editor_load_actions):
	* libegg/toolbareditor/egg-toolbars-model.c:
	(toolbars_toolbar_new), (egg_toolbars_model_get_flags),
	(egg_toolbars_model_set_flags),
	(egg_toolbars_model_remove_toolbar):
	* libegg/toolbareditor/egg-toolbars-model.h:

	Add a way to set toolbars flags and a flag to not allow
	toolbar removal.
	New action_request signal. Editable toolbar fires it before
	searching EggMenuMerge for an action.
	Ensure toolbar minimal size for empty toolbars.

2003-04-27 Dave Bordoley <bordoley@msu.edu>
	   Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c: (remove_toolbar_cb),
	(popup_toolbar_context_menu_cb):
	* libegg/toolbareditor/egg-toolbar-editor.c:
	(egg_toolbar_editor_new):
	* libegg/toolbareditor/egg-toolbar-editor.h:
	* libegg/toolbareditor/test-toolbar-editor.c: (edit):

	Add a parent window argument to the editor.
	Fix remove toolbar context menu.

2003-04-25  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-toolbars-model.c:

	Allow to pass -1 as add_item position.

Fri Apr 25 18:43:32 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_unset_icon_size):
	remove left-over g_print()
	* libegg/toolbar/eggtoolbar.c (egg_toolbar_drag_motion): don't
	both raise and show priv->drag_highlight
	* libegg/toolbar/eggtoolbar.c (egg_toolbar_map): new function. call
	gdk_window_show_unraised() on the event_window
	* libegg/toolbar/eggtoolbar.c (egg_toolbar_unmap): new function:
	call gdk_window_hide() on the event window
	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate): resize
	the event window.

2003-04-25  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(drag_data_received_cb), (remove_toolbar_cb),
	(popup_toolbar_context_menu_cb), (create_toolbar),
	(toolbar_added_cb), (toolbar_removed_cb), (item_added_cb),
	(item_removed_cb), (egg_editable_toolbar_set_model),
	(egg_editable_toolbar_construct), (egg_editable_toolbar_hide),
	(egg_editable_toolbar_set_drag_dest):
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbar-editor.c:
	(editor_drag_data_received_cb), (editor_drag_data_delete_cb),
	(editor_add_toolbar), (editor_create_item), (update_editor_sheet),
	(model_has_action), (egg_toolbar_editor_load_actions):
	* libegg/toolbareditor/egg-toolbars-group.c:
	* libegg/toolbareditor/egg-toolbars-group.h:
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_add_item), (impl_add_item),
	(egg_toolbars_model_class_init),
	(egg_toolbars_model_remove_toolbar):
	* libegg/toolbareditor/egg-toolbars-model.h:
	* libegg/toolbareditor/test-toolbar.xml:

	Misc bugfixes. This should be back to be more or less usable now.
	Yay !

Fri Apr 25 16:22:26 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/TODO: update

	* libegg/toolbar/eggtoolitem.[ch]: remove signals set_orientation,
	set_icon_size, set_relief_style and set_toolbar_style.

	* libegg/toolbar/eggtoolitem.h: remove fields icon_size,
	orientation and style from struct EggToolItem.
	
	* libegg/toolbar/test-toolbar.c (main): connect to
	"GtkOptionMenu::changed" after the items have been added to avoid
	bogus "changed" events.

	* libegg/toolbar/eggtoolbutton.c
	Add new signal toolbar_reconfigured.
	(egg_tool_button_reconfigured): new function 
	(egg_tool_button_parent_set): new function
	(egg_tool_button_set_stock_id)
	Add g_return_if_fail (stock_id != NULL);
	(egg_tool_button_set_orientation, egg_toolbutton_set_icon_size,
	egg_toolbutton_set_relief_style,
	egg_toolbutton_set_toolbar_style): remove these function
	- use toolbar_reconfigured/parent_set signals instead

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_init): initialize
	toolbar->icon_size.
	(egg_toolbar_reconfigured): add this function to emit the
	ToolItem::toolbar_reconfigured signal on the tool items
	(egg_toolbar_real_orientation_changed,
	egg_toolbar_real_style_changed, egg_toolbar_update_button_relief,
	egg_toolbar_set_icon_size): use egg_toolbar_reconfigured()
	(egg_toolbar_insert): don't reconfigure the item (it will figure
	it out from the parent_set signal)

Thu Apr 24 17:22:33 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.[ch] (egg_toolbar_get_relief_style): 
	Add this function

	* libegg/toolbar/eggtoolitem.[ch] (egg_tool_item_get_relief_style,
	egg_tool_item_get_toolbar_style, egg_tool_item_get_orientation,
	egg_tool_item_get_icon_size): Add these functions.

2003-04-24  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	* libegg/toolbareditor/egg-editable-toolbar.h:

	Fixes.

	* libegg/toolbareditor/egg-toolbar-editor.c:
	* libegg/toolbareditor/egg-toolbar-editor.h:

	Implement the editor.

	* libegg/toolbareditor/test-toolbar-editor.c: (edit), (main):
	* libegg/toolbareditor/test-toolbar.xml:

	Use it.

2003-04-23  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(drag_data_received_cb), (drag_data_delete_cb), (create_item),
	(item_added_cb), (item_removed_cb),
	(egg_editable_toolbar_set_model), (egg_editable_toolbar_construct),
	(egg_editable_toolbar_init), (egg_editable_toolbar_set_edit_mode),
	(egg_editable_toolbar_show):
	* libegg/toolbareditor/egg-toolbars-model.c:
	(egg_toolbars_model_add_separator), (egg_toolbars_model_add_item),
	(egg_toolbars_model_class_init), (egg_toolbars_model_remove_item):
	* libegg/toolbareditor/egg-toolbars-model.h:

	More editable implementation and some model bugfixes.

2003-04-23  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	* libegg/toolbareditor/egg-editable-toolbar.h:

	Partial implementation

	* libegg/toolbareditor/egg-toolbars-model.c:

	Implemented.

	* libegg/toolbareditor/test-toolbar-editor.c:
	* libegg/toolbareditor/test-toolbar.xml:

	Update to new api.

2003-04-22 Biswapesh Chattopadhyay <biswapesh_chatterjee@tcscal.co.in>
	* libegg/dock/egg-dock-master.c: Ported Gustavo's fixes from GDL.
	* libegg/dock/test-dock.c: Load saved layout at startup.

2003-04-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-toolbar-editor.h:
	* libegg/toolbareditor/egg-toolbars-model.h:

	New design

Mon Apr 21 16:11:48 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolitem.c: add
	default implmentation of set_tooltip.

	* libegg/toolbar/eggtoolbutton.c: remove default implmentation of
	set_tooltip.

	* libegg/toolbar/eggtoolbar.c
	(egg_toolbar_internal_insert_element): only connect to "clicked"
	when the new element is a button

	(egg_toolbar_set_show_arrow): s/button/arrow_button/

2003-04-21 Biswapesh Chattopadhyay <biswapesh_chatterjee@tcscal.co.in>
	* libegg/dock/layout.glade: Added missing file.

2003-04-21  Matthias Clasen  <maclas@gmx.de>

	* libegg/dock/test-dock.c (main): If the environment variable
	TEXT_DIR_RTL is set, switch to RTL mode (for testing).

	* libegg/dock/egg-dock-tablabel.c (egg_dock_tablabel_size_allocate): 
	(egg_dock_tablabel_paint): 
	(egg_dock_tablabel_button_event): 
	* libegg/dock/egg-dock-notebook.c (egg_dock_notebook_instance_init): 
	(egg_dock_notebook_set_orientation): 
	* libegg/dock/egg-dock-item.c (egg_dock_item_size_allocate): 
	(egg_dock_item_button_changed): Support automatic flipping for RTL
	text direction. 

Sun Apr 20 16:37:34 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/TODO: updates

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_get_n_items,
	egg_toolbar_get_nth_item): add these functions. Remove
	egg_toolbar_get_tool_items().

	(struct EggToolbarPrivate): remove max_child_height/width

	(egg_toolbar_size_request): don't request space for invisible
	items. Don't request space for an arrow if it takes more space
	than the items it would replace
	
	Add declaration of egg_toolbar_remove_tool_item()

Sun Apr 20 14:10:13 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/TODO: updates

	* libegg/toolbar/eggtoolitem.[ch],
	libegg/toolbar/eggtoolbutton.[ch], (struct _EggToolItemClass):
	move "clicked" signal from EggToolItem to EggToolButton

	* libegg/toolbar/eggtoolbar.[ch]: made
	egg_toolbar_remove_tool_item() a private function

	* libegg/toolbar/eggtoggletoolbutton.[ch]: remove
	egg_toggle_tool_button()

2003-04-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c: (hide_toolbar),
	(show_toolbar), (egg_editable_toolbar_show),
	(egg_editable_toolbar_hide):
	* libegg/toolbareditor/egg-editable-toolbar.h:

	Add show/hide api.

Sat Apr 19 21:25:53 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbutton.[ch]: add
	getters/setters (label, use_underline, stock_id, icon_set)
	
	(egg_tool_button_set_toolbar_style): fix formatting problems

Sat Apr 19 15:46:51 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolitem.[ch]: add
	egg_tool_item_get/set_visible_horizontal/vertical().  remove
	PROP_ORIENTATION

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate):
	simplyfy this function, position pack_end items in the correct
	order, reserve right amount of space for arrow

Sat Apr 19 14:54:43 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c, eggtoolitem.[ch], test-toolbar.c:
	s/expandable/expand/

Sat Apr 19 14:28:09 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c, libegg/toolbar/eggtoolitem.c: Make
	expandable/homogeneous/pack_end child_properties

Fri Apr 18 21:20:10 2003  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelfilter.c
	(egg_tree_model_filter_refilter): don't check if filter->root
	exists, which doesn't make sense. Pointed out by Charles
	Schmidt.

2003-04-17 Biswapesh Chattopadhyay <biswapesh_chatterjee@tcscal.co.in>
	* libegg/dock/*, libegg/util/egg-macros.h, configure.in,
	libegg/util/eggmarshallers.list, Makefile.am, libegg/Makefile.am:
	New docking widget.

Wed Apr 16 20:58:45 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate): make
	EggToolbar a NO_WINDOW widget again. Add an input-only event window

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate): never
	allow separator items to expand

	* libegg/toolbar/TODO: updates

2003-04-16  Dave Bordoley <bordoley@msu.edu>

	* libegg/toolbareditor/egg-editable-toolbar.c: (setup_editor),
	(elide_underscores), (editor_create_item), (update_editor_sheet):

	Better label for add toolbar button as suggested by Seth.
	Do not put underscores in items titles in the editor.

2003-04-16  Alexander Larsson  <alexl@redhat.com>

	* libegg/screen-exec/egg-screen-exec.c (egg_screen_execute_command_line_async):
	Don't run all commands in $home.

Wed Apr 16 02:30:11 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/TODO: updates

	* libegg/toolbar/eggtoolitem.h (struct _EggToolItem): add
	overflow_item bit.

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate):
	rewrite this function, make expandable pack_end items work, make
	it work in the RTL + vertical case, make overflow-ness a property of
	the items.

	* libegg/toolbar/test-toolbar.c (main): add commented out
	gtk_widget_set_default_direction (GTK_TEXT_DIR_RTL)

2003-04-15  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c:
	(connect_toolbar_drag_source), (disconnect_toolbar_drag_source),
	(popup_toolbar_context_menu), (egg_editable_toolbar_init),
	(egg_editable_toolbar_finalize), (editor_close),
	(egg_editable_toolbar_edit):

	Fix toolbar dragging, use gtk for context menus so I dont
	need to install xml files.

2003-04-15  Mark McLoughlin  <mark@skynet.ie>

	* libegg/tray/eggstatusicon.[ch]: re-do to (partly)
	implement the latest API proposed on gtk-devel-list.
	Kinda crufty, though.

	* libegg/tray/teststatusicon.c: update.

	* libegg/util/eggmarshalers.list: add some marshallers.

Thu Apr 10 22:23:15 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/util/Makefile.am: Add eggmarshalers.list to dependency
	list (patch from Owen Taylor)

	* doc/libegg.types: remove eggcellrendererpixbuf from this file

	* libegg/toolbar/TODO: Add this file

	* libegg/toolbar/test-toolbar.c (main): add property editor

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_request):
	Simplify. Fix bug where we unnecessarily requested space for the
	arrow.

	* libegg/toolbar/eggtoggletoolbutton.c (menu_item_activated): new
	function - fix problems where button toggles didn't propagate
	correctly

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_remove,
	egg_toolbar_add): make these functions work for non
	EggToolItems (for compatibility reasons)

2003-04-09  Mark McLoughlin  <mark@skynet.ie>

	Add new EggStatusIcon widget. Implement a orientation hint
	on the manager window - needs to be discussed for addition
	to the spec. Also make it possible to properly sub-class
	EggTrayIcon.

	* configure.in: add libgnomeui the trays dependancies.

	* libegg/tray/Makefile.am: build eggstatusicon.[ch].

	* libegg/tray/eggtrayicon.[ch]:
	(egg_tray_icon_class_init): add an "orientation" GObject
	read-only property.
	(egg_tray_icon_get_property): impl.
	(egg_tray_icon_get_orientation_property): read the orientation
	from the _NET_SYSTEM_TRAY_ORIENTATION property. Not in the spec
	yet.
	(egg_tray_icon_manager_filter): handle PropertyNotify.
	(egg_tray_icon_update_manager_window): select PropertyNotifys
	on the manager window and read the orientation from it.
	(egg_tray_icon_realize): get the manager window and dock on realize
	rather than doing it all in the constructor.
	(egg_tray_icon_new_for_xscreen), (egg_tray_icon_new_for_screen),
	(egg_tray_icon_new): impl the constructors using GtkWindow's
	"screen" and "title" propertys.
	(egg_tray_icon_get_orientation): add.

	* libegg/tray/eggtraymanager.[ch]:
	(egg_tray_manager_class_init): add an "orientation" GObject
	property.
	(egg_tray_manager_set_property),
	(egg_tray_manager_get_property): impl.
	(egg_tray_manager_set_orientation_property): set the 
	_NET_SYSTEM_TRAY_ORIENTATION property on the manager window.
	(egg_tray_manager_manage_xscreen): intern the atom.
	(egg_tray_manager_set_orientation),
	(egg_tray_manager_get_orientation): add.

	* libegg/tray/eggstatusicon.[ch]: first attempt at a sane
	API for actual icons. Not a great attempt, though.

	* libegg/tray/teststatusicon.c: test program.

2003-04-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-toolbars-group.c: (remove_action),
	(egg_toolbars_group_remove_action):
	* libegg/toolbareditor/egg-toolbars-group.h:

	Add a way to remove an action from the toolbar

2003-04-06  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/egg-editable-toolbar.c: (get_dest_targets),
	(editor_create_item), (update_editor_sheet):

	Add a separator item to the editor.

Sat Apr  5 13:30:28 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.[ch]: rename
	append_tool_item/insert_tool_item/prepend_tool_item
	append/insert/prepend.

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_class_init): add
	commented out child properties.

	* libegg/toolbar/eggtoolitem.c, libegg/toolbar/eggtoolbutton.c,
	libegg/toolbar/eggtoolbar.c, libegg/toolbar/eggtoolbar.c: add
	g_return_if_fail() guards.

Sat Apr  5 12:18:59 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbutton.c (egg_tool_button_get_property):
	indentation fix

	* libegg/toolbar/eggtoolitem.c
	(egg_tool_item_set_use_drag_window): Fix boolean setters

	* libegg/toolbar/eggtoolitem.c (egg_tool_item_map): don't both
	raise and show.

	* libegg/toolbar/eggtoolbar.h: guard headers that are included
	only for compatibility with #ifndef GTK_DISABLE_DEPRECATED

Sat Apr  5 11:31:43 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoggletoolbutton.c: Make
	sure toggle items toggle their menu items.

Sat Apr  5 01:27:32 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* eggtoggletoolbutton.c, eggtoolbar.c, eggtoolbar.h,
	eggtoolbutton.c, eggtoolitem.c: Add keyboard navigation,
	various minor fixes.

2003-04-05  Marco Pesenti Gritti  <marco@it.gnome.org>

	* libegg/toolbareditor/Makefile.am:
	* libegg/toolbareditor/egg-editable-toolbar.c:
	(drag_data_received_cb), (disconnect_item_drag_source),
	(get_dest_targets), (setup_toolbar), (egg_editable_toolbar_init),
	(egg_editable_toolbar_finalize), (egg_editable_toolbar_edit),
	(egg_editable_toolbar_add_drag_type):
	* libegg/toolbareditor/egg-editable-toolbar.h:

	Api to add custom drag types.
	Unset drag sources when the editor is closed. (thanks to Christian Persch)

Fri Apr  4 18:55:42 2003  Soeren Sandmann  <sandmann@daimi.au.dk>

	* doc/Makefile.am (CFILE_GLOB, HFILE_GLOB): use $(wildcard ...

	* libegg/toolbar/eggtoolbar.c: Fix leak of overflow menu.

2003-04-02  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelunion.[ch]: implement the code
	to allow/handle TreeModels with childs.

	* libegg/treeviewutils/test-union.c: updated -- still need to
	defuckify.

2003-04-01  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:

	Add EGG_XML_* to be able to use libxml in toolbareditor.
	This is just temporary, we will use gmarkup once we
	design a better way to persist user changes.

	* libegg/toolbareditor/Makefile.am:
	* libegg/toolbareditor/egg-editable-toolbar.c:
	* libegg/toolbareditor/egg-editable-toolbar.h:
	* libegg/toolbareditor/egg-toolbars-group.c:
	* libegg/toolbareditor/egg-toolbars-group.h:

	Initial toolbar editor implementation.

	* libegg/toolbareditor/test-toolbar-editor.c:
	* libegg/toolbareditor/test-toolbar.xml:

	Test for the toolbar editor.

2003-03-31  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelfilter.c
	(egg_tree_model_filter_row_inserted): update offsets before finding
	an index for the new FilterElt. Fixes inserting new items at path
	".*0$". (Testcase provided by Charles Schmidt).

2003-03-29  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelfilter.c: added doc comments.

2003-03-28  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelfilter.c
	(egg_tree_model_filter_build_level): was putting the number of nodes
	in the level in root_level_visible here, but of course that should be
	the number of *visible* nodes. Doh.

2003-03-27  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/eggtoolbar.c (find_drop_pos): don't use
	EGG_TOOL_ITEM_VISIBLE() to check if the tool item is visible.  It
	didn't do what I wanted it to.

2003-03-27  Ross Burton  <ross@burtonini.com>

	* libegg/fileselector/Makefile.am: Updated for Kris' last commit.

2003-03-25  Kristian Rietveld  <kris@gtk.org>

	Got rid of the multiple copies of EggTreeModelFilter. We only have
	one here now.

	* libegg/combo/eggtreemodelfilter.[ch]: removed.

	* libegg/combo/Makefile.am: pull in treeviewutils, remove local
	copy of EggTreeModelFilter.

	* libegg/treeviewutils/Makefile.am: pull in utils for eggintl.h

	* libegg/treeviewutils/eggtreemodelfilter.c: clean up, small bug
	fix for not crashing in _iter_children when there is am empty
	array.

2003-03-25  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/test-drag.c (main): add the input only drag
	window over the toolitems, and add a GtkEntry tool item to
	demonstrate.

	* libegg/toolbar/eggtoolitem.[ch]: add a "use_drag_window"
	attribute, which adds an input only window over the top of the
	child widget, for use when doing DnD.

2003-03-25  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelunion.[ch]: yay, a new treemodel.

	* libegg/treeviewutils/test-union.c: and a testcase for an increased
	fun factor.

	* libegg/treeviewutils/Makefile.am: updates.

2003-03-19  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/test-drag.c: program to test DnD.  Still includes
	a few hacks ...

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_get_item_index): add
	implementation.

	* libegg/toolbar/eggtoolbar.h: add prototype for
	egg_toolbar_get_item_index().

2003-03-18  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/eggtoolbar.c (find_drop_pos): ignore hidden items
	when calculating the drop position.
	(egg_toolbar_drag_motion): use a child window to display the drag
	highlight.
	(egg_toolbar_drag_leave): hide the drag highlight.
	(egg_toolbar_unrealize): new unrealize handler that makes sure
	the drag highlight window gets destroyed.

2003-03-17  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/test-toolbar.c (main): some small modifications
	to test out the DnD highlighting features.

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_drag_motion): implement
	drawing of DnD drop highlight.
	(egg_toolbar_get_drop_index): new function to get the position in
	the toolbar for a drop.

Sat Mar 15 15:04:15 2003  Kristian Rietveld  <kris@gtk.org>

	* libegg/Makefile.am: remove the combo subdirectory for now, as it
	requires gtk+ patching in order to build it.

	* libegg/fileselector/eggfileselector.c: disable completion for now
	(am playing with the completion API).

Thu Mar  6 16:12:18 2003  Jonathan Blandford  <jrb@gnome.org>

	* libegg/column-chooser/test-tree-column.c (main): new test case.
	* libegg/column-chooser/eggcolumnmodel.h: Clean up.

2003-03-05  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_get_list):
	* libegg/toolbar/eggtoolbar.c: (egg_toolbar_get_tool_items):

	Return NULL instead of FALSE.  Fixes #107651.

2003-02-26  James Willcox  <jwillcox@gnome.org>

	* libegg/toolbar/eggtoolbar.c: (egg_toolbar_class_init),
	(egg_toolbar_init), (egg_toolbar_realize), (egg_toolbar_expose),
	(egg_toolbar_size_allocate), (egg_toolbar_style_set),
	(egg_toolbar_arrow_button_press), (egg_toolbar_button_press):
	* libegg/toolbar/eggtoolbar.h:

	Add a widget->window to the toolbar, so we can get button_press_event,
	do dnd stuff, etc.

2003-02-11  Havoc Pennington  <hp@redhat.com>

	* libegg/tray/eggtraymanager.c (egg_tray_manager_check_running):
	kill HAVE_GTK_MULTIHEAD here.
	(egg_tray_manager_unmanage): fix calling GDK_WINDOW_XDISPLAY()
	on a GtkInvisible. Caused notification area to crash on 
	shutdown.

2003-02-10  Matthias Clasen  <maclas@gmx.de>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate): 
	(menu_position_func): Mirror all allocations for RTL mode.
	(egg_toolbar_direction_changed): New function, toggles arrow 
	direction on text direction change.
	(egg_toolbar_real_orientation_changed): Take text direction into
	account when changing arrow direction.	

2003-02-01  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c: (egg_recent_model_read):

	Fix a small memory leak.

2003-01-31  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_changed):

	Disable monitoring the files in the list, for now, since it was
	interfering with ejecting CDs and stuff (grumble).  Fixes Red Hat
	bug #81777.

2003-01-15  Havoc Pennington  <hp@pobox.com>

	* libegg/tray/eggtraymanager.c: remove Linux indentation emacs
	magic since the file is GNU indented. Fix to drop window filter
	when the tray manager stops managing or is destroyed.

	* libegg/tray/eggtrayicon.c: apply patch from Kristian for
	#101467, fix some multihead mess, and kill off HAVE_GTK_MULTIHEAD
	(require GTK 2.2).

Sat Jan 25 18:49:30 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/toolbar/eggtoolbutton.c (egg_tool_button_set_property): show
	the icon if we set an icon.

2003-01-21  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-util.c: (load_icon_file):
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_init):
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_init):

	Enable SVG support in the views (doh!) and remove the rsvg stuff, since
	we can now use the pixbuf loader.

Tue Jan 14 18:10:45 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/recent-files/egg-recent-files-module.c: we need to sort
	on MRU.

Tue Jan 14 03:03:01 2002  Kristian Rietveld  <kris@gtk.org>

	Adding my recent-files:/// vfs module.

	* libegg/recent-files/egg-recent-files-module.c,
	libegg/recent-files/egg-recent-files-vfs.conf: new files

	* configure.in: check for gnome-vfs-module-2.0, added
	EGG_VFS_MODULE_{LIBS,CFLAGS}

	* libegg/recent-files/Makefile.am: add EGG_VFS_MODULE_CFLAGS to
	INCLUDES, add build info (and install target) for
	librecent-files.la.

2003-01-13  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_add_full):

	Add a little hack that disallows URIs starting with "recent-files://"
	from being added to the list.

2003-01-11  Johan Dahlin  <jdahlin@async.com.br>

	* libegg/toolbar/eggtoolbar.[ch] (egg_toolbar_get_tool_items): New function

2003-01-10  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_add_full): Remove "uri", which I was leaking
	and not even using anyway...

2003-01-05  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-util.c: (load_icon_file):

	Fix a signed/unsigned comparison for anal compilers.

2003-01-05  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-util.c: (load_pixbuf_svg),
	(load_icon_file), (egg_recent_util_get_icon):
	* libegg/recent-files/egg-recent-util.h:
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list), (egg_recent_view_bonobo_init),
	(egg_recent_view_bonobo_set_icon_size),
	(egg_recent_view_bonobo_get_icon_size):
	* libegg/recent-files/egg-recent-view-bonobo.h:
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_menu_item), (egg_recent_view_gtk_init),
	(egg_recent_view_gtk_set_icon_size),
	(egg_recent_view_gtk_get_icon_size):
	* libegg/recent-files/egg-recent-view-gtk.h:

	Implement {get,set}_icon_size for the views, and use this instead
	of the borked hardcoded icon size used previously.

2003-01-03  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/Makefile.am:
	* libegg/recent-files/egg-recent-item.c: (egg_recent_item_set_uri),
	(egg_recent_item_get_uri_for_display):
	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_update_item), (egg_recent_model_filter):
	* libegg/recent-files/egg-recent-vfs-utils.c:
	* libegg/recent-files/egg-recent-vfs-utils.h:
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_model), (egg_recent_view_bonobo_init):
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_set_model), (egg_recent_view_gtk_init):

	Use g_signal_connect_object in some places, and remove
	egg-recent-vfs-utils.[ch] as gnome-vfs should be fine now

Thu Jan  2 20:08:53 2002  Kristian Rietveld  <kris@gtk.org>

	Note: fileselector subdirectory needs a make clean, else it wont
	build correctly.

	* libegg/fileselector/Makefile.am: add libegg/combo subdir to
	INCLUDES, put eggentry.lo and eggtreemodelfilter.lo into
	libeggfileselector.la.

	* libegg/fileselector/eggfileselector.c: s/gtk_entry/egg_entry/,
	(egg_file_selector_init): hook up model to the entry and enable
	completion.

2003-01-01  Anders Carlsson  <andersca@codefactory.se>

	* libegg/toolbar/eggradiotoolbutton.c:
	(egg_radio_tool_button_get_type):
	* libegg/toolbar/eggradiotoolbutton.h:
	* libegg/toolbar/eggseparatortoolitem.h:
	* libegg/toolbar/eggtoggletoolbutton.c:
	(egg_toggle_tool_button_class_init), (egg_toggle_tool_button_init),
	(egg_toggle_tool_button_create_menu_proxy), (button_toggled),
	(egg_toggle_tool_button_toggled),
	(egg_toggle_tool_button_set_active),
	(egg_toggle_tool_button_get_active):
	* libegg/toolbar/eggtoggletoolbutton.h:
	* libegg/toolbar/eggtoolbar.c: (egg_toolbar_add),
	(egg_toolbar_remove), (egg_toolbar_new),
	(egg_toolbar_append_tool_item), (egg_toolbar_prepend_tool_item),
	(egg_toolbar_remove_tool_item):
	* libegg/toolbar/eggtoolbar.h:
	* libegg/toolbar/eggtoolbutton.c: (egg_tool_button_class_init),
	(egg_tool_button_init), (egg_tool_button_set_property),
	(egg_tool_button_get_property), (egg_tool_button_finalize),
	(egg_tool_button_show_all), (egg_tool_button_create_menu_proxy),
	(egg_tool_button_set_icon_size),
	(egg_tool_button_set_toolbar_style), (button_clicked):
	* libegg/toolbar/eggtoolbutton.h:
	* libegg/toolbar/eggtoolitem.c:
	* libegg/toolbar/eggtoolitem.h:
	Include file cleanups, and some other things.
	
2002-12-31  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c:
	(egg_file_selector_menu_item_with_stock), (egg_file_selector_init),
	(egg_file_selector_populate): started with the location drop-down menu

2002-12-31  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c: (egg_file_selector_error),
	(new_icon_list), (egg_file_selector_init),
	(egg_file_selector_refresh), (egg_file_selector_new_dir),
	(egg_file_selector_populate), (egg_file_selector_get_base_filter),
	(egg_file_selector_new), (egg_file_selector_set_select_multiple),
	(egg_file_selector_get_select_multiple),
	(egg_file_selector_filter_menu_activated),
	(egg_file_selector_add_choosable_filter),
	(egg_file_selector_set_filename), (egg_file_selector_get_filename),
	(egg_file_selector_get_filename_list):
	* libegg/filesystem/eggfilesystem-unix.c:
	(egg_file_system_unix_get_folder):
	* libegg/filesystem/eggfilesystem-vfs.c:
	(egg_file_system_vfs_get_folder): implement
	egg_file_system_unix_get_folder with EGG_FILE_SYSTEM_FOLDER_CURRENT,
	add more nearly all the GUI for the new directory button,
	some style and syntax fixes

2002-12-30  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c: (egg_file_selector_init),
	(egg_file_selector_new_dir), (egg_file_selector_populate):
	* libegg/filesystem/eggfilesystem.c:
	(egg_file_system_create_new_folder):
	* libegg/filesystem/eggfilesystem.h: started adding support for
	the new directory button, not finished (no implementation on the
	EggFileSystem side)

2002-12-30  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c:
	(egg_file_selector_set_filename):
	* libegg/fileselector/eggfileselector.h:
	* libegg/fileselector/testfileselector.c: (main):
	implement egg_file_selector_set_filename() and a testcase

2002-12-30  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c:
	(egg_file_selector_selection_changed), (egg_file_selector_init),
	(egg_file_selector_item_activated), (egg_file_selector_go_up),
	(egg_file_selector_populate),
	(egg_file_selector_set_select_multiple),
	(egg_file_selector_get_select_multiple),
	(egg_file_selector_set_confirm_stock),
	(egg_file_selector_filter_menu_activated),
	(egg_file_selector_add_choosable_filter),
	(egg_file_selector_get_filename),
	(egg_file_selector_get_filename_list):
	* libegg/fileselector/eggfileselector.h: move all the elements of
	the EggFileSelector struct to a private struct, no more poking

2002-12-30  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c:
	(egg_file_selector_get_filename),
	(egg_file_selector_get_filename_list):
	* libegg/fileselector/testfileselector.c: (main): changes to make
	the "Save" dialogs work as well

2002-12-30  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c:
	(egg_file_selector_add_choosable_filter),
	(egg_file_selector_get_filename),
	(egg_file_selector_get_filename_list):
	* libegg/fileselector/testfileselector.c: (show_selection), (main):
	* libegg/filesystem/eggfilesystem-unix.c:
	(egg_file_system_unix_file_system_init),
	(egg_file_system_unix_get_folder),
	(egg_file_system_unix_get_current_path):
	* libegg/filesystem/eggfilesystem-vfs.c:
	(egg_file_system_vfs_file_system_init),
	(egg_file_system_vfs_finalize), (egg_file_system_vfs_get_folder),
	(egg_file_system_vfs_get_current_path):
	* libegg/filesystem/eggfilesystem.c:
	(egg_file_system_item_get_current_path):
	* libegg/filesystem/eggfilesystem.h:
	make egg_file_selector_get_filename() and
	egg_file_selector_get_filename_list() do things, added and implemented
	egg_file_system_item_get_current_path interface
	The file selector is now usable although not complete

2002-12-30  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c:
	(egg_file_selector_get_filename): build fixes

2002-12-29  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/Makefile.am,
	libegg/treeviewutils/test-tree-utils.c: fix build

Sun Dec 29 16:26:19 2002  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/treeviewutils/eggtreemodelfilter.c: make it compile

2002-12-29  Anders Carlsson  <andersca@codefactory.se>

	* libegg/toolbar/Makefile.am:
	* libegg/toolbar/eggradiotoolbutton.c:
	(egg_radio_tool_button_init), (egg_radio_tool_button_new):
	* libegg/toolbar/eggradiotoolbutton.h:
	* libegg/toolbar/eggseparatortoolitem.c:
	* libegg/toolbar/eggtoggletoolbutton.c:
	(egg_toggle_tool_button_new),
	(egg_toggle_tool_button_new_from_stock):
	* libegg/toolbar/eggtoggletoolbutton.h:
	* libegg/toolbar/eggtoolbar.c: (egg_toolbar_init),
	(egg_toolbar_add), (egg_toolbar_insert_tool_item),
	(egg_toolbar_append_item), (egg_toolbar_prepend_item),
	(egg_toolbar_insert_item), (egg_toolbar_insert_stock),
	(egg_toolbar_append_space), (egg_toolbar_prepend_space),
	(egg_toolbar_insert_space), (egg_toolbar_append_widget),
	(egg_toolbar_prepend_widget), (egg_toolbar_insert_widget),
	(egg_toolbar_append_element), (egg_toolbar_prepend_element),
	(egg_toolbar_insert_element),
	(egg_toolbar_internal_insert_element):
	* libegg/toolbar/eggtoolbar.h:
	* libegg/toolbar/eggtoolbutton.c: (egg_tool_button_class_init),
	(egg_tool_button_set_property), (egg_tool_button_set_tooltip),
	(egg_tool_button_new_from_stock), (egg_tool_button_new),
	(egg_tool_button_set_icon_widget), (egg_tool_button_set_label):
	* libegg/toolbar/eggtoolbutton.h:
	* libegg/toolbar/eggtoolitem.c: (egg_tool_item_class_init),
	(egg_tool_item_set_homogeneous), (egg_tool_item_set_tooltip):
	* libegg/toolbar/eggtoolitem.h:
	* libegg/toolbar/test-toolbar.c: (main):
	* libegg/util/eggmarshalers.list:
	Make EggToolbar 100% GtkToolbar compatible, both API and ABI wise.
	
2002-12-29  Anders Carlsson  <andersca@codefactory.se>

	* libegg/toolbar/Makefile.am:
	* libegg/toolbar/eggradiotoolbutton.c:
	(egg_radio_tool_button_get_type),
	(egg_radio_tool_button_class_init), (egg_radio_tool_button_init),
	(egg_radio_tool_button_new_from_stock),
	(egg_radio_tool_button_get_group),
	(egg_radio_tool_button_set_group):
	* libegg/toolbar/eggradiotoolbutton.h:
	* libegg/toolbar/eggseparatortoolitem.c:
	* libegg/toolbar/eggtoggletoolbutton.c:
	* libegg/toolbar/eggtoggletoolbutton.h:
	* libegg/toolbar/eggtoolbar.c: (egg_toolbar_class_init),
	(egg_toolbar_init), (egg_toolbar_get_property),
	(egg_toolbar_expose), (egg_toolbar_size_request),
	(egg_toolbar_size_allocate), (egg_toolbar_focus),
	(style_change_notify), (icon_size_change_notify),
	(toolbar_get_settings), (egg_toolbar_screen_changed),
	(egg_toolbar_remove), (egg_toolbar_forall),
	(egg_toolbar_real_orientation_changed),
	(egg_toolbar_real_style_changed), (menu_position_func),
	(egg_toolbar_button_press), (egg_toolbar_update_button_relief),
	(egg_toolbar_insert_item), (egg_toolbar_set_orientation),
	(egg_toolbar_get_orientation), (egg_toolbar_set_style),
	(egg_toolbar_get_style), (egg_toolbar_unset_style),
	(egg_toolbar_set_tooltips), (egg_toolbar_get_tooltips),
	(egg_toolbar_set_icon_size), (egg_toolbar_get_icon_size),
	(egg_toolbar_unset_icon_size), (egg_toolbar_set_show_arrow),
	(egg_toolbar_get_show_arrow):
	* libegg/toolbar/eggtoolbar.h:
	* libegg/toolbar/eggtoolbutton.c: (egg_tool_button_class_init),
	(elide_underscores), (egg_tool_button_set_property),
	(egg_tool_button_set_orientation), (egg_tool_button_set_icon_size):
	* libegg/toolbar/eggtoolitem.c: (egg_tool_item_class_init):
	* libegg/toolbar/test-toolbar.c: (set_toolbar_style_toggled),
	(set_icon_size_toggled), (icon_size_history_changed), (main):
	Add new radio button item, general fixups. Make current API identical to
	the GtkToolbar one.
	
	2002-12-29  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodel.[ch]: remove the unstable warning,
	some updates to the property descriptions, removed the VERBOSE #ifdefs
	and their printfs, fixed a small bug, added root_level_visible
	optimization (really helps with long lists), and added a
	egg_tree_model_refilter function. Well that's about everything :P

2002-12-27  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggreorder.[ch]: remove, since gtk+ 2.2
	provides this functionality.

	* libegg/treeviewutils/eggnodestate.[ch]: remove, this is silly
	and useless.

2002-12-26  Anders Carlsson  <andersca@codefactory.se>

	* libegg/treeviewutils/Makefile.am:
	* libegg/treeviewutils/eggcellrendererpixbuf.c:
	* libegg/treeviewutils/eggcellrendererpixbuf.h:
	* libegg/treeviewutils/test-tree-utils.c:
	Remove EggCellRenderer pixbuf since gtk+ 2.2 provides that
	functionality now.
	
2002-12-03  Mark McLoughlin  <mark@skynet.ie>

	* libegg/screen-exec/egg-screen-exec.c:
	(egg_screen_exec_environment):
	* libegg/screen-exec/egg-spawn.c:
	(egg_make_spawn_environment_for_screen):
	fix screwup when envp doesn't already contain
	$DISPLAY. Pointed out by Havoc.

2002-12-01  Havoc Pennington  <hp@pobox.com>

	* libegg/treeviewutils/eggcellrendererkeys.c
	(egg_cell_renderer_keys_class_init): spell out Accelerator in
	"Accel Mode" #100040
	(egg_cell_renderer_keys_set_accelerator): remove debug spew

2002-11-18  Bastien Nocera  <hadess@hadess.net>

	* libegg/treeviewutils/eggcellrendererkeys.c: (grab_key_callback):
	fix little warning

2002-11-10  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c:
	(egg_file_selector_selection_changed),
	(egg_file_selector_item_activated),
	(egg_file_selector_get_select_multiple),
	(egg_file_selector_get_filename),
	(egg_file_selector_get_filename_list):
	* libegg/fileselector/eggfileselector.h:
	double clicking on a file will launch the action, clean up
	egg_file_selector_get_select_multiple, started implementing
	egg_file_selector_get_filename and egg_file_selector_get_filename_list

2002-11-10  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c: (init_columns),
	(egg_file_selector_selection_changed), (new_icon_list),
	(egg_file_selector_item_activated), (egg_file_selector_populate):
	make the entry depend on the selection, don't make double click on a
	file "visit" it (doesn't work, really, trust me), fix the icon usage,
	implement egg_file_selector_set_select_multiple
	* libegg/fileselector/testfileselector.c: (main):
	more tests

2002-11-10  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c: (new_icon_list),
	(egg_file_selector_set_select_multiple),
	(egg_file_selector_get_select_multiple):
	* libegg/fileselector/eggfileselector.h: added
	egg_file_selector_get_select_multiple, fixed new_icon_list

2002-11-10  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c: (new_icon_list),
	(egg_file_selector_get_base_filter), (egg_file_selector_new),
	(egg_file_selector_set_select_multiple):
	* libegg/fileselector/eggfileselector.h:
	* libegg/fileselector/testfileselector.c: (main): added
	egg_file_selector_new and egg_file_selector_set_select_multiple

2002-11-09  Bastien Nocera  <hadess@hadess.net>

	* libegg/filesystem/eggfilesystem-vfs.c:
	* libegg/filesystem/eggfilesystem-vfs.h: move the privately used
	includes to the .c

2002-11-09  James Willcox  <jwillcox@gnome.org>

	* libegg/filesystem/eggfilesystem-vfs.c:
	(egg_file_system_vfs_finalize), (egg_file_system_vfs_class_init),
	(show_hidden_changed), (egg_file_system_vfs_init),
	(egg_file_system_vfs_get_item_children),
	(egg_file_system_vfs_get_item_icon):
	* libegg/filesystem/eggfilesystem-vfs.h:

	Add a private section to EggFileSystemVfs, and move some stuff there.
	Also added a finalize handler.

2002-11-09  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/Makefile.am: remove all the iconlist stuff
	* libegg/fileselector/eggfileselector.c:
	* libegg/filesystem/eggfilesystem-vfs.c: (show_hidden_changed),
	(egg_file_system_vfs_init),
	(egg_file_system_vfs_get_item_children):
	* libegg/filesystem/eggfilesystem-vfs.h: respects nautilus' "show
	hidden files" preferences

2002-10-27  James Willcox  <jwillcox@gnome.org>

	* configure.in:
	* libegg/filesystem/Makefile.am:
	* libegg/filesystem/eggfilesystem-vfs.c:
	(egg_file_system_vfs_init), (egg_file_system_vfs_get_item_by_name),
	(egg_file_system_vfs_get_item_parent),
	(egg_file_system_vfs_get_item_description),
	(egg_file_system_vfs_get_item_icon),
	(egg_file_system_vfs_free_item):
	* libegg/filesystem/eggfilesystem-vfs.h:
	* libegg/filesystem/eggfilesystemutil.c:
	(path_represents_svg_image), (load_pixbuf_svg), (scale_icon),
	(load_icon_file), (egg_file_system_util_get_icon):
	* libegg/filesystem/eggfilesystemutil.h:

	Get the mime-type icon in the vfs filesystem.

2002-10-27  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/eggfileselector.c: (egg_file_selector_init),
	(egg_file_selector_populate): remove unused code paths, show folders
	first

2002-10-27  Bastien Nocera  <hadess@hadess.net>

	* libegg/fileselector/Makefile.am: upd
	* libegg/fileselector/eggfileselector.c: (init_columns),
	(new_icon_list), (egg_file_selector_init),
	(egg_file_selector_item_activated), (egg_file_selector_populate): uses
	the vfs filesystem by default now, and use a GtkTreeView, UI is nearly
	complete
	* libegg/filesystem/eggfilesystem-vfs.c: 
	(egg_file_system_vfs_item_is_root): fixed to actually work on all
	schemes

2002-10-27  Bastien Nocera  <hadess@hadess.net>

	* libegg/filesystem/eggfilesystem-vfs.c: fix a crash when trying to
	get the parent of the root directory, fix get_item_children (it
	"broke" just after "." and "..", it should have continued)

2002-10-27  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added gnome-vfs detection
	* libegg/filesystem/Makefile.am: upd
	* libegg/filesystem/eggfilesystem-vfs.c:
	* libegg/filesystem/eggfilesystem-vfs.h: added implementation of the
	EggFilesystem for gnome-vfs

2002-10-26  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-util.c:
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_menu_cb),
	(egg_recent_view_bonobo_get_type):
	* libegg/recent-files/egg-recent-view-bonobo.h:
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_menu_cb), (egg_recent_view_gtk_set_menu),
	(egg_recent_view_gtk_set_start_menu_item),
	(egg_recent_view_gtk_get_type):
	* libegg/recent-files/egg-recent-view-gtk.h:
	* libegg/recent-files/egg-recent-view.h:

	Fix a bunch of stupid macro names

2002-10-16  Mark McLoughlin  <mark@skynet.ie>

	* libegg/screen-exec/egg-screen-help.[ch]:
	  libegg/screen-exec/egg-screen-url.[ch]:
	Rename all functions to egg_...._on_screen() from
	egg_screen....(). Also, the gnome_...._with_env
	functions have gone into libgnome, so use them
	instead of great big wads of copied code.

2002-10-15  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c: (egg_recent_model_write),
	(egg_recent_model_open_file):
	* libegg/recent-files/egg-recent-util.c:
	(egg_recent_util_get_icon):
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list),
	(egg_recent_view_bonobo_set_tooltip_func):
	* libegg/recent-files/egg-recent-view-bonobo.h:
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_menu_item),
	(egg_recent_view_gtk_add_to_menu), (egg_recent_view_gtk_finalize),
	(egg_recent_view_gtk_init), (egg_recent_view_gtk_set_tooltip_func):
	* libegg/recent-files/egg-recent-view-gtk.h:
	* libegg/recent-files/egg-recent-view.h:
	* libegg/recent-files/gtk-view-test.c: (tooltip_cb):

	Restrict permissions to the XML doc, plug memory leaks,
	fix #95776, redo the tooltip stuff a bit, and correctly respond
	to icon theme changes.  Also, back out the special case for getting
	the icon for directories, as I think it may be a bug in
	gnome_icon_lookup().

2002-10-13  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-util.c: (is_directory),
	(egg_recent_util_get_icon):  Apparently, we need to do special stuff
	to get the icon if the URI is a directory.

2002-10-10  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/bonobo-view-test.c: (tooltip_cb),
	(hello_create_main_window):
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list), (egg_recent_view_bonobo_init),
	(egg_recent_view_bonobo_get_ui_path),
	(egg_recent_view_bonobo_set_tooltip_func):
	* libegg/recent-files/egg-recent-view-bonobo.h:
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_add_to_menu), (egg_recent_view_gtk_finalize),
	(egg_recent_view_gtk_init), (egg_recent_view_gtk_show_numbers),
	(egg_recent_view_gtk_set_tooltip_func):
	* libegg/recent-files/egg-recent-view-gtk.h:
	* libegg/recent-files/egg-recent-view.h:
	* libegg/recent-files/gtk-view-test.c: (tooltip_cb), (main):

	Provide a mechanism to set tooltips for the gtk and bonobo views.

2002-10-10  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_monitor):  Since monitoring is only
	pseudo-quasi-required now, don't emit an irritating warning when
	it fails.

2002-10-03  Bastien Nocera  <hadess@hadess.net>

	* libegg/recent-files/egg-recent-util.c:
	* libegg/recent-files/egg-recent-util.h:
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list),
	(egg_recent_view_bonobo_finalize), (egg_recent_view_bonobo_init):
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_menu_item),
	(egg_recent_view_gtk_finalize), (egg_recent_view_gtk_init):
	make it possible to compile the recent-files stuff again with 2.0.x
	libgnomeui (no GnomeIconTheme). Fixes totem compilation. Just define
	USE_STABLE_LIBGNOMEUI to compile with GnomeIconTheme support.
	James, revert that if you can think of a better way (or when you merge
	into a platform library)

2002-10-02  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_add_full), (egg_recent_model_delete):

	If monitoring isn't working, give a local notification.

2002-10-01  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-vfs-utils.c:
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list):

	Fix some warnings

2002-09-30  Mark McLoughlin  <mark@skynet.ie>

	* libegg/recent-files/Makefile.am: add egg-recent-vfs-utils.[ch].

	* libegg/recent-files/egg-recent-model.[ch]: publicise
	EggRecentModel instance struct.
	(egg_recent_model_string_match): don't re-generate the pattern
	specs every time.
	(egg_recent_model_delete_from_list): no need to make a copy of
	the list to delete an itme.
	(egg_recent_model_add_new_groups): split out from update_item.
	(egg_recent_model_update_item): clean up.
	(egg_recent_model_finalize): free the filters and be paranoid
	about leaving bogus pointers.
	(egg_recent_model_set_filter_mime_types),
	(egg_recent_model_set_filter_uri_schemes): generate the
	pattern specs here.

	* libegg/recent-files/egg-recent-item.[ch]:
	(egg_recent_item_set_uri): upd.
	(egg_recent_item_peek_uri): impl.
	(egg_recent_item_get_uri_for_display): upd.
	(egg_recent_item_set_timestamp): if timestamp == -1 then
	set the timestamp to now.

	* libegg/recent-files/egg-recent-vfs-utils.[ch]: new methods
	on gnome-vfs HEAD. Add them here until we require HEAD.

	* libegg/recent-files/populate-recent.c: include string.h.

2002-09-30  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list),
	(egg_recent_view_bonobo_set_property),
	(egg_recent_view_bonobo_finalize), (show_menus_changed_cb),
	(egg_recent_view_bonobo_init):
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_set_leading_sep),
	(egg_recent_view_gtk_set_trailing_sep),
	(egg_recent_view_gtk_set_property), (egg_recent_view_gtk_finalize),
	(show_menus_changed_cb), (egg_recent_view_gtk_init),
	(egg_recent_view_gtk_new):
	* libegg/recent-files/egg-recent-view-gtk.h:
	* libegg/recent-files/gtk-view-test.c: (main):

	Use the desktop UI preferences to determine whether or not to show
	icons by default.

2002-09-29  Havoc Pennington  <hp@pobox.com>

	* libegg/treeviewutils/eggaccelerators.c (is_hyper, 
	is_meta, is_super): fix typos in array indexing, fix from 
	Ralph Loader bug #93005

2002-09-29  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent.h:

	Remove some crap that I accidentally committed.  Sigh.

2002-09-29  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/Makefile.am:
	* libegg/recent-files/egg-recent-model.c: (egg_recent_model_init),
	(egg_recent_model_changed), (egg_recent_model_remove_expired_list),
	(egg_recent_model_remove_expired):
	* libegg/recent-files/egg-recent-model.h:
	* libegg/recent-files/egg-recent.h:

	Remove some accidental stuff from the build, and add
	egg_recent_model_remove_expired()

2002-09-27  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-util.c: (load_icon_file),
	(egg_recent_util_get_icon):  Put some #ifdef stuff around rsvg calls
	for now, since some apps probably don't have/need it.  Clean up a
	couple warnings.

2002-09-27  James Willcox  <jwillcox@gnome.org>

	* configure.in:
	* libegg/recent-files/Makefile.am:
	* libegg/recent-files/bonobo-view-test.c:
	(hello_create_main_window):
	* libegg/recent-files/egg-recent-item.c:
	(egg_recent_item_new_from_uri), (egg_recent_item_set_uri),
	(egg_recent_item_get_uri_utf8),
	(egg_recent_item_get_uri_for_display):
	* libegg/recent-files/egg-recent-item.h:
	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_update_item), (egg_recent_model_filter),
	(egg_recent_model_monitor), (egg_recent_model_set_limit_internal),
	(egg_recent_model_write), (egg_recent_model_finalize),
	(egg_recent_model_limit_changed),
	(egg_recent_model_expiration_changed), (egg_recent_model_init),
	(egg_recent_model_new), (egg_recent_model_add),
	(egg_recent_model_set_limit):
	* libegg/recent-files/egg-recent-model.h:
	* libegg/recent-files/egg-recent-util.c:
	(path_represents_svg_image), (load_pixbuf_svg), (scale_icon),
	(load_icon_file), (egg_recent_util_get_icon):
	* libegg/recent-files/egg-recent-util.h:
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list),
	(egg_recent_view_bonobo_finalize), (egg_recent_view_bonobo_init):
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_menu_item),
	(egg_recent_view_gtk_add_to_menu), (egg_recent_view_gtk_init):
	* libegg/recent-files/gtk-view-test.c: (main):
	* libegg/recent-files/populate-recent.c: (main):

	LOTS of stuff changed.  Use Alex' new icon theme stuff for icons in
	the menus.  Use gconf keys for default limits, and expiration time
	(currently being ignored until the schema stuff is done).  This caused
	an API change for egg_recent_model_new().  Misc. fixes for non-utf8
	URI stuff.

2002-09-27  Mark McLoughlin  <mark@skynet.ie>

	These are multiscreen variants of the gspawn family.
	I haven't asked Owen for sponsership yet - I'll do
	that right now and immediately remove them again
	if I don't get it ..

	* libegg/screen-exec/Makefile.am: build
	egg-spawn.[ch] and test-egg-spawn.c.

	* libegg/screen-exec/egg-spawn.[ch]: impl
	_on_screen() variants of all gspawn functions.

	* libegg/screen-exec/test-egg-spawn.c: simple
	test program.

2002-09-24  Havoc Pennington  <hp@pobox.com>

	* autogen.sh: hardcode automake 1.4

2002-09-19  Mark McLoughlin  <mark@skynet.ie>

	* libegg/screen-exec/egg-screen-exec.c:
	(egg_screen_exec_display_string): fix silly with
	launching on the default screen.

2002-09-17  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-item.c:
	(egg_recent_item_new_from_uri), (egg_recent_item_set_uri),
	(egg_recent_item_get_uri_utf8),
	(egg_recent_item_get_uri_for_display):
	* libegg/recent-files/egg-recent-item.h:
	* libegg/recent-files/egg-recent-model.c: (text_handler),
	(error_handler), (egg_recent_model_write),
	(egg_recent_model_add_full):
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_set_list):
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_menu_item):
	* libegg/recent-files/gtk-view-test.c: (dump_list_cb):

	Fix all the crack-smoking stuff causing non-UTF-8 filenames to cause
	crashes (hopefully).

2002-09-17  Mark McLoughlin  <mark@skynet.ie>

	Add API docs and some small fixes.

	* libegg/screen-exec/egg-screen-exec.c:
	(egg_screen_exec_display_string): if passed the
	default screen just return the display's name. Also
	add a pre-condition.
	(egg_screen_exec_environment): add a pre-condition.
	(egg_screen_execute_command_line_async): ditto.

	* libegg/screen-exec/egg-screen-help.[ch]:
	(egg_help_display_uri_with_env),
	(egg_help_display_with_doc_id_with_env): these shouldn't
	be static.

	* libegg/screen-exec/egg-screen-url.[ch]:
	(egg_url_show_with_env): rename from _egg_url_show_with_env().

2002-09-16  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_set_property), (egg_recent_model_monitor),
	(egg_recent_model_init), (egg_recent_model_set_limit),
	(egg_recent_model_changed):

	Don't even monitor the file, or read it if the limit <= 0.

2002-09-16  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-item.c:
	(egg_recent_item_new_from_uri):
	* libegg/recent-files/egg-recent-util.c:
	(egg_recent_util_get_unique_id):

	More misc. fixings.

2002-09-16  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_set_toolbar_style): some updates to make layout
	of buttons look a bit nicer in various toolbar styles.

2002-09-15  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-item.c:
	* libegg/recent-files/egg-recent-model.c:
	* libegg/recent-files/egg-recent-model.h:
	* libegg/recent-files/egg-recent-util.c:

	Add some missing headers, and remove some unneeded ones.

2002-09-14  James Willcox  <jwillcox@gnome.org>

	* configure.in:
	* libegg/recent-files/egg-recent-util.c:
	(egg_recent_util_get_stock_icon), (egg_recent_util_get_unique_id):
	* libegg/recent-files/egg-recent-util.h:
	* libegg/recent-files/egg-recent-view-bonobo.c:
	(egg_recent_view_bonobo_clear), (egg_recent_view_bonobo_set_list),
	(egg_recent_view_bonobo_finalize), (egg_recent_view_bonobo_init):
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_clear), (egg_recent_view_gtk_new_menu_item),
	(egg_recent_view_gtk_finalize), (egg_recent_view_gtk_init):

	Remove dependency on uuid (the above is actually quite deceptive).

2002-09-14  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_monitor_cb), (egg_recent_model_add_full),
	(egg_recent_model_delete):
	* libegg/recent-files/egg-recent-model.h:
	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_new_menu_item):

	Made the gtk view respond properly to show_numbers(), and put a macro
	in the correct namespace.

Thu Sep 12 21:35:31 2002  Kristian Rietveld  <kris@gtk.org>

	* configure.in, libegg/Makefile.am: update

2002-09-11  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-view-gtk.c:
	(egg_recent_view_gtk_find_menu_offset),
	(egg_recent_view_gtk_add_to_menu),
	(egg_recent_view_gtk_set_property),
	(egg_recent_view_gtk_get_property), (egg_recent_view_gtk_finalize),
	(egg_recent_view_gtk_class_init),
	(egg_recent_view_gtk_set_start_menu_item),
	(egg_recent_view_gtk_get_start_menu_item),
	(egg_recent_view_gtk_new):
	* libegg/recent-files/egg-recent-view-gtk.h:
	* libegg/recent-files/gtk-view-test.c: (main):

	Made the gtk view work properly with GtkImageMenuItems.  This required
	changing the (broken) API to take a pointer to a menu item for the
	starting point, instead of the text in the label.

Sun Sep  8 01:10:29 2002  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/toolbar/eggtoolbar.c (get_button_relief): call
	gtk_widget_ensure_style () before reading "button_relief".

2002-09-07  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_insert_item): don't
	show the tool item on insert.

	* libegg/toolbar/eggseparatortoolitem.[ch]: add SeparatorToolItem.

2002-09-06  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/eggtoggletoolbutton.c
	(egg_toggle_tool_button_new_from_stock): let g_object_new() set up
	the item.

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_[gs]et_property): add properties support.
	(egg_tool_button_new_from_stock): change this to a simple wrapper
	around g_object_new().
	(egg_tool_button_finalize): add finalize handler to clean up
	stored stock_id if it is set.

	* libegg/toolbar/eggtoolbutton.c
	(egg_tool_button_create_menu_proxy): activate the tool button when
	the menu item gets clicked.

	* libegg/toolbar/eggtoggletoolbutton.c: handle toggling of the
	tool item, and add create_menu_proxy() implementation.

2002-09-05  James Willcox  <jwillcox@cs.indiana.edu>

	* recent-files/egg-recent-model.c,
	recent-files/egg-recent-view-bonobo.c
	recent-files/egg-recent-view-gtk.c
	recent-files/bonobo-view-test.c
	recent-files/gtk-view-test.c:
	Plugged a bunch of memory leaks found through memprof.

2002-09-05  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate): when in
	horizontal mode, allocate full height to all items, and vice versa.
	(egg_toolbar_paint_space_line): base length of separator lines on
	allocation of the tool item, rather than button_maxh.
	(egg_toolbar_size_request): in use_arrow mode, we still want to
	take the height of pack_end widgets into account in horizontal
	mode (and vice versa).

	* configure.in (EGG_RECENT_CFLAGS): don't put bonobo flags into
	EGG_CFLAGS/LIBS.

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_remove): remove the
	link when removing an item.
	(egg_toolbar_forall): move the list pointer forward before calling
	the callback.

	* libegg/toolbar/test-toolbar.c: add a few checkboxes and an
	option menu to change the toolbar settings.

2002-09-05  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/test-toolbar.c: change the item properties window
	to use a multi column list view, rather than a set of check boxes.

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_size_allocate):
	allocate size to spaces in vertical mode too.
	(egg_toolbar_paint_space_line): draw hlines in vertical mode.
	(egg_toolbar_size_allocate): homogeneous items should have the
	same height _and_ width, no matter if toolbar is horizontal or
	vertical.

	* libegg/toolbar/eggtoggletoolbutton.[ch]: add files (haven't
	hooked up a toggled signal yet ...).

	* libegg/toolbar/eggtoolbutton.c (egg_tool_button_init): fix up
	button creation.

2002-09-04  James Henstridge  <james@daa.com.au>

	* libegg/toolbar/eggtoolbutton.c: create the GtkButton and label
	within the instance_init routine, rather than the constructor
	function (to make subclassing easier).

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_child_type): implement,
	to assert that only EggToolItem's can be inserted.

	* libegg/toolbar/test-toolbar.c (main): use insert_item instead of
	append_item.

	* libegg/toolbar/eggtoolbar.c (egg_toolbar_insert_item): rename.
	(egg_toolbar_remove): adjust GtkContainer::remove implementation
	from GtkToolbar for EggToolbar.
	(egg_toolbar_add): add GtkContainer::add implementation.

	* libegg/toolbar/eggtoolbar.h (egg_toolbar_append_item): rename to
	insert_item.

2002-09-01  James Willcox  <jwillcox@cs.indiana.edu>

	* libegg/recent-files:  Fix miscellaneous issues with include
	dependencies.

2002-08-30  James Willcox  <jwillcox@cs.indiana.edu>

	* libegg/recent-files/egg-recent-model.c, egg-recent-view-gtk.c:
	Fixed some warnings

Thu Aug 22 19:30:55 2002  Jonathan Blandford  <jrb@redhat.com>

	* libegg/treeviewutils/eggcellrendererkeys.h:
	* libegg/treeviewutils/eggcellrendererkeys.c: Rewrite a bit.  Add
	new property -- 'accel_mode'.  Now you can get key modifiers for
	either GTK+ use (profterm) or random X use (panel/metacity.)  Apps
	should determine which kind they need.  Also, we always return the
	virtual modifiers.

	* libegg/treeviewutils/eggcellrendererpixbuf.c:
	(egg_cell_renderer_pixbuf_new): s/gtk_/g_/

	* libegg/treeviewutils/test-tree-utils.c: (accel_edited_callback),
	(key_test): Add a new simple test for the keys renderer.

2002-08-20  Soeren Sandmann  <sandmann@daimi.au.dk>

	* libegg/iconlist/eggiconlist.c (rubberbanding): Fix buglet that
	sometimes left dirt in corner of the rubberband area.

2002-08-18  James Willcox  <jwillcox@cs.indiana.edu>

	* libegg/recent-files/egg-recent-model.c:  Added gobject properties
	  (egg_recent_model_new):  Construct using properties
	  (egg_recent_model_write):  Escape entities in URIs and group names.
	
	* libegg/recent-files/egg-recent-view-*:  Added properties
	"show-icons" and "show-numbers".

2002-08-16  James Willcox  <jwillcox@cs.indiana.edu>

	* libegg/recent-files/egg-recent-item.[ch]:  Converted to a boxed
	type.  Added egg_recent_item_[un]ref, and removed copy/free.

	* libegg/recent-files/egg-recent-view-*:  Make the "activate" signal
	use VOID:BOXED instead of BOOL:POINTER.

	* libegg/util/eggmarshalers.list:  Removed BOOL:POINTER.

2002-08-15  James Willcox  <jwillcox@cs.indiana.edu>

	* libegg/recent-files/egg-recent-view-*:  Added API that allows for
	showing icons in the menu.  Currently only a stock image is used.

2002-08-13  James Willcox  <jwillcox@cs.indiana.edu>

	* libegg/recent-files:  Initial import of gnome-recent

2002-08-08  Mark McLoughlin  <mark@skynet.ie>

	* libegg/libegg/screen-exec/egg-screen-help.[ch],
	  libegg/libegg/screen-exec/egg-screen-url.[ch]:
	multiscreen versions of the gnome_help_*() and
	gnome_url_*() functions.

2002-07-27  Dave Camp  <dave@ximian.com>

	* libegg/treeviewutils/eggtreemultidnd.c: (stop_drag_check):
	(egg_tree_multi_drag_button_release_event),
	(egg_tree_multi_drag_button_press_event): Don't disconnect
	drag_data_get prematurely.  Handle clicks on blank areas.
	During a drag check, save all incoming button press events in 
	a list to be propagated in the correct order.

2002-07-14  Havoc Pennington  <hp@pobox.com>

	* libegg/eggaccelerators.c (egg_accelerator_parse_virtual): allow
	accelerators with no modifiers.

2002-07-14  James Henstridge  <james@daa.com.au>

	* libegg/treeviewutils/*: move the tree related stuff here.

2002-07-13  Havoc Pennington  <hp@pobox.com>

	* libegg/eggaccelerators.c (reload_modmap): fixes to work right

	* libegg/eggcellrendererkeys.c (grab_key_callback): put shift back
	in the modmask if the keyval was changed by the keyboard level;
	not sure this is how we'd decided to fix it but 
	I forgot what were were going to do. #86288
	
	(convert_keysym_state_to_string): use
	egg_virtual_accelerator_name() so that we display more
	user-friendly stuff instead of Mod3, etc.

2002-07-13  Havoc Pennington  <hp@pobox.com>

	* libegg/Makefile.am (libegg_la_SOURCES): add eggaccelerators.[hc]

	* libegg/eggaccelerators.h, libegg/eggaccelerators.c: 
	Handling for virtual modifiers.

Tue Jul  9 00:46:56 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelfilter.h: add modify_func_set
	field

	* libegg/treeviewutils/eggtreemodelfilter.c: cleaned the code a bit,
	added properties, fixed a bug in _remove_node (yes, I really have
	to rewrite _remove_node ...) and implemented the modify_func stuff
	(which really really rocks)

Mon Jul  8 02:15:09 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/treeviewutils/eggtreemodelfilter.[ch]: added the new filter.
	note that it's still incomplete and unstable, etc, etc, etc...

Mon Jul  8 02:06:04 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/gtktreemodelfilter.[ch]: removed the old crappy filter
	model.

2002-07-03  Mark McLoughlin  <mark@skynet.ie>

	* libegg/screen-exec/egg-screen-exec.c:
	(egg_screen_exec_environment): fix build
	without HAVE_GTK_MULTIHEAD.

2002-07-03  Mark McLoughlin  <mark@skynet.ie>

	* configure.in: define HAVE_GTK_MULTIHEAD if
	we have gtk+ >= 2.1.0.

	* libegg/screen-exec/: Add gnome-exec variants
	to launch apps on a particular GdkScreen.

2002-06-25  James Henstridge  <james@daa.com.au>

	* doc/libegg-sections.txt: sections file for documentation.

	* doc/libegg-docs.xml: set up main driver document.

	* doc/libegg.types: file listing all the GObjects in the various
	libegg libraries.

	* doc/Makefile.am: add doc building makefile.

	* configure.in: add some rules to build doc directory.

2002-06-23  Havoc Pennington  <hp@pobox.com>

	* libegg/eggcellrendererkeys.h (struct _EggCellRendererKeysClass):
	put path_string in the keys_edited signature

2002-06-20  Anders Carlsson  <andersca@gnu.org>

	* libegg/tray/eggtraymanager.c: (egg_tray_manager_finalize),
	(egg_tray_manager_manage_xscreen):
	* libegg/tray/eggtraymanager.h:
	Unset the selection in ::finalize.
	
Wed Jun 19 15:10:01 2002  Jonathan Blandford  <jrb@redhat.com>

	* libegg/sidebar/: Initially adding the sidebar widget from
	RhythmBox.

Tue May 21 19:22:54 2002  Jonathan Blandford  <jrb@redhat.com>

	* libegg/eggcellrendererkeys.c (grab_key_callback): return TRUE
	when we've handled the key presses.

2002-05-21  Bastien Nocera  <hadess@hadess.net>

	* libegg/eggcellrendererkeys.c:
	(marshal_VOID__STRING_UINT_FLAGS_UINT),
	(egg_cell_renderer_keys_class_init), (grab_key_callback):
	* libegg/eggcellrendererkeys.h: the keys_edited signal now
	has an additional parameter, the hardware_keycode of the key
	captured

2002-05-18  Anders Carlsson  <andersca@gnu.org>

	* libegg/tray/eggtraymanager.c: (egg_tray_manager_class_init),
	(egg_tray_manager_finalize), (egg_tray_manager_window_filter),
	(egg_tray_manager_manage_xscreen):
	* libegg/tray/eggtraymanager.h:
	Add a ::finalize handler that destroys the invisible window.
	Also add a "lost_selection" signal that's emitted when we lose
	our manager selection.
	
	* libegg/tray/testtray.c: (lost_selection), (main):
	Add a lost_selection signal handler.
	
2002-05-16  Havoc Pennington  <hp@redhat.com>

	* libegg/tray/*: Port the tray back to GTK 2.0 so people can test
	it out.

2002-05-11  Ian McKellar  <yakk@yakk.net>

	* configure.in:
	* libegg/Makefile.am:
	* libegg/background-monitor/Makefile.am:
	* libegg/background-monitor/egg-background-monitor.c:
	* libegg/background-monitor/egg-background-monitor.h:
	* libegg/background-monitor/test-ebm.c:
	Added the EggBackgroundMonitor which monitors for desktop image
	changes. It is nifty! Enjoy its niftiness!

2002-05-07  James Henstridge  <james@daa.com.au>

	* libegg/util/Makefile.am (libeggutil_la_SOURCES): fix up marshal
	building functions.

	* libegg/util/egg-marshal.c: replace contents of this file with
	skeleton used to compile generated marshal functions.

2002-05-07  Anders Carlsson  <andersca@gnu.org>

	* configure.in:
	* libegg/Makefile.am:
	Only compile the tray if gtk+ 2.1 is found.
	
	* libegg/util/Makefile.am:
	Fix bug, >> isn't the same thing as >.
	
	* libegg/util/eggmarshalers.c: (_egg_marshal_VOID__OBJECT_OBJECT),
	(_egg_marshal_VOID__OBJECT_STRING_LONG_LONG),
	(_egg_marshal_VOID__OBJECT_LONG):
	* libegg/util/eggmarshalers.h:
	* libegg/util/eggmarshalers.list:
	Add new marshalers.
	
Tue May  7 00:00:14 2002  Kristian Rietveld  <kris@gtk.org>

	Ooooooh. Node state saving. Though you need a gtk+ from 10 mins ago
	before this will work.

	* libegg/Makefile.am: add eggnodestate.c

	* libegg/eggnodestate.[ch]: new files

	* libegg/test-egg.c: new test!

2002-05-04  Havoc Pennington  <hp@pobox.com>

	* README: fill in with the hacking guidelines from 
	http://mail.gnome.org/archives/gnome-libs-devel/2002-February/msg00011.html

2002-05-01  Havoc Pennington  <hp@redhat.com>

	* libegg/eggcellrendererkeys.c: change key grab code to work
	properly instead of just hardcoding the "modifiers we allow" mask.
	Should now handle groups and Shift and so on correctly.
	(egg_cell_renderer_keys_start_editing): don't use an event 
	filter, just connect to key_press_event

2002-04-30  Anders Carlsson  <andersca@gnu.org>

	* configure.in:
	* libegg/Makefile.am:
	* libegg/util/eggmarshalers.c: (_egg_marshal_VOID__OBJECT_OBJECT):
	* libegg/util/eggmarshalers.h:
	* libegg/util/eggmarshalers.list:
	Add EggIconList, and update marshalers accordingly.
	
2002-04-30  Anders Carlsson  <andersca@gnu.org>

	* configure.in:
	* libegg/Makefile.am:
	* libegg/util/Makefile.am:
	* libegg/util/egg-marshal.c:
	* libegg/util/egg-marshal.h:
	* libegg/util/eggintl.h:
	* libegg/util/eggmarshalers.c:
	* libegg/util/eggmarshalers.h:
	* libegg/util/eggmarshalers.list:
	Add libeggutil.la, a convenience library with marshalers and i18n
	"support". Also make eggmenu use the standard gobject marshalers.
	
Sat Apr 13 15:05:15 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/gtktreemodelfilter.c (gtk_tree_model_filter_get_iter): check
	for an empty array

Thu Apr 11 00:35:07 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/gtkcellrendererstock.[ch]: removed

	* libegg/eggcellrendererpixbuf.[ch]: copied from gtkcellrendererpixbuf,
	and added stock functionality

	* libegg/Makefile, libegg/test-egg.c: updated

Fri Apr  5 22:24:54 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/gtkcellrendererstock.[ch], libegg/Makefile: added
	GtkCellRendererStock

	* libegg/test-egg.c: added a testcase for the GtkCellRendererStock

Tue Mar 26 22:21:29 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/gtktreemodelfilter.c
	(gtk_tree_model_filter_convert_path_to_child_path): fix this function
	(merge with gtktreemodelsort)

Mon Mar 18 15:49:51 2002  Jonathan Blandford  <jrb@redhat.com>

	* libegg/eggreorder.c (egg_list_store_reorder): move from N^2 to N ln(N)

Mon Mar 18 15:27:53 2002  Jonathan Blandford  <jrb@redhat.com>

	* libegg/eggreorder.c (egg_{list,tree}_store_reorder): s/gtk/egg/g

Sun Mar 17 23:19:26 2002  Jonathan Blandford  <jrb@redhat.com>

	* libegg/eggcellrendererkeys.c (egg_cell_renderer_keys_get_size):
	Allow sizing of instruction message.

Sun Mar 10 14:41:14 2002  Jonathan Blandford  <jrb@redhat.com>

	* libegg/eggcellrendererkeys.c (egg_cell_renderer_keys_get_type):
	get the right sizeof.
	(egg_cell_renderer_keys_set_accelerator): chain to parent set_type.

Mon Mar  4 17:09:16 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/gtktreemodelfilter.c
	(gtk_tree_model_filter_row_back_child_updater): emit has_child_toggled
	when we put back some rows

2002-03-03  Havoc Pennington  <hp@pobox.com>

	* libegg/eggcellrendererkeys.c
	(egg_cell_renderer_keys_set_accelerator): fix to avoid notifying 
	on the text property in all cases.

2002-03-03  Havoc Pennington  <hp@pobox.com>

	* libegg/eggcellrendererkeys.c: remove debug print

2002-03-03  Havoc Pennington  <hp@pobox.com>

	* libegg/eggcellrendererkeys.c
	(egg_cell_renderer_keys_start_editing): put back unrealize handler
	to avoid stuck grabs

2002-03-03  Havoc Pennington  <hp@pobox.com>

	* libegg/eggcellrendererkeys.c: Rework code to store
	 modmask/keyval instead of the textual representation, then make
	 Backspace work sanely for deleting the binding.  Remove use of
	 GtkEntry, just use a cheesy label subclass.
	(grab_key_filter): remove gratuituous use of GDK_CURRENT_TIME when
	the event with the right time is right there
	(egg_cell_renderer_keys_start_editing): use right time for
	keyboard grab, abort the edit if keyboard grab fails, grab on
	widget->window instead of root window. Also grab the pointer 
	so we can cancel if you click somewhere. (except I didn't 
	connect to button press event yet)

	* libegg/eggcellrendererkeys.h (EGG_CELL_RENDERER_KEYS_GET_CLASS):
	fix cast macros

Sun Mar  3 20:16:16 2002  Kristian Rietveld  <kris@gtk.org>

	* libegg/gtktreemodelfilter.[ch]: merge changes from
	gtk+/gtk/gtktreemodelsort.c HEAD, and get it working again

	* libegg/gtktreemodelfilter.c (gtk_tree_model_filter_row_changed):
	add code to build root level if it isn't there, and set visibility
	to FALSE by default. (We don't let the path conversion func build
	levels, so we special case the root level here). (Pointed out
	by Bastien Nocera and Jorn Baayen).

2002-03-02  Havoc Pennington  <hp@pobox.com>

	* libegg/eggcellrendererkeys.c
	(egg_cell_renderer_keys_start_editing): connect to unrealize and
	remove the key filter, seems to avoid a crash in some cases.

2002-03-02  Havoc Pennington  <hp@pobox.com>

	* eggcellrendererkeys.c: fix some deprecation stuff.
